<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>脚印</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://zhaozhoa.github.com/"/>
  <updated>2019-09-09T07:36:59.014Z</updated>
  <id>https://zhaozhoa.github.com/</id>
  
  <author>
    <name>张朝</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>双向数据绑定原理</title>
    <link href="https://zhaozhoa.github.com/2019/09/09/%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E5%8E%9F%E7%90%86/"/>
    <id>https://zhaozhoa.github.com/2019/09/09/双向数据绑定原理/</id>
    <published>2019-09-09T07:35:25.000Z</published>
    <updated>2019-09-09T07:36:59.014Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Vue-中双向数据绑定的原理"><a href="#Vue-中双向数据绑定的原理" class="headerlink" title="Vue 中双向数据绑定的原理"></a>Vue 中双向数据绑定的原理</h1><p>利用 <code>Object.defineProperty()</code> 方法实现双向数据绑定</p><p><code>Object.defineProperty(obj, prop, descriptor)</code>方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象</p><ul><li>obj ：要在其上定义属性的对象。</li><li>prop：要定义或修改的属性的名称</li><li>descriptor：将被定义或修改的属性描述符。<ul><li>descriptor 为一个对象，有两个方法get 和 set</li><li>当 获取 对象上的属性时触发 get方法</li><li>添加对象属性时 触发 set 方法</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;input type=<span class="string">"text"</span> id=<span class="string">"userName"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"uName"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">  &lt;script&gt;</span><br><span class="line">  let obj = &#123;</span><br><span class="line">    pwd: 123456</span><br><span class="line">  &#125;</span><br><span class="line">  Object.defineProperty(obj, 'userName', &#123;</span><br><span class="line">    get()&#123;</span><br><span class="line">      console.log("get init")</span><br><span class="line">    &#125;,</span><br><span class="line">    // vul 为添加属性的值</span><br><span class="line">    set(val) &#123;</span><br><span class="line">      console.log('set init');</span><br><span class="line">      document.querySelector('#uName').innerHTML = val</span><br><span class="line">      document.querySelector('#userName').value = val</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  document.querySelector('#userName').addEventListener('keyup', (event) =&gt; &#123;</span><br><span class="line">    obj.userName = event.target.value</span><br><span class="line">  &#125;)</span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>分析 :</strong> 当键盘按下时，修改 obj 对象的 userName 属性， 触发 set 事件</p><p>给 文本框添加innerHtml，实现 <code>页面的改变影响 js 内存的改变</code></p><p>当 浏览器控制台 修改obj.userName 时， 会改变文本框的 innerHTML和 span 的 value ，实现 <code>js 内存属性的改变，影响页面的变化</code></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Vue-中双向数据绑定的原理&quot;&gt;&lt;a href=&quot;#Vue-中双向数据绑定的原理&quot; class=&quot;headerlink&quot; title=&quot;Vue 中双向数据绑定的原理&quot;&gt;&lt;/a&gt;Vue 中双向数据绑定的原理&lt;/h1&gt;&lt;p&gt;利用 &lt;code&gt;Object.define
      
    
    </summary>
    
      <category term="前端框架" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="vue" scheme="https://zhaozhoa.github.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>闭包总结</title>
    <link href="https://zhaozhoa.github.com/2019/09/08/%E9%97%AD%E5%8C%85%E6%80%BB%E7%BB%93/"/>
    <id>https://zhaozhoa.github.com/2019/09/08/闭包总结/</id>
    <published>2019-09-08T12:46:17.000Z</published>
    <updated>2019-09-08T15:30:45.717Z</updated>
    
    <content type="html"><![CDATA[<h1 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h1><h2 id="函数的创建和执行过程"><a href="#函数的创建和执行过程" class="headerlink" title="函数的创建和执行过程"></a>函数的创建和执行过程</h2><h3 id="函数的创建"><a href="#函数的创建" class="headerlink" title="函数的创建"></a>函数的创建</h3><ul><li>开辟一个<code>堆内存</code></li><li>把函数体中的代码当作字符串存储进去</li><li>把堆内存的地址赋值给函数名</li><li>函数在那创建，那么它执行的时候所需要查找的上级作用域就是谁</li></ul><h3 id="函数的执行"><a href="#函数的执行" class="headerlink" title="函数的执行"></a>函数的执行</h3><ul><li>形成一个私有的作用域（执行上下文，私用的<code>栈内存</code>）<ul><li>执行一次，产生一个，互不影响</li></ul></li><li>参数赋值 &amp;  变量提升</li><li>代码执行<ul><li>把堆内存中的字符串代码一行行执行</li></ul></li><li>作用域链查找<ul><li>遇到一个变量，先判断是否为私有变量（函数中声明的变量和形参是私有变量）如果是直接操作，不是向上级作用域查找，直到 window</li></ul></li></ul><p>私有变量和外界的变量没有必然关系，可以理解成被私有的栈内存保护 这就是<strong>闭包的保护级制</strong></p><h2 id="堆栈内存的释放问题"><a href="#堆栈内存的释放问题" class="headerlink" title="堆栈内存的释放问题"></a>堆栈内存的释放问题</h2><blockquote><p>函数执行就会形成栈内存（在内存中分配空间），如果不及时销毁，会导致内存爆满也就是内存泄漏</p></blockquote><h3 id="堆内存的释放"><a href="#堆内存的释放" class="headerlink" title="堆内存的释放"></a>堆内存的释放</h3><p>创建一个引用类型，就会形成一个堆内存，如果当前的堆内存不被引用，就会被浏览器给释放</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>: zhao&#125;</span><br><span class="line"><span class="keyword">let</span> oop = obj</span><br></pre></td></tr></table></figure><p>此时对象被 obj 和 oop  变量引用，所以不能释放</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj = <span class="literal">null</span></span><br><span class="line">oop = <span class="literal">null</span></span><br></pre></td></tr></table></figure><p>此时 对象 不被引用，所以就会被释放</p><h3 id="栈内存释放"><a href="#栈内存释放" class="headerlink" title="栈内存释放"></a>栈内存释放</h3><h4 id="栈内存的形成方式"><a href="#栈内存的形成方式" class="headerlink" title="栈内存的形成方式"></a>栈内存的形成方式</h4><ul><li>浏览器形成的全局作用域</li><li>执行时函数形成的私有作用域</li><li>let / const 形成的代码块</li></ul><h4 id="栈内存销毁方式"><a href="#栈内存销毁方式" class="headerlink" title="栈内存销毁方式"></a>栈内存销毁方式</h4><ul><li>全局栈内存<ul><li>关闭页面</li></ul></li><li>函数私有栈内存<ul><li>一般情况函数执行完，浏览器自动清除</li><li>一旦栈内存中的某个东西（一般是堆内存）被私有作用域以外的事物引用，则栈内存不能立即被销毁，私有作用域中的变量等信息得以保存，只有外部引用解除，才能被销毁</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">X</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"> <span class="keyword">let</span> f = X() <span class="comment">// 此时 f 引用 X 中返回的函数，所以 X 在执行完不能释放</span></span><br><span class="line"> </span><br><span class="line"> f = <span class="literal">null</span> <span class="comment">//此时才可以</span></span><br></pre></td></tr></table></figure><h2 id="闭包-1"><a href="#闭包-1" class="headerlink" title="闭包"></a>闭包</h2><blockquote><p>解释一： 函数形成的私用作用域就是闭包</p><p>解释二： 函数中的堆内存被私有作用域以外的变量引用，形成闭包</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> i = <span class="number">5</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(n + (++i))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> f = fn(<span class="number">1</span>)</span><br><span class="line">f(<span class="number">2</span>) <span class="comment">// 4</span></span><br><span class="line">fn(<span class="number">3</span>)(<span class="number">4</span>) <span class="comment">// 8</span></span><br><span class="line">fn(<span class="number">5</span>)(<span class="number">6</span>) <span class="comment">// 12</span></span><br><span class="line">f(<span class="number">7</span>) <span class="comment">// 10</span></span><br><span class="line"><span class="built_in">console</span>.log(i) <span class="comment">// 5</span></span><br></pre></td></tr></table></figure><p><strong>解释：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f = fn(<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>首先在栈内存中执行 fn 函数 返回 里面函数的栈内存地址，并将其赋值给 变量 f ，此时由于此时 变量 f 引用了栈内存中 fn 返回的 堆内存地址，此时的 fn 执行的 栈内存<code>不销毁，同时变量 i 被保存</code>。私有变量 i 此时是 1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>调用 fn 返回的函数并传参 2 ，返回 结果为 2 + (++i) = 4 , 私有变量 i 同时变为 2 ，这时 <code>返回的函数执行完毕，销毁</code>，但是 <code>fn 不销毁,变量 i也不销毁</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn(<span class="number">3</span>)(<span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>再次执行 fn 则需要重新 开辟一个栈内存，先执行 fn(3)，再执行返回的函数，由于再这个栈内存中，没有什么引用 返回函数的堆地址，所以返回函数执行完后 <code>fn() 和 返回函数都销毁</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn(<span class="number">5</span>)(<span class="number">6</span>)</span><br></pre></td></tr></table></figure><p>原理同上</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f(<span class="number">7</span>)</span><br></pre></td></tr></table></figure><p>此时 fn 函数  在栈中没有销毁，则返回的 为 7 + (++i) = 10; 变量 i 变为值 为 3</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;闭包&quot;&gt;&lt;a href=&quot;#闭包&quot; class=&quot;headerlink&quot; title=&quot;闭包&quot;&gt;&lt;/a&gt;闭包&lt;/h1&gt;&lt;h2 id=&quot;函数的创建和执行过程&quot;&gt;&lt;a href=&quot;#函数的创建和执行过程&quot; class=&quot;headerlink&quot; title=&quot;函数的创建
      
    
    </summary>
    
      <category term="前端" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="前端基础" scheme="https://zhaozhoa.github.com/tags/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>Mockjs</title>
    <link href="https://zhaozhoa.github.com/2019/09/04/Mockjs/"/>
    <id>https://zhaozhoa.github.com/2019/09/04/Mockjs/</id>
    <published>2019-09-04T10:03:42.000Z</published>
    <updated>2019-09-04T12:20:23.966Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Mockjs"><a href="#Mockjs" class="headerlink" title="Mockjs"></a>Mockjs</h1><p>用于前端自己造加数据的库</p><p><strong>文档</strong>:<a href="https://github.com/nuysoft/Mock/wiki" target="_blank" rel="noopener">https://github.com/nuysoft/Mock/wiki</a></p><h2 id="上车"><a href="#上车" class="headerlink" title="上车"></a>上车</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i Mockjs -D</span><br></pre></td></tr></table></figure><h3 id="vue-中使用"><a href="#vue-中使用" class="headerlink" title="vue 中使用"></a>vue 中使用</h3><ul><li>在 vue的 src 目录下面 新建一个 mock 文件夹，里面新建一个 index.js文件</li><li>在 index.js 文件下面导入 mockjs 包</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Mock <span class="keyword">from</span> <span class="string">'mockjs'</span></span><br></pre></td></tr></table></figure><ul><li>将 index.js 导入到 main.js</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./mock/'</span></span><br></pre></td></tr></table></figure><h2 id="用-mockjs-模拟-api-拦截-get-和-post-请求"><a href="#用-mockjs-模拟-api-拦截-get-和-post-请求" class="headerlink" title="用 mockjs 模拟 api 拦截 get 和 post 请求"></a>用 mockjs 模拟 api 拦截 get 和 post 请求</h2><blockquote><ul><li>用 Mock.mock() 模拟 api 接口<ul><li>参数一： 接口地址，可选参数</li><li>参数二： 请求方式， 可选参数</li><li>参数三： 返回数据或者函数</li></ul></li></ul></blockquote><h4 id="拦截-get-请求"><a href="#拦截-get-请求" class="headerlink" title="拦截 get 请求"></a>拦截 get 请求</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Mock.mock(<span class="string">'aaa/bbb'</span>, <span class="string">'get'</span>, &#123;</span><br><span class="line">  status: <span class="number">0</span>,</span><br><span class="line">  msg: <span class="string">'ok'</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    name: <span class="string">'zhaozhaozhao'</span>,</span><br><span class="line">    age: <span class="number">22</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="拦截-post-请求"><a href="#拦截-post-请求" class="headerlink" title="拦截 post 请求"></a>拦截 post 请求</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Mock.mock(<span class="string">'/api/addgoods'</span>, <span class="string">'post'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">options</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(options)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    status: <span class="number">0</span>,</span><br><span class="line">    msg: <span class="string">'ok'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>函数的 option 参数为 提交的数据</p><h2 id="用-mockjs-创造假数据"><a href="#用-mockjs-创造假数据" class="headerlink" title="用 mockjs 创造假数据"></a>用 mockjs 创造假数据</h2><p>文档写的很详细，不想重复累赘了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Mockjs&quot;&gt;&lt;a href=&quot;#Mockjs&quot; class=&quot;headerlink&quot; title=&quot;Mockjs&quot;&gt;&lt;/a&gt;Mockjs&lt;/h1&gt;&lt;p&gt;用于前端自己造加数据的库&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;文档&lt;/strong&gt;:&lt;a href=&quot;https
      
    
    </summary>
    
      <category term="前端" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="vue" scheme="https://zhaozhoa.github.com/tags/vue/"/>
    
      <category term="mockjs" scheme="https://zhaozhoa.github.com/tags/mockjs/"/>
    
  </entry>
  
  <entry>
    <title>初窥Angular</title>
    <link href="https://zhaozhoa.github.com/2019/08/23/Angular/"/>
    <id>https://zhaozhoa.github.com/2019/08/23/Angular/</id>
    <published>2019-08-23T04:00:33.000Z</published>
    <updated>2019-09-04T09:05:07.789Z</updated>
    
    <content type="html"><![CDATA[<h1 id="angular"><a href="#angular" class="headerlink" title="angular"></a>angular</h1><h2 id="上车"><a href="#上车" class="headerlink" title="上车"></a>上车</h2><p>安装 脚手架</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g @angular/cli</span><br></pre></td></tr></table></figure><p>创建项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng new 项目名</span><br></pre></td></tr></table></figure><p>启动</p><p>–open 设置自动启动浏览器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng serve --open</span><br></pre></td></tr></table></figure><h2 id="生成目录结构分析"><a href="#生成目录结构分析" class="headerlink" title="生成目录结构分析"></a>生成目录结构分析</h2><p><strong>src目录</strong></p><p>src:<br>│  favicon.ico<br>│  index.html<br>│  main.ts<br>│  polyfills.ts<br>│  styles.less<br>│  test.ts<br>│<br>├─app<br>│  │  app-routing.module.ts    // Angular 的路由模块<br>│  │  app.component.html    // Angular 的根html<br>│  │  app.component.less    // Angular 的根less<br>│  │  app.component.spec.ts    // 测试文件<br>│  │  app.component.ts    // 这是 Angular 的根组件模块<br>│  │  app.module.ts    // 这是 Angular 的 跟模块，配置了 Angular 加载什么应用<br>│  │<br>│  └─components    // 自己创建的组件目录<br>│      └─head    // 自己创建的组件<br>│              head.component.html<br>│              head.component.less<br>│              head.component.spec.ts<br>│              head.component.ts<br>│<br>├─assets<br>│      .gitkeep<br>│<br>└─environments<br>        environment.prod.ts<br>        environment.ts</p><h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><h3 id="创建组件"><a href="#创建组件" class="headerlink" title="创建组件"></a>创建组件</h3><p>在src 目录下面创建一个 components 文件夹 放入 head 组件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng g component components/head</span><br></pre></td></tr></table></figure><p>使用这个命令会 自动 生成一个 head 组件的文件夹，里面由有四个文件分别是</p><ul><li>head.component.html</li><li>head.component.less</li><li>head.component.spec.ts</li><li>head.component.ts<ul><li>这个文件了面配置了组件名称</li></ul></li></ul><p>同时还会在 app.module.ts 文件中 引入 和 使用 这个组件</p><h3 id="使用组件"><a href="#使用组件" class="headerlink" title="使用组件"></a>使用组件</h3><p>在 Angular 的 html 文件中直接用&lt;组件名&gt;&lt;/组件名&gt; 使用组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">""</span> <span class="attr">style</span> = <span class="string">"text-align: center"</span>&gt;</span></span><br><span class="line">  hello Angular</span><br><span class="line">    <span class="comment">&lt;!-- 使用组件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">app-head</span>&gt;</span><span class="tag">&lt;/<span class="name">app-head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-outlet</span>&gt;</span><span class="tag">&lt;/<span class="name">router-outlet</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="angular-和-vue-指令的对比"><a href="#angular-和-vue-指令的对比" class="headerlink" title="angular 和 vue 指令的对比"></a>angular 和 vue 指令的对比</h3><table><thead><tr><th style="text-align:center">vue</th><th style="text-align:center">angular</th></tr></thead><tbody><tr><td style="text-align:center">v-bind:title=’aaa’</td><td style="text-align:center">[title]=’aaa’</td></tr><tr><td style="text-align:center">v-html=’x’</td><td style="text-align:center">[innerHTML]=’x’</td></tr><tr><td style="text-align:center">v-for=”item in GoodsList”</td><td style="text-align:center">*ngFor=”let item of GoodsList”</td></tr><tr><td style="text-align:center">v-if</td><td style="text-align:center">*ngIf</td></tr><tr><td style="text-align:center">:class = ‘{‘name’: true}’</td><td style="text-align:center">[ngClass] =’{‘name’: true}’</td></tr><tr><td style="text-align:center">@click= ‘fn’</td><td style="text-align:center">(click) = ‘fn()’</td></tr></tbody></table><h3 id="anuglar-的双向数据绑定"><a href="#anuglar-的双向数据绑定" class="headerlink" title="anuglar 的双向数据绑定"></a>anuglar 的双向数据绑定</h3><ul><li>在 app.module.st 文件中引入 </li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;FormsModule&#125; <span class="keyword">from</span> <span class="string">'@angular/forms'</span>;</span><br></pre></td></tr></table></figure><ul><li>然后将其添加到 imports中</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">imports: [  <span class="comment">// 配置当前模块运行依赖的其他模块</span></span><br><span class="line">    BrowserModule,</span><br><span class="line">    AppRoutingModule,</span><br><span class="line">    FormsModule</span><br><span class="line">  ],</span><br></pre></td></tr></table></figure><p>在使用的时候用<code>[(ngModel)]</code>=”input”来进行双向数据绑定</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> [(<span class="attr">ngModel</span>)]=<span class="string">"input"</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="angular-中的服务"><a href="#angular-中的服务" class="headerlink" title="angular 中的服务"></a>angular 中的服务</h2><p>在服务中可以存储一些全局的方法或者属性，其他组建可以调用这些方法或者属性</p><h3 id="创建服务"><a href="#创建服务" class="headerlink" title="创建服务"></a>创建服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng g service (位置: services/storage)</span><br></pre></td></tr></table></figure><p>在服务中添加公共方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line">@Injectable(&#123;</span><br><span class="line">  providedIn: <span class="string">'root'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">StorageService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>() &#123; &#125;</span><br><span class="line">  setStorage(key: string, <span class="attr">value</span>: any) &#123;</span><br><span class="line">    localStorage.setItem(key, <span class="built_in">JSON</span>.stringify(value));</span><br><span class="line">  &#125;</span><br><span class="line">  getStorage(key: string) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(localStorage.getItem(key));</span><br><span class="line">  &#125;</span><br><span class="line">  reomveStorage(key: string) &#123;</span><br><span class="line">    localStorage.removeItem(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在-app-module-ts-中引入及挂载"><a href="#在-app-module-ts-中引入及挂载" class="headerlink" title="在 app.module.ts 中引入及挂载"></a>在 app.module.ts 中引入及挂载</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; StorageService &#125; <span class="keyword">from</span> <span class="string">'./services/storage.service'</span>;</span><br></pre></td></tr></table></figure><p><strong>挂载</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">providers: [StorageService],</span><br></pre></td></tr></table></figure><h3 id="在其他组建中使用"><a href="#在其他组建中使用" class="headerlink" title="在其他组建中使用"></a>在其他组建中使用</h3><p>在组建中引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; StorageService &#125; <span class="keyword">from</span> <span class="string">'../../services/storage.service'</span>;</span><br></pre></td></tr></table></figure><p>在组建中使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">constructor</span>(public service: StorageService) &#123;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"> addList(e: any) &#123;</span><br><span class="line">    <span class="keyword">if</span> (e.keyCode === <span class="number">13</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.list.unshift(&#123;</span><br><span class="line">        title: <span class="keyword">this</span>.thing,</span><br><span class="line">        status: <span class="literal">false</span>,</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">this</span>.service.setStorage(<span class="string">'userHistory'</span>, <span class="keyword">this</span>.list);</span><br><span class="line">      <span class="keyword">this</span>.thing = <span class="string">''</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="angular-中的-Dom-操作-以及-ViewChild"><a href="#angular-中的-Dom-操作-以及-ViewChild" class="headerlink" title="angular 中的 Dom 操作 以及 ViewChild"></a>angular 中的 Dom 操作 以及 ViewChild</h2><h3 id="angular-中-通过原生-js-ts-操作-Dom"><a href="#angular-中-通过原生-js-ts-操作-Dom" class="headerlink" title="angular 中 通过原生 js(ts) 操作 Dom"></a>angular 中 通过原生 js(ts) 操作 Dom</h3><p>在组建中使用 <code>ngAfterViewInit</code>生命周期函数，在函数中直接使用js操作Dom</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ngAfterViewInit(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> box1: <span class="built_in">any</span> = <span class="built_in">document</span>.querySelector(<span class="string">'#box1'</span>);</span><br><span class="line">    box1.style.color = <span class="string">'red'</span>;</span><br><span class="line">    <span class="keyword">const</span> box2: <span class="built_in">any</span> = <span class="built_in">document</span>.querySelector(<span class="string">'.box2'</span>);</span><br><span class="line">    box2.style.color = <span class="string">'hotpink'</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><ul><li>ngAfterViewInit 函数 指的是dom加载完成后的 生命周期函数</li><li>ngAfterViewInit 函数需要 实现于 AfterViewInit 接口，所以需要修改</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, OnInit, AfterViewInit &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> DomComponent <span class="keyword">implements</span> OnInit, AfterViewInit</span><br></pre></td></tr></table></figure><h3 id="用-ViewChild-获取-dom-节点"><a href="#用-ViewChild-获取-dom-节点" class="headerlink" title="用 ViewChild 获取 dom 节点"></a>用 ViewChild 获取 dom 节点</h3><p>定义html 节点 用 <code>#xxx</code> 为标记</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> #<span class="attr">box3</span>&gt;</span></span><br><span class="line">  this is box3</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用 ViewChild</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@ViewChild</span>(<span class="string">'box3'</span>, &#123;</span><br><span class="line">    <span class="keyword">static</span>: <span class="literal">false</span></span><br><span class="line">  &#125;) box3(随便的名字): ElementRef;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line">ngAfterViewInit(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.box3.nativeElement.style.color = <span class="string">'blue'</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3 id="用-ViewChild-获取子组件的属性和方法"><a href="#用-ViewChild-获取子组件的属性和方法" class="headerlink" title="用 ViewChild 获取子组件的属性和方法"></a>用 ViewChild 获取子组件的属性和方法</h3><p>使用子组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 在父组件中使用子组件</span><br><span class="line"><span class="tag">&lt;<span class="name">app-head</span> #<span class="attr">head</span>&gt;</span><span class="tag">&lt;/<span class="name">app-head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 父组件的 button</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">mat-button</span> (<span class="attr">click</span>)=<span class="string">"getChildFn()"</span>&gt;</span>获取子组件的方法<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ViewChild 获取子组件</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注入</span></span><br><span class="line"><span class="meta">@ViewChild</span>(<span class="string">'head'</span>, &#123;<span class="keyword">static</span>: <span class="literal">true</span>&#125;) head: <span class="built_in">any</span>;</span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"> getChildFn() &#123;</span><br><span class="line">    <span class="keyword">this</span>.head.print();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>这样就可以调用 子组件上的 print（） 方法</p><h2 id="angular-中的父子组建，及组建间通信"><a href="#angular-中的父子组建，及组建间通信" class="headerlink" title="angular 中的父子组建，及组建间通信"></a>angular 中的父子组建，及组建间通信</h2><h3 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h3><p>父组件不仅可以给子组件传递简单的数据，也可以把自己的方法以及整个父组件传递给子组件</p><p><strong>1. 父组件调用子组件的时候传入数据</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">app-son</span> [<span class="attr">msg</span>] = <span class="string">'传入的数据'</span>&gt;</span><span class="tag">&lt;/<span class="name">app-son</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2. 子组件引入 Input 模块</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Component, OnInit, Input&#125;  <span class="keyword">from</span> <span class="string">'@anuglar/core'</span></span><br></pre></td></tr></table></figure><p><strong>3. 子组件中用 @Inpit 接收父组件传递过来的数据</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> HeaderComponent inplements OnInint &#123;</span><br><span class="line">  <span class="comment">// 接收 父组件传入的值</span></span><br><span class="line">  <span class="meta">@Input</span>() msg: <span class="built_in">string</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>父组件分别向子组件传入数据，函数，和整个父组件的方法</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 传入普通数据</span><br><span class="line"><span class="tag">&lt;<span class="name">app-son</span> [<span class="attr">msg</span>] = <span class="string">'传入的数据'</span>&gt;</span><span class="tag">&lt;/<span class="name">app-son</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 传入一个函数</span><br><span class="line"><span class="tag">&lt;<span class="name">app-son</span> [<span class="attr">run</span>] = <span class="string">"这是父组件的一个函数"</span>&gt;</span><span class="tag">&lt;/<span class="name">app-son</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 传入整个父组件</span><br><span class="line"><span class="tag">&lt;<span class="name">app-son</span> [<span class="attr">father</span>] = <span class="string">"this"</span>&gt;</span><span class="tag">&lt;/<span class="name">app-son</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h3><h4 id="用-ViewChild-获取子组件的数据-或-方法"><a href="#用-ViewChild-获取子组件的数据-或-方法" class="headerlink" title="用 ViewChild 获取子组件的数据 或 方法"></a>用 ViewChild 获取子组件的数据 或 方法</h4><p>使用方法见上面的 <code>用 ViewChild 获取子组件的属性和方法</code></p><h4 id="子组件通过-Output-触发父组件的方法（和vue的子传父有点像）"><a href="#子组件通过-Output-触发父组件的方法（和vue的子传父有点像）" class="headerlink" title="子组件通过 @Output 触发父组件的方法（和vue的子传父有点像）"></a>子组件通过 @Output 触发父组件的方法（和vue的子传父有点像）</h4><ol><li>子组件引入 Output 和 EventEmitter</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, OnInit, Output, EventEmitter &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br></pre></td></tr></table></figure><ol start="2"><li>子组件实例化EventEmitter</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Output</span>() <span class="keyword">private</span> outer = <span class="keyword">new</span> EventEmitter&lt;<span class="built_in">string</span>&gt;();</span><br></pre></td></tr></table></figure><ol start="3"><li>子组件通过 EventEmitter 对象 outer 实例广播对象</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sendParent() &#123;</span><br><span class="line">  <span class="keyword">this</span>.outer.emit(<span class="string">'子组件的消息'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li>父组件调用子组件的时候，定义接收事件 ，outer 就是子组件的 EventEmitter 对象 outer</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">app-son</span> (<span class="attr">outer</span>) = <span class="string">"runParent($event)"</span>&gt;</span><span class="tag">&lt;/<span class="name">app-son</span>&gt;</span></span><br></pre></td></tr></table></figure><ol start="5"><li>父组件接收到数据会调用自己的 runParent 方法，获取数据</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">runParent(msg: <span class="built_in">string</span>) &#123;</span><br><span class="line">  alert(msg)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="非父子组件传递"><a href="#非父子组件传递" class="headerlink" title="非父子组件传递"></a>非父子组件传递</h3><ul><li>service（服务）</li><li>localStorage</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;angular&quot;&gt;&lt;a href=&quot;#angular&quot; class=&quot;headerlink&quot; title=&quot;angular&quot;&gt;&lt;/a&gt;angular&lt;/h1&gt;&lt;h2 id=&quot;上车&quot;&gt;&lt;a href=&quot;#上车&quot; class=&quot;headerlink&quot; title=&quot;上
      
    
    </summary>
    
      <category term="前端框架" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="angular" scheme="https://zhaozhoa.github.com/tags/angular/"/>
    
  </entry>
  
  <entry>
    <title>typeScript</title>
    <link href="https://zhaozhoa.github.com/2019/08/21/typeScript/"/>
    <id>https://zhaozhoa.github.com/2019/08/21/typeScript/</id>
    <published>2019-08-21T07:35:12.000Z</published>
    <updated>2019-08-23T03:20:41.123Z</updated>
    
    <content type="html"><![CDATA[<h1 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h1><h2 id="上车"><a href="#上车" class="headerlink" title="上车"></a>上车</h2><p>安装 typescript</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm i -g typescript</span><br></pre></td></tr></table></figure><p>将 1.ts 文件编译成 js</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc 1.ts</span><br></pre></td></tr></table></figure><h3 id="vscode-配置ts自动编译成js"><a href="#vscode-配置ts自动编译成js" class="headerlink" title="vscode 配置ts自动编译成js"></a>vscode 配置ts自动编译成js</h3><p>文件目录 cmd 运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init</span><br></pre></td></tr></table></figure><p>这一步会生成一个tsconfig.json 文件</p><p>修改 tsconfig.json 的 <code>&quot;outDir&quot;: &quot;./js&quot;,</code>(14行) 此处配置编译后的js 目录</p><p>在vscode 中 点击菜单栏的终端 &gt; 运行任务  &gt; tsc: watch –tscconfig.json</p><h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><p>typescript 常见类型有 number ，string， Boolean，any，number[]（整型数组）</p><p>联合类型 （number | string）等等</p><p>元组类型 ：</p><p>一种特殊的数组类型，可以向数组中存放不同类型的数据</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr:[<span class="built_in">number</span>, <span class="built_in">string</span>] = [<span class="number">123</span>, <span class="string">'123'</span>]</span><br></pre></td></tr></table></figure><p>枚举类型：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Falg &#123;success=<span class="number">1</span>, error=<span class="number">0</span>&#125;</span><br><span class="line"><span class="keyword">let</span> s:Falg = Falg.success</span><br><span class="line"><span class="built_in">console</span>.log(s) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><p>any 类型： 相当于 没有指定类型，什么类型都可以用</p><p>因为ts的基本类型没有Object 类型，所以可以用 可以 用 any 类型替代 Object 类型，比如获取dom 节点的时候</p><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><ul><li>显式声明</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a:<span class="built_in">number</span> = <span class="number">12</span>;</span><br></pre></td></tr></table></figure><p>声明 a 为一个 number 类型</p><ul><li>类型推断</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">12</span>;</span><br></pre></td></tr></table></figure><p>typescript 语法会默认为 a 为一个 number 类型</p><ul><li><p>不定义类型</p><p>方法一：</p></li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a;</span><br><span class="line">a = <span class="number">12</span>;</span><br></pre></td></tr></table></figure><p>​    方法二：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a:<span class="built_in">any</span> = <span class="number">12</span>;</span><br></pre></td></tr></table></figure><p>此时 a 没有类型， 可以给 a 再赋值其他类型的值</p><h2 id="ts中的函数"><a href="#ts中的函数" class="headerlink" title="ts中的函数"></a>ts中的函数</h2><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">a:<span class="built_in">number</span>, b:<span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h3><p>定义返回值类型需要定义在 括号后面</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">a:<span class="built_in">number</span>, b:<span class="built_in">number</span></span>):<span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 没有返回值 </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span> (<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  alert(<span class="string">'aaa'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="可选参数"><a href="#可选参数" class="headerlink" title="可选参数"></a>可选参数</h3><p>在js中，形参和实参个数不需要一致，但ts 必须一致，如果不一致需要在形参中说明</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">name:<span class="built_in">string</span>, age?:<span class="built_in">number</span></span>) </span>&#123; <span class="comment">// 问号代表这个参数可以不传</span></span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>注意：</code> 可选参数必须写在参数位置的最后面</p><h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><p>和 es6 一样，直接在参数后面用 <code>=</code> 给默认参数赋值</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">name:<span class="built_in">string</span>, age:<span class="built_in">number</span> = 20</span>) </span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样在传入的时候只默认参数可以不用传值</p><h3 id="函数的重载"><a href="#函数的重载" class="headerlink" title="函数的重载"></a>函数的重载</h3><p>java 中 重载指的是 两个或两个以上的同名函数 ，他们的参数不一样，这样会出现函数的重载</p><p>typeScript中 的重载是 同一个函数，根据不同的参数类型的定义实现重载</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">name:<span class="built_in">string</span></span>):<span class="title">string</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">age:<span class="built_in">number</span></span>):<span class="title">number</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getInfo</span>(<span class="params">str:<span class="built_in">any</span></span>):<span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="keyword">typeof</span> str === <span class="string">'string'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> str</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> str + <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getInfo(<span class="string">'123'</span>) <span class="comment">// 123</span></span><br><span class="line">getInfo(<span class="number">123</span>)<span class="comment">//123</span></span><br><span class="line">getInfo(ture) <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><h3 id="访问修饰符"><a href="#访问修饰符" class="headerlink" title="访问修饰符"></a>访问修饰符</h3><ul><li>public    公开的，所有都能访问修改</li><li>private      私有的，只有自己类的内部才可以访问</li><li>protected  受保护的，只有自己类和子类才可以访问</li></ul><p><strong>例如：</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">  <span class="keyword">public</span> name:<span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">private</span> age:<span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">protected</span> gender:<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name:<span class="built_in">string</span>, age:<span class="built_in">number</span>, gender:<span class="built_in">string</span> </span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.gender = gender</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">protected</span> show():<span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的名字叫<span class="subst">$&#123;this.name&#125;</span>,年龄为 <span class="subst">$&#123;this.age&#125;</span>`</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Staff <span class="keyword">extends</span> Person &#123;</span><br><span class="line">  <span class="keyword">private</span> job: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name:<span class="built_in">string</span>, age:<span class="built_in">number</span>, gender:<span class="built_in">string</span>, job:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name,age,gender)</span><br><span class="line">    <span class="keyword">this</span>.job = job</span><br><span class="line">  &#125;</span><br><span class="line">  show():<span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.show(); <span class="comment">//调用父类的 show 方法</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的名字叫<span class="subst">$&#123;this.name&#125;</span>`</span>);</span><br><span class="line">    <span class="comment">//console.log(`我的年龄为$&#123;this.age&#125;`); 报错，age是私有属性，不能再子类访问</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的性别为<span class="subst">$&#123;this.gender&#125;</span>`</span>);  <span class="comment">// 可以在子类访问</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的工作为<span class="subst">$&#123;this.job&#125;</span>`</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> staff:Staff = <span class="keyword">new</span> Staff(<span class="string">'zhao'</span>, <span class="number">18</span>, <span class="string">'男'</span>,<span class="string">'打杂的'</span>)</span><br><span class="line"> staff.show()</span><br><span class="line"></span><br><span class="line"> <span class="comment">//外部访问</span></span><br><span class="line"> <span class="built_in">console</span>.log(staff.name);   <span class="comment">// 正常，public 都能访问</span></span><br><span class="line"> <span class="built_in">console</span>.log(staff.age);    <span class="comment">// 报错， private，内部访问</span></span><br><span class="line"> <span class="built_in">console</span>.log(staff.gender); <span class="comment">// 报错，protected，内部和子类访问</span></span><br><span class="line"> <span class="built_in">console</span>.log(staff.job);    <span class="comment">// 报错，private， 内部访问</span></span><br></pre></td></tr></table></figure><p><strong>简写:</strong></p><p>正常声明一个类</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line">  <span class="keyword">public</span> name:<span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">private</span> age:<span class="built_in">number</span>;</span><br><span class="line">  <span class="keyword">protected</span> gender:<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name:<span class="built_in">string</span>, age:<span class="built_in">number</span>, gender:<span class="built_in">string</span> </span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.gender = gender</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">protected</span> show():<span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的名字叫<span class="subst">$&#123;this.name&#125;</span>,年龄为 <span class="subst">$&#123;this.age&#125;</span>`</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>简写</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Person &#123;</span><br><span class="line"> <span class="comment">//省略了</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span>, <span class="keyword">private</span> age:<span class="built_in">number</span>, <span class="keyword">protected</span> gender:<span class="built_in">string</span> </span>) &#123;</span><br><span class="line">    <span class="comment">//也省略了</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">protected</span> show():<span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的名字叫<span class="subst">$&#123;this.name&#125;</span>,年龄为 <span class="subst">$&#123;this.age&#125;</span>`</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="静态属性、静态方法"><a href="#静态属性、静态方法" class="headerlink" title="静态属性、静态方法"></a>静态属性、静态方法</h3><p>用 <code>static</code> 关键字修饰的 属性和方法为静态方法，静态属性和方法不需要实例化对象，直接用 <code>类名.方法名或属性名</code>调用</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Per &#123;</span><br><span class="line">  <span class="comment">// 静态属性</span></span><br><span class="line">  <span class="keyword">static</span> gender: <span class="built_in">string</span> = <span class="string">'男'</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span>, <span class="keyword">public</span> age:<span class="built_in">number</span>, </span>) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 这是一个实例方法</span></span><br><span class="line">  run():<span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;this.name&#125;</span>在运动`</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 这是一个静态方法</span></span><br><span class="line">  <span class="keyword">static</span> print():<span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`print 静态方法`</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> zhao = <span class="keyword">new</span> Per(<span class="string">'zhao'</span>,<span class="number">18</span>)</span><br><span class="line"><span class="comment">// 调用实例方法</span></span><br><span class="line">zhao.run() </span><br><span class="line"><span class="comment">// 调用静态方法</span></span><br><span class="line">Per.print()</span><br><span class="line"><span class="built_in">console</span>.log(Per.gender);</span><br></pre></td></tr></table></figure><h3 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h3><blockquote><p>父类定义一个方法不去实现，让继承它的子类去实现，每一个子类有不同的表现</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Animal &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  eat():<span class="built_in">void</span>&#123; <span class="comment">// 具体吃什么不知道，具体吃什么?继承它的子类去实现，每一个子类的表现不一样</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`吃`</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Dog <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">  eat():<span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`狗吃狗粮`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> cat <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">  eat(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`猫吃猫粮`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cat1 = <span class="keyword">new</span> cat(<span class="string">'miao'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(cat1.eat());</span><br></pre></td></tr></table></figure><h3 id="抽象类和抽象方法"><a href="#抽象类和抽象方法" class="headerlink" title="抽象类和抽象方法"></a>抽象类和抽象方法</h3><blockquote><p>typeScript 中的抽象类，提供其他类的基类，不能直接被实例化</p><p>用 abstract 关键字定义抽象类和抽象方法，抽象类中的抽象方法不包含具体实现并且必须在派生类中实现。</p></blockquote><p>抽象类和抽象方法定义了一套模板，继承于它的子类必须遵循这个模板</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> Animal2 &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 抽象方法只需要定义，不用实现</span></span><br><span class="line">  <span class="keyword">abstract</span> eat():<span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Student <span class="keyword">extends</span> Animal2 &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params">name:<span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 抽象类中的方法必须实现</span></span><br><span class="line">  eat():<span class="built_in">string</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;this.name&#125;</span>吃肉`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> z = <span class="keyword">new</span> Student(<span class="string">'zhao'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(z.eat());</span><br></pre></td></tr></table></figure><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><blockquote><p>接口：可以对属性、函数、索引、类等进行定义和动作规范</p><p>接口需要用 interface 申明</p></blockquote><p><strong>作用：</strong>定义标准</p><h3 id="属性接口"><a href="#属性接口" class="headerlink" title="属性接口"></a>属性接口</h3><p><strong>对传入的json进行约束</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 约束函数接收一个 对象，对象有一个 label为 string 类型的属性</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PrintLabel</span>(<span class="params">labelInfo:&#123;label:<span class="built_in">string</span>&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'zhao'</span>);</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PrintLabel(&#123;label: <span class="string">'zhao'</span>&#125;) <span class="comment">// √</span></span><br><span class="line"></span><br><span class="line">PrintLabel(<span class="string">'zhao'</span>) <span class="comment">// ×</span></span><br><span class="line">PrintLabel(&#123;name: <span class="string">'zhao'</span>&#125;) <span class="comment">//×</span></span><br></pre></td></tr></table></figure><p><strong>定义接口，对所有方法进行约束</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个接口</span></span><br><span class="line"><span class="keyword">interface</span> fullName &#123;</span><br><span class="line">   firstName:<span class="built_in">string</span> <span class="comment">// 这里的对象不用 逗号 要么用分号，要么不用符号</span></span><br><span class="line">   secondName:<span class="built_in">string</span></span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params">name:fullName</span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(name.firstName,name.secondName);</span><br><span class="line">   </span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果在调用的时候直接传入对象，则只能传入接口规定的属性</span></span><br><span class="line">printName(&#123;firstName:<span class="string">'zhang'</span>, secondName: <span class="string">'zhao'</span>&#125;) <span class="comment">// √</span></span><br><span class="line">printName(&#123; firstName: <span class="string">'zhang'</span>, secondName: <span class="string">'zhao'</span>, age: <span class="number">18</span> &#125;) <span class="comment">// ×</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果对象中需要传入其他属性，则需要将对象抽离出来</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  firstName: <span class="string">'zhang'</span>,</span><br><span class="line">  secondName: <span class="string">'zhao'</span>,</span><br><span class="line">  age: <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printName(obj) <span class="comment">// √</span></span><br></pre></td></tr></table></figure><p><strong>可选参数接口</strong></p><p>接口中的属性可以不用传入</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> fullName &#123;</span><br><span class="line">  firstName: <span class="built_in">string</span></span><br><span class="line">  secondName?: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>类似于函数的可选参数，直接在属性名后面加上一个 <code>问号</code>表示这个非必须</p><h3 id="函数接口"><a href="#函数接口" class="headerlink" title="函数接口"></a>函数接口</h3><p>对方法传入的参数以及返回值进行约束</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  函数类型的接口</span></span><br><span class="line"><span class="keyword">interface</span> encrypt&#123;</span><br><span class="line">  (param1:<span class="built_in">number</span>, param2:<span class="built_in">number</span>):<span class="built_in">number</span> <span class="comment">// 约定函数必须传入两个 number 类型的参数 并且返回一个number类型</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用接口定义函数</span></span><br><span class="line"><span class="keyword">let</span> enc:encrypt=<span class="function"><span class="keyword">function</span>(<span class="params">param1: <span class="built_in">number</span>, param2: <span class="built_in">number</span></span>):<span class="title">number</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> param1 + param2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">enc(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h3 id="类-类型接口"><a href="#类-类型接口" class="headerlink" title="类 类型接口"></a>类 类型接口</h3><p>对类的约束，类似于抽象类</p><p>用 implement 对 类接口的实现</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Animal &#123;</span><br><span class="line">  name:<span class="built_in">string</span></span><br><span class="line">  eat(str:<span class="built_in">string</span>):<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Dog5 <span class="keyword">implements</span> Animal &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line">  eat() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;this.name&#125;</span> 吃`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> d = <span class="keyword">new</span> Dog5(<span class="string">'zhao'</span>)</span><br><span class="line">d.eat()</span><br></pre></td></tr></table></figure><h3 id="接口扩展"><a href="#接口扩展" class="headerlink" title="接口扩展"></a>接口扩展</h3><p>接口可以继承接口</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Animal &#123;</span><br><span class="line">  eat():<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> P <span class="keyword">extends</span> Animal &#123;</span><br><span class="line">  work():<span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Wor <span class="keyword">implements</span> P&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> name:<span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line">  eat(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'吃'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  work(): <span class="built_in">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'搬砖'</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><blockquote><p>泛型就是解决 类、接口、方法的复用，以及对不特定数据类型的支持</p></blockquote><p><strong>泛型函数</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &lt;T&gt; 代表泛型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getName</span>&lt;<span class="title">T</span>&gt;(<span class="params">value:T</span>):<span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 使用泛型函数时候在 &lt;&gt; 中填入什么类型， T 就是什么类型</span></span><br><span class="line">getName&lt;<span class="built_in">string</span>&gt;(<span class="string">'zhao'</span>)</span><br></pre></td></tr></table></figure><p><strong>泛型类</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> Minclass&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">public</span> list:T[] = []</span>) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  add(value:T):<span class="built_in">void</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.list.push(value)</span><br><span class="line">  &#125;</span><br><span class="line">  min():T &#123;</span><br><span class="line">    <span class="keyword">let</span> minNum = <span class="keyword">this</span>.list[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.list.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (minNum &gt; <span class="keyword">this</span>.list[i]) &#123;</span><br><span class="line">        minNum = <span class="keyword">this</span>.list[i]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minNum</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> m1 = <span class="keyword">new</span> Minclass&lt;<span class="built_in">number</span>&gt;()</span><br><span class="line">m1.add(<span class="number">1</span>)</span><br><span class="line">m1.add(<span class="number">11</span>)</span><br><span class="line">m1.add(<span class="number">21</span>)</span><br><span class="line">m1.add(<span class="number">31</span>)</span><br><span class="line">m1.add(<span class="number">41</span>)</span><br><span class="line"><span class="built_in">console</span>.log(m1.list); <span class="comment">// [ 1, 11, 21, 31, 41 ]</span></span><br><span class="line"><span class="built_in">console</span>.log(m1.min()); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure><h2 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h2><blockquote><p>装饰器就是一种特殊的类型声明，它能够附加到类的声明、方法</p><p>属性或者参数上，可以修改行为</p><p>通俗来说，<code>装饰器就是一个方法，可以注入到类，方法，属性参数上来对他们进行扩展</code></p></blockquote><p>装饰器还只是一种ts实验，使用的时候需要在 tsconfig.js 中配置</p><p>“experimentalDecorators”: true, (59行)</p><h3 id="类装饰器"><a href="#类装饰器" class="headerlink" title="类装饰器"></a>类装饰器</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类装饰器  ---装饰器就是一个方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logClass</span>(<span class="params">params:<span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(params); <span class="comment">// 当前类，就是使用他的类</span></span><br><span class="line">  params.prototype.apiUrl = <span class="string">'动态添加的类'</span></span><br><span class="line">  params.prototype.run = <span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'这是一个run方法'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@logClass</span></span><br><span class="line"><span class="keyword">class</span> Use&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">  getData()&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> u:<span class="built_in">any</span> = <span class="keyword">new</span> Use()</span><br><span class="line">u.run() <span class="comment">// 此方法由装饰器注入，可以直接调用</span></span><br></pre></td></tr></table></figure><p><strong>装饰器工厂</strong>（可以向装饰器中出传递参数）</p><ol><li>装饰器中的参数是 传入的参数</li><li>返回的函数中的参数是 使用的类</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logClass</span>(<span class="params">params:<span class="built_in">string</span></span>) </span>&#123;  <span class="comment">// 装饰器中的参数是 传入的参数）</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>  (<span class="params">fn:<span class="built_in">any</span></span>) </span>&#123;  <span class="comment">// 返回的函数中的参数是 使用的类</span></span><br><span class="line">    <span class="built_in">console</span>.log(params); <span class="comment">//  http://www.zhangzhaozhao.work</span></span><br><span class="line">    <span class="built_in">console</span>.log(fn); <span class="comment">// [Function: PrintUrl]</span></span><br><span class="line"></span><br><span class="line">    fn.prototype.url = params</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@logClass</span>(<span class="string">'http://www.zhangzhaozhao.work'</span>)</span><br><span class="line"><span class="keyword">class</span> PrintUrl &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123;  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> u:<span class="built_in">any</span> = <span class="keyword">new</span> PrintUrl()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(u.url); <span class="comment">// http://www.zhangzhaozhao.work</span></span><br></pre></td></tr></table></figure><p><strong>用装饰器重载类的构造器和方法</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 装饰器修改类的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logClass</span> (<span class="params">params:<span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(params)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">class</span> <span class="keyword">extends</span> params&#123; <span class="comment">// 重新类里面的方法</span></span><br><span class="line">    apiUrl:<span class="built_in">string</span> = <span class="string">'这是修改后的apiUrl'</span></span><br><span class="line">    getData() &#123;</span><br><span class="line">      <span class="keyword">this</span>.apiUrl = <span class="keyword">this</span>.apiUrl + <span class="string">'---'</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.apiUrl);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@logClass</span></span><br><span class="line"><span class="keyword">class</span> PrintUrl&#123;</span><br><span class="line">  <span class="keyword">public</span> apiUrl:<span class="built_in">string</span> | <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.apiUrl = <span class="string">'这是构造函数里面的apiUrl'</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  getData () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.apiUrl)</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> pp:<span class="built_in">any</span> = <span class="keyword">new</span> PrintUrl()</span><br><span class="line">pp.getData()</span><br></pre></td></tr></table></figure><h3 id="属性装饰器"><a href="#属性装饰器" class="headerlink" title="属性装饰器"></a>属性装饰器</h3><blockquote><p>属性装饰器表达式在运行时当作函数调用，传入两个参数</p><ol><li>对静态成员来说是类的构造函数，对实例成员来说是类的原型对象</li><li>属性的名字</li></ol></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 类装饰器</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logClass</span>(<span class="params">params:<span class="built_in">string</span></span>):<span class="title">any</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">fn:<span class="built_in">any</span></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  属性装饰器</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logProperty</span> (<span class="params">params:<span class="built_in">any</span></span>):<span class="title">any</span> </span>&#123; <span class="comment">// params 为传入的参数</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">fn:<span class="built_in">any</span>, attr:<span class="built_in">any</span></span>) </span>&#123;  </span><br><span class="line">    <span class="built_in">console</span>.log(fn) <span class="comment">// printUrl 类 </span></span><br><span class="line">    <span class="built_in">console</span>.log(attr) <span class="comment">// url （属性名）</span></span><br><span class="line">    fn[attr] = params</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 类的装饰器</span></span><br><span class="line"><span class="meta">@logClass</span>(<span class="string">'xxx'</span>)</span><br><span class="line"><span class="keyword">class</span> printUrl &#123;</span><br><span class="line">  <span class="comment">// 属性的装饰器</span></span><br><span class="line">  <span class="meta">@logProperty</span>(<span class="string">'hello-zhao'</span>)</span><br><span class="line">  <span class="keyword">public</span> url:<span class="built_in">any</span> | <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">constructor</span> (<span class="params"></span>) &#123;&#125;</span><br><span class="line">  getData () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.url);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> c = <span class="keyword">new</span> printUrl()</span><br><span class="line">c.getData()</span><br></pre></td></tr></table></figure><h3 id="方法装饰器"><a href="#方法装饰器" class="headerlink" title="方法装饰器"></a>方法装饰器</h3><blockquote><p>他会被用到方法的属性描述上，可以用来监视，修改或替换方法定义</p></blockquote><p>方法装饰器接收三个参数</p><ol><li>对静态成员来说是类的构造函数，对实例成员来说是类的原型对象</li><li>方法名</li><li>当前方法的描述的描述</li></ol><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方法装饰器</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span> (<span class="params">params:<span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>  (<span class="params">target:<span class="built_in">any</span>, methodName:<span class="built_in">any</span>, desc:<span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(target);  <span class="comment">// printUrl &#123; getData: [Function] &#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(methodName); <span class="comment">// getData</span></span><br><span class="line">    <span class="built_in">console</span>.log(desc);</span><br><span class="line">    target.apiUrl = <span class="string">'http://'</span></span><br><span class="line">    target.run = <span class="function"><span class="keyword">function</span>  (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'it\'s a function run'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> printUrl &#123;</span><br><span class="line">  <span class="keyword">public</span> url:<span class="built_in">string</span> | <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">constructor</span> (<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用方法装饰器</span></span><br><span class="line">  <span class="meta">@get</span>(<span class="string">'zhao'</span>)</span><br><span class="line">  getData () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.url);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pu:<span class="built_in">any</span> = <span class="keyword">new</span> printUrl()</span><br><span class="line">pu.run() <span class="comment">// it's a function run</span></span><br><span class="line"><span class="built_in">console</span>.log(pu.apiUrl); <span class="comment">// http://</span></span><br></pre></td></tr></table></figure><p><strong>方法装饰器修改原来方法</strong></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params">params: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target: <span class="built_in">any</span>, methodName: <span class="built_in">any</span>, desc: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> oMethod = desc.value <span class="comment">// 这个就是装饰器装饰的方法</span></span><br><span class="line">  <span class="comment">//  替换这个方法</span></span><br><span class="line">    desc.value = <span class="function"><span class="keyword">function</span> (<span class="params">...args:<span class="built_in">any</span>[]</span>) </span>&#123;</span><br><span class="line">      args = args.map(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">String</span>(value)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(args);</span><br><span class="line">      <span class="comment">// this 指的是 desc.value 也就是 getData方法</span></span><br><span class="line">      oMethod.apply (<span class="keyword">this</span>,args)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> printUrl &#123;</span><br><span class="line">  <span class="keyword">public</span> url: <span class="built_in">string</span> | <span class="literal">undefined</span></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@get</span>(<span class="string">'zhao'</span>)</span><br><span class="line">  getData(...args:<span class="built_in">any</span>[]) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(args);  <span class="comment">// 此时这里打印的就是 string类型的数组</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'原来的方法'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> pu: <span class="built_in">any</span> = <span class="keyword">new</span> printUrl()</span><br><span class="line">pu.getData(<span class="number">123</span>, <span class="string">'sss'</span>)</span><br></pre></td></tr></table></figure><h3 id="装饰器的执行顺序"><a href="#装饰器的执行顺序" class="headerlink" title="装饰器的执行顺序"></a>装饰器的执行顺序</h3><p>属性 &gt;  方法&gt; 类</p><p>如果由多个同类型的装饰器则 由下到上，有后往前 执行</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;typescript&quot;&gt;&lt;a href=&quot;#typescript&quot; class=&quot;headerlink&quot; title=&quot;typescript&quot;&gt;&lt;/a&gt;typescript&lt;/h1&gt;&lt;h2 id=&quot;上车&quot;&gt;&lt;a href=&quot;#上车&quot; class=&quot;headerli
      
    
    </summary>
    
      <category term="前端" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="typtScript" scheme="https://zhaozhoa.github.com/tags/typtScript/"/>
    
  </entry>
  
  <entry>
    <title>排序和搜索</title>
    <link href="https://zhaozhoa.github.com/2019/07/06/%E6%8E%92%E5%BA%8F%E5%92%8C%E6%90%9C%E7%B4%A2/"/>
    <id>https://zhaozhoa.github.com/2019/07/06/排序和搜索/</id>
    <published>2019-07-06T10:05:11.000Z</published>
    <updated>2019-08-23T06:06:13.592Z</updated>
    
    <content type="html"><![CDATA[<h1 id="排序与查找"><a href="#排序与查找" class="headerlink" title="排序与查找"></a>排序与查找</h1><h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><blockquote><p>冒泡排序比较所有相邻的两个项，如果第一个比第二个大，则交换它们。元素项向上移动至正确的顺序，就好像气泡升至表面一样，冒泡排序因此得名</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;排序与查找&quot;&gt;&lt;a href=&quot;#排序与查找&quot; class=&quot;headerlink&quot; title=&quot;排序与查找&quot;&gt;&lt;/a&gt;排序与查找&lt;/h1&gt;&lt;h2 id=&quot;排序&quot;&gt;&lt;a href=&quot;#排序&quot; class=&quot;headerlink&quot; title=&quot;排序&quot;&gt;&lt;/a&gt;排
      
    
    </summary>
    
      <category term="数据结构与算法" scheme="https://zhaozhoa.github.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="排序" scheme="https://zhaozhoa.github.com/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>字典和散列</title>
    <link href="https://zhaozhoa.github.com/2019/07/01/%E5%AD%97%E5%85%B8%E5%92%8C%E6%95%A3%E5%88%97/"/>
    <id>https://zhaozhoa.github.com/2019/07/01/字典和散列/</id>
    <published>2019-07-01T02:43:11.000Z</published>
    <updated>2019-08-23T06:09:05.147Z</updated>
    
    <content type="html"><![CDATA[<h1 id="字典和散列"><a href="#字典和散列" class="headerlink" title="字典和散列"></a>字典和散列</h1><h2 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h2><blockquote><p>在字典中，存储的是[键，值]对，其中键名是用来查询特定元素的。字典和集合很相似，集合以[值，值]的形式存储元素，字 典则是以[键，值]的形式来存储元素。字典也称作映射、符号表或关联数组</p></blockquote><h3 id="创建字典"><a href="#创建字典" class="headerlink" title="创建字典"></a>创建字典</h3><p><strong>我们将 key 转化为了字符串，而为了保存信息的需要，我们同<br>样要保存原始的 key。</strong></p><p>创建一个将key转换成字符串的函数  difaultToString.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">difaultToString</span>(<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (item == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'NULL'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item == <span class="literal">undefined</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'UNDEFINED'</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> item === <span class="string">'string'</span> || item <span class="keyword">instanceof</span> <span class="built_in">String</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;item&#125;</span>`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> item.toString()</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = difaultToString</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> defaultToString = <span class="built_in">require</span>(<span class="string">'./../util/defaultToString'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存原始的 key：valu</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValuePair</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(key, value) &#123;</span><br><span class="line">    <span class="keyword">this</span>.key = key</span><br><span class="line">    <span class="keyword">this</span>.value = value</span><br><span class="line">  &#125;</span><br><span class="line">  toString () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`[#<span class="subst">$&#123;<span class="keyword">this</span>.key&#125;</span>: <span class="subst">$&#123;<span class="keyword">this</span>.valve&#125;</span>]`</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dictionary</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (toStrfn = defaultToString) &#123;</span><br><span class="line">    <span class="keyword">this</span>.toStrfn = toStrfn</span><br><span class="line">    <span class="keyword">this</span>.table = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 检测一个键是否存在于字典中</span></span><br><span class="line">  hasKey (key) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.table[<span class="keyword">this</span>.toStrfn(key)] != <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 向字典中添加新元素。如果 key 已经存在，那么已存在的 value 会 被新的值覆盖</span></span><br><span class="line">  <span class="keyword">set</span> (key, value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key != <span class="literal">null</span> &amp;&amp; value != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> tableKey = <span class="keyword">this</span>.toStrfn(key)</span><br><span class="line">      <span class="keyword">this</span>.table[tableKey] = <span class="keyword">new</span> ValuePair(key, value)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 从字典中移除一个值</span></span><br><span class="line">  remove (key) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.hasKey(key)) &#123;</span><br><span class="line">      <span class="keyword">delete</span> <span class="keyword">this</span>.table[<span class="keyword">this</span>.toStrfn(key)]</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 从字典中检索一个值</span></span><br><span class="line">  <span class="keyword">get</span> (key) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.table[<span class="keyword">this</span>.toStrfn(key)] == <span class="literal">null</span> ? <span class="literal">undefined</span> : <span class="keyword">this</span>.table[<span class="keyword">this</span>.toStrfn(key)].value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 将字典中所有[键，值]对返回</span></span><br><span class="line">  keyValues() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.values(<span class="keyword">this</span>.table)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 将字典所包含的所有键名以数组形式返回</span></span><br><span class="line">  keys () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.keyValues().map(<span class="function"><span class="params">valuepair</span> =&gt;</span> valuepair.key)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将字典所包含的所有值以数组形式返回</span></span><br><span class="line">  values () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.keyValues().map(<span class="function"><span class="params">valuepair</span> =&gt;</span> valuepair.value)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 用 forEach 迭代字典中的每个键值对</span></span><br><span class="line">  forEach (callback) &#123;</span><br><span class="line">    <span class="keyword">const</span> valuepair = <span class="keyword">this</span>.keyValues()</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; valuepair.length; i++) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = callback(valuepair[i].key, valuepair[i].value)</span><br><span class="line">      <span class="keyword">if</span> (result === <span class="literal">false</span>) &#123;</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  size () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.table).length</span><br><span class="line">  &#125;</span><br><span class="line">  isEmpty () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.size() === <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  clear () &#123;</span><br><span class="line">    <span class="keyword">this</span>.table = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="散列"><a href="#散列" class="headerlink" title="散列"></a>散列</h2><blockquote><p>散列算法的作用是尽可能快地在数据结构中找到一个值。在之前的章节中，你已经知道如果要在数据结构中获得一个值（使用 get 方法），需要迭代整个数据结构来找到它。如果使用散列 函数，就知道值的具体位置，因此能够快速检索到该值。散列函数的作用是给定一个键值，然后 返回值在表中的地址</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;字典和散列&quot;&gt;&lt;a href=&quot;#字典和散列&quot; class=&quot;headerlink&quot; title=&quot;字典和散列&quot;&gt;&lt;/a&gt;字典和散列&lt;/h1&gt;&lt;h2 id=&quot;字典&quot;&gt;&lt;a href=&quot;#字典&quot; class=&quot;headerlink&quot; title=&quot;字典&quot;&gt;&lt;/a&gt;字
      
    
    </summary>
    
      <category term="数据结构与算法" scheme="https://zhaozhoa.github.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="字典和散列" scheme="https://zhaozhoa.github.com/tags/%E5%AD%97%E5%85%B8%E5%92%8C%E6%95%A3%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>集合</title>
    <link href="https://zhaozhoa.github.com/2019/06/30/%E9%9B%86%E5%90%88/"/>
    <id>https://zhaozhoa.github.com/2019/06/30/集合/</id>
    <published>2019-06-30T02:06:38.000Z</published>
    <updated>2019-08-23T06:02:15.264Z</updated>
    
    <content type="html"><![CDATA[<h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><blockquote><p>集合是由一组无序且唯一（即不能重复）的项组成的。该数据结构使用了与有限集合相同的数学概念，但应用在计算机科学的数据结构中</p></blockquote><h2 id="自己创建一个集合（Set"><a href="#自己创建一个集合（Set" class="headerlink" title="自己创建一个集合（Set)"></a>自己创建一个集合（Set)</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建一个集合</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Set</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查元素是否存在在集合中</span></span><br><span class="line">  has (ele) &#123;</span><br><span class="line">    <span class="comment">// return ele in this.items</span></span><br><span class="line">    <span class="comment">// 或者</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.hasOwnProperty.call(<span class="keyword">this</span>.items, ele)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 给集合里面添加元素</span></span><br><span class="line">  add (ele) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">this</span>.has(ele)) &#123;</span><br><span class="line">      <span class="keyword">this</span>.items[ele] = ele</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 删除集合元素</span></span><br><span class="line">  <span class="keyword">delete</span> (ele) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.has(ele)) &#123;</span><br><span class="line">      <span class="keyword">delete</span> <span class="keyword">this</span>.items[ele]</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 清空集合</span></span><br><span class="line">  clear () &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 获取集合的长度</span></span><br><span class="line">  size () &#123;</span><br><span class="line">    <span class="comment">// es6 方法，将对象中的键转换成数组，再获取长度</span></span><br><span class="line">    <span class="comment">// return Object.keys(this.items).length</span></span><br><span class="line">    <span class="comment">// es5 方法</span></span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> <span class="keyword">this</span>.items) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.items.hasOwnProperty(key)) &#123;</span><br><span class="line">        count++</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 将集合里面的值转换成数组</span></span><br><span class="line">  values () &#123;</span><br><span class="line">    <span class="comment">// es6 方法</span></span><br><span class="line">    <span class="comment">// return Object.values(this.items)</span></span><br><span class="line">    <span class="comment">// es5 方法</span></span><br><span class="line">    <span class="keyword">let</span> values = []</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> <span class="keyword">this</span>.items) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.items.hasOwnProperty(key)) &#123;</span><br><span class="line">        values.push(<span class="keyword">this</span>.items[key])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> values</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="built_in">Set</span></span><br></pre></td></tr></table></figure><h2 id="集合运算"><a href="#集合运算" class="headerlink" title="集合运算"></a>集合运算</h2><p><strong>直接用 es6 api 实现</strong></p><h3 id="并集"><a href="#并集" class="headerlink" title="并集"></a>并集</h3><blockquote><p>对于给定的两个集合，返回一个包含两个集合中所有元素的新集合。</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 求两个集合的并集</span></span><br><span class="line"><span class="comment"> * @param &#123;Set&#125; set1 集合1</span></span><br><span class="line"><span class="comment"> * @param &#123;Set&#125; set2 集合2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> union = <span class="function">(<span class="params">set1, set2</span>) =&gt;</span>  <span class="keyword">new</span> <span class="built_in">Set</span>([...set1, ...set2])</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(union(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>]), <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">9</span>])));</span><br><span class="line"><span class="comment">// Set &#123; 1, 3, 2, 5, 8, 9 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="交集"><a href="#交集" class="headerlink" title="交集"></a>交集</h3><blockquote><p>对于给定的两个集合，返回一个包含两个集合中共有元素的新集合</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 求两个集合的交集</span></span><br><span class="line"><span class="comment"> * @param &#123;Set&#125; set1 集合1</span></span><br><span class="line"><span class="comment"> * @param &#123;Set&#125; set2 集合2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> intersection = <span class="function">(<span class="params">set1, set2</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Set</span>(<span class="built_in">Array</span>.from(set1).filter(<span class="function"><span class="params">ele</span> =&gt;</span> set2.has(ele)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(intersection(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>]), <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">9</span>])));</span><br></pre></td></tr></table></figure><h3 id="差集"><a href="#差集" class="headerlink" title="差集"></a>差集</h3><blockquote><p>对于给定的两个集合，返回一个包含所有存在于第一个集合且不存在于第二个集 合的元素的新集合</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 求 集合1 与 集合2 差集</span></span><br><span class="line"><span class="comment"> * @param &#123;Set&#125; set1 集合1</span></span><br><span class="line"><span class="comment"> * @param &#123;Set&#125; set2 集合2</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">let</span> difference = <span class="function">(<span class="params">set1, set2</span>) =&gt;</span> <span class="keyword">new</span> <span class="built_in">Set</span>(<span class="built_in">Array</span>.from(set1).filter(<span class="function"><span class="params">ele</span> =&gt;</span> !set2.has(ele)))</span><br><span class="line"><span class="built_in">console</span>.log(difference(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">5</span>]), <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">9</span>])));</span><br><span class="line"><span class="comment">// Set &#123; 3, 5 &#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;集合&quot;&gt;&lt;a href=&quot;#集合&quot; class=&quot;headerlink&quot; title=&quot;集合&quot;&gt;&lt;/a&gt;集合&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;集合是由一组无序且唯一（即不能重复）的项组成的。该数据结构使用了与有限集合相同的数学概念，但应用在计算机科学的数据
      
    
    </summary>
    
      <category term="数据结构与算法" scheme="https://zhaozhoa.github.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="集合" scheme="https://zhaozhoa.github.com/tags/%E9%9B%86%E5%90%88/"/>
    
  </entry>
  
  <entry>
    <title>链表</title>
    <link href="https://zhaozhoa.github.com/2019/06/28/%E9%93%BE%E8%A1%A8/"/>
    <id>https://zhaozhoa.github.com/2019/06/28/链表/</id>
    <published>2019-06-28T07:26:41.000Z</published>
    <updated>2019-08-23T06:03:14.400Z</updated>
    
    <content type="html"><![CDATA[<h1 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h1><blockquote><p>链表存储有序的元素集合，但不同于数组，链表中的元素在内存中并不是连续放置的。每个<br>元素由一个存储元素本身的节点和一个指向下一个元素的引用</p></blockquote><h2 id="初始化链表"><a href="#初始化链表" class="headerlink" title="初始化链表"></a>初始化链表</h2><p><strong>链表的节点类</strong>  Node.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 节点类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (element) &#123;</span><br><span class="line">    <span class="keyword">this</span>.element = element</span><br><span class="line">    <span class="keyword">this</span>.next = <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = Node</span><br></pre></td></tr></table></figure><ul><li>this.next 存储下一个节点对象</li><li>所以在js中，链表的存储结构为 <code>当前节点对象里面嵌套下一个节点对象</code></li><li>最后一个节点的 this.next 为undefined</li></ul><p><strong>初始化链表及常用方法</strong></p><p>initLinikList.js文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Node = <span class="built_in">require</span>(<span class="string">'./Node'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LinkList</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="comment">// 存储元素的数量</span></span><br><span class="line">    <span class="keyword">this</span>.count = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 存储整个</span></span><br><span class="line">    <span class="keyword">this</span>.head = <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 向链表尾部添加元素</span></span><br><span class="line">  push (ele) &#123;</span><br><span class="line">    <span class="keyword">let</span> node = <span class="keyword">new</span> Node(ele)</span><br><span class="line">    <span class="keyword">let</span> current</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.head == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>.head = node</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// current 的赋值为 第一个节点</span></span><br><span class="line">      current = <span class="keyword">this</span>.head</span><br><span class="line">      <span class="comment">// current 从第一个节点移动到最后一个节点</span></span><br><span class="line">      <span class="keyword">while</span> (current.next != <span class="literal">null</span>) &#123;</span><br><span class="line">        current = current.next</span><br><span class="line">      &#125;</span><br><span class="line">      current.next = node</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.count++</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 返回一个元素的位置</span></span><br><span class="line">  indexOf(ele) &#123;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="keyword">this</span>.head</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.count; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (current.element === ele) &#123;</span><br><span class="line">        <span class="keyword">return</span> i</span><br><span class="line">      &#125;</span><br><span class="line">      current = current.next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 获取链表节点方法</span></span><br><span class="line">  getElementAt (index) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt;= <span class="keyword">this</span>.count) &#123;</span><br><span class="line">      <span class="keyword">let</span> node = <span class="keyword">this</span>.head</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; index &amp;&amp; node != <span class="literal">null</span>; i++) &#123;</span><br><span class="line">        node = node.next</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> node</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 从链表中移除指定位置元素</span></span><br><span class="line">  removeAt (index) &#123;</span><br><span class="line">    <span class="comment">// 判断索引边界</span></span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt; <span class="keyword">this</span>.count) &#123;</span><br><span class="line">      <span class="keyword">let</span> current = <span class="keyword">this</span>.head</span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.head = current.next</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> previous = <span class="keyword">this</span>.getElementAt(index - <span class="number">1</span>)</span><br><span class="line">        current = previous.next</span><br><span class="line">        previous.next = current.next</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.count--</span><br><span class="line">      <span class="keyword">return</span> current.element</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 从链表中移除元素</span></span><br><span class="line">  remove (ele) &#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="keyword">this</span>.indexOf(ele)</span><br><span class="line">    <span class="keyword">if</span> (index === <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'input Error'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.removeAt(index)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 任意位置插入元素</span></span><br><span class="line">  insert (ele, index) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt;= <span class="keyword">this</span>.count) &#123;</span><br><span class="line">      <span class="keyword">let</span> node = <span class="keyword">new</span> Node(ele)</span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">        node.next = <span class="keyword">this</span>.head</span><br><span class="line">        <span class="keyword">this</span>.head = node</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> previous = <span class="keyword">this</span>.getElementAt(index - <span class="number">1</span>)</span><br><span class="line">        node.next = previous.next</span><br><span class="line">        previous.next = node</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.count++</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  size () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.count</span><br><span class="line">  &#125;</span><br><span class="line">  inEmpty () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.size() === <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  toString() &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.head == <span class="literal">null</span>) &#123; </span><br><span class="line">      <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> objString = <span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.head.element&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">let</span> current = <span class="keyword">this</span>.head.next; </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; <span class="keyword">this</span>.size() &amp;&amp; current != <span class="literal">null</span>; i++) &#123; </span><br><span class="line">      objString = <span class="string">`<span class="subst">$&#123;objString&#125;</span>,<span class="subst">$&#123;current.element&#125;</span>`</span>; </span><br><span class="line">      current = current.next;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> objString; </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = LinkList</span><br></pre></td></tr></table></figure><h2 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h2><blockquote><p>双向链表和普通链表的区别在于，在链表中，<br>一个节点只有链向下一个节点的链接；而在双向链表中，链接是双向的：一个链向下一个元素， 另一个链向前一个元素</p></blockquote><p><strong>实现</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 双链表的实现</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> Node = <span class="built_in">require</span>(<span class="string">'./Node'</span>)</span><br><span class="line"><span class="keyword">let</span> LinkList = <span class="built_in">require</span>(<span class="string">'./initLInkList'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 双链表节点类，继承于普通链表节点类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoublyNode</span>  <span class="keyword">extends</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> (element, next, prev) &#123;</span><br><span class="line">    <span class="keyword">super</span>(element, next)</span><br><span class="line">    <span class="keyword">this</span>.prev = prev</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 双链表，继承于普通链表</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoublyLinkList</span> <span class="keyword">extends</span> <span class="title">LinkList</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span>()</span><br><span class="line">    <span class="comment">// 用来存储最后一个节点对象</span></span><br><span class="line">    <span class="keyword">this</span>.tail = <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">  insert (ele, index) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt;=<span class="keyword">this</span>.count) &#123;</span><br><span class="line">      <span class="keyword">const</span> node = <span class="keyword">new</span> DoublyNode(ele)</span><br><span class="line">      <span class="keyword">let</span> current = <span class="keyword">this</span>.head</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// 链表为空</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.head  == <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.head = node</span><br><span class="line">          <span class="keyword">this</span>.tail = node</span><br><span class="line">          </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          node.next = <span class="keyword">this</span>.head</span><br><span class="line">          current.prev = node</span><br><span class="line">          <span class="keyword">this</span>.head = node</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="comment">// 给链表末尾添加节点</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index === <span class="keyword">this</span>.count) &#123;</span><br><span class="line">        current = <span class="keyword">this</span>.tail</span><br><span class="line">        current.next = node</span><br><span class="line">        node.prev = current</span><br><span class="line">        <span class="keyword">this</span>.tail = node</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> previous = <span class="keyword">this</span>.getElementAt(index - <span class="number">1</span>)</span><br><span class="line">        current = previous.next</span><br><span class="line">        node.next = current</span><br><span class="line">        previous.next = node</span><br><span class="line">        current.prev = node</span><br><span class="line">        node.prev = previous</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.count++</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 从任意位置移除元素</span></span><br><span class="line">  removeAt (index) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt; <span class="keyword">this</span>.count) &#123;</span><br><span class="line">      <span class="keyword">let</span> current = <span class="keyword">this</span>.head</span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.head = current.next</span><br><span class="line">        <span class="comment">// 如果只有一项，更新tail</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.count === <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.tail = <span class="literal">undefined</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.head.prev = <span class="literal">undefined</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 移除最后一个节点</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (index === <span class="keyword">this</span>.count <span class="number">-1</span>) &#123;</span><br><span class="line">        current = <span class="keyword">this</span>.tail</span><br><span class="line">        <span class="keyword">this</span>.tail = current.prev</span><br><span class="line">        current.prev.next = <span class="literal">undefined</span></span><br><span class="line">        <span class="comment">// 移除中间节点</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        current = <span class="keyword">this</span>.getElementAt(index)</span><br><span class="line">        current.prev.next = current.next</span><br><span class="line">        current.next.prev = current.prev</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.count--</span><br><span class="line">      <span class="keyword">return</span> current.element</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> testLinkList = <span class="keyword">new</span> DoublyLinkList()</span><br><span class="line">testLinkList.insert(<span class="number">5</span>, <span class="number">0</span>)</span><br><span class="line">testLinkList.insert(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">testLinkList.insert(<span class="number">8</span>, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(testLinkList.removeAt(<span class="number">2</span>));</span><br></pre></td></tr></table></figure><h2 id="循环链表"><a href="#循环链表" class="headerlink" title="循环链表"></a>循环链表</h2><blockquote><p>循环链表和链表之间唯一的区别在于，最后一个元素指向下一个元素的指针（tail.next）不是引用 undefined，而是指向第一个元素（head）</p></blockquote><p><strong>循环链表的实现</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 循环链表的实现</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> Node = <span class="built_in">require</span>(<span class="string">'./Node'</span>)</span><br><span class="line"><span class="keyword">let</span> LinkList = <span class="built_in">require</span>(<span class="string">'./initLInkList'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CircularLinkLidst</span> <span class="keyword">extends</span> <span class="title">LinkList</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">super</span> ()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  insert (ele, index) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt;= <span class="keyword">this</span>.count) &#123;</span><br><span class="line">      <span class="keyword">const</span> node = <span class="keyword">new</span> Node(ele)</span><br><span class="line">      <span class="keyword">let</span> current = <span class="keyword">this</span>.head</span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.head == <span class="literal">null</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.head = node</span><br><span class="line">          <span class="comment">// 最后一个节点的next 指向头节点</span></span><br><span class="line">          node.next = <span class="keyword">this</span>.head</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          node.next = current</span><br><span class="line">          <span class="comment">// 获取最后一个节点</span></span><br><span class="line">          current = <span class="keyword">this</span>.getElementAt(<span class="keyword">this</span>.size())</span><br><span class="line">          <span class="keyword">this</span>.head = node</span><br><span class="line">          current.next = <span class="keyword">this</span>.head</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> previous = <span class="keyword">this</span>.getElementAt(index - <span class="number">1</span>)</span><br><span class="line">        node.next = previous.next</span><br><span class="line">        previous.next = node</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.count++</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  removeAt(index) &#123;</span><br><span class="line">    <span class="keyword">if</span> (index &gt;= <span class="number">0</span> &amp;&amp; index &lt; <span class="keyword">this</span>.count) &#123;</span><br><span class="line">      <span class="keyword">let</span> current = <span class="keyword">this</span>.head</span><br><span class="line">      <span class="keyword">if</span> (index === <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.size() === <span class="number">1</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.head = <span class="literal">undefined</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> removed = <span class="keyword">this</span>.head</span><br><span class="line">          current = <span class="keyword">this</span>.getElementAt(<span class="keyword">this</span>.size())</span><br><span class="line">          <span class="keyword">this</span>.head = <span class="keyword">this</span>.head.next</span><br><span class="line">          current.next = <span class="keyword">this</span>.head</span><br><span class="line">          current = removed</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> previous = <span class="keyword">this</span>.getElementAt(index <span class="number">-1</span>)</span><br><span class="line">        current = previous.next</span><br><span class="line">        previous.next = current.next</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.count--</span><br><span class="line">      <span class="keyword">return</span> current.element</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span> </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;链表&quot;&gt;&lt;a href=&quot;#链表&quot; class=&quot;headerlink&quot; title=&quot;链表&quot;&gt;&lt;/a&gt;链表&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;链表存储有序的元素集合，但不同于数组，链表中的元素在内存中并不是连续放置的。每个&lt;br&gt;元素由一个存储元素本身的节
      
    
    </summary>
    
      <category term="数据结构与算法" scheme="https://zhaozhoa.github.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="链表" scheme="https://zhaozhoa.github.com/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>队列</title>
    <link href="https://zhaozhoa.github.com/2019/06/24/%E9%98%9F%E5%88%97/"/>
    <id>https://zhaozhoa.github.com/2019/06/24/队列/</id>
    <published>2019-06-24T08:14:25.000Z</published>
    <updated>2019-08-23T06:01:20.756Z</updated>
    
    <content type="html"><![CDATA[<h1 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h1><p><strong>先入先出</strong></p><h2 id="创建队列"><a href="#创建队列" class="headerlink" title="创建队列"></a>创建队列</h2><p>通过闭包和 WeakMap 将 items 封装成私有的属性</p><p><strong>initQueue</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Queue = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> items = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span> () &#123;</span><br><span class="line">      items.set(<span class="keyword">this</span>, [])</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 入队</span></span><br><span class="line">    enqueue (ele) &#123;</span><br><span class="line">      <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>)</span><br><span class="line">      q.push(ele)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 出队</span></span><br><span class="line">    dequeue () &#123;</span><br><span class="line">      <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>)</span><br><span class="line">      <span class="keyword">let</span> r = q.shift()</span><br><span class="line">      <span class="keyword">return</span> r</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 查看队列是否为空</span></span><br><span class="line">    isEmpty () &#123;</span><br><span class="line">      <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>)</span><br><span class="line">      <span class="keyword">return</span> q.length === <span class="number">0</span></span><br><span class="line">    &#125; </span><br><span class="line">    <span class="comment">// 打印队列</span></span><br><span class="line">    print () &#123;</span><br><span class="line">      <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>)</span><br><span class="line">      <span class="built_in">console</span>.log(q.toString());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 返回队列元素个数</span></span><br><span class="line">    size () &#123;</span><br><span class="line">      <span class="keyword">let</span> q = items.get(<span class="keyword">this</span>)</span><br><span class="line">      <span class="keyword">return</span> q.length</span><br><span class="line">    &#125;</span><br><span class="line">  <span class="keyword">return</span> Queue</span><br><span class="line">&#125;) () </span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = Queue</span><br></pre></td></tr></table></figure><h2 id="优先队列"><a href="#优先队列" class="headerlink" title="优先队列"></a>优先队列</h2><p>在入队的时候给元素优先级，使其不一定要插到队尾</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 优先队列的构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PriorityQueue</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> items = []</span><br><span class="line">  <span class="comment">// 元素的构造函数</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Element</span> (<span class="params">ele, pri</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.element = ele</span><br><span class="line">    <span class="keyword">this</span>.priority = pri</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 优先队列的入队函数</span></span><br><span class="line">  <span class="keyword">this</span>.enqueue = <span class="function"><span class="keyword">function</span> (<span class="params">ele, pri</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 初始化一个元素对象</span></span><br><span class="line">    <span class="keyword">let</span> element = <span class="keyword">new</span> Element(ele, pri)</span><br><span class="line">    <span class="comment">// 队列为空，则元素对象入队</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      items.push(element)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> flag = <span class="literal">false</span></span><br><span class="line">      <span class="comment">// 判断要插入的元素对象的优先级，和 队列元素的优先级，如果优先级高，插入到当前队列之前</span></span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; items.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (element.priority &lt; items[i].priority) &#123;</span><br><span class="line">          items.splice(i, <span class="number">0</span>, element)</span><br><span class="line">          flag = <span class="literal">true</span></span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 优先级小于所有数组元素的优先级，插入到队尾</span></span><br><span class="line">      <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">        items.push(element)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">this</span>.isEmpty = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> items.length === <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.print = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; items.length; i++) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(items[i].element, items[i].priority);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> priorityQueue = <span class="keyword">new</span> PriorityQueue();</span><br><span class="line">priorityQueue.enqueue(<span class="string">'john'</span>, <span class="number">2</span>);</span><br><span class="line">priorityQueue.enqueue(<span class="string">'jack'</span>, <span class="number">1</span>);</span><br><span class="line">priorityQueue.enqueue(<span class="string">'camila'</span>, <span class="number">1</span>);</span><br><span class="line">priorityQueue.print();</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">jack <span class="number">1</span></span><br><span class="line">camila <span class="number">1</span></span><br><span class="line">john <span class="number">2</span></span><br></pre></td></tr></table></figure><h2 id="循环队列"><a href="#循环队列" class="headerlink" title="循环队列"></a>循环队列</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用循环队列模仿击鼓传花游戏</span></span><br><span class="line"><span class="comment">/* 在这个游戏中，孩子们围成一个圆圈，把花尽快地传递给旁边的人。</span></span><br><span class="line"><span class="comment">  某一时刻传花停止， 这个时候花在谁手里，谁就退出圆圈、结束游戏。</span></span><br><span class="line"><span class="comment">  重复这个过程，直到只剩一个孩子（胜者）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Queue = <span class="built_in">require</span>(<span class="string">'./initQueue'</span>)</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 模拟击鼓传花游戏</span></span><br><span class="line"><span class="comment"> * @param &#123;Array&#125; nameList 参加游戏的小朋友</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; num 每一回合花在小朋友中传递的次数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">hotPotato</span>(<span class="params">nameList, num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> queue = <span class="keyword">new</span> Queue()</span><br><span class="line">  <span class="keyword">let</span> eliminatedList = []</span><br><span class="line">  <span class="comment">// 将小朋友的名字入队列</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nameList.length; i++) &#123;</span><br><span class="line">    queue.enqueue(nameList[i])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (queue.size() &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">      <span class="comment">// 传过的小朋友先出队列，在排到队尾</span></span><br><span class="line">      queue.enqueue(queue.dequeue())</span><br><span class="line">    &#125;</span><br><span class="line">    eliminatedList.push(queue.dequeue())</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    winner: queue.dequeue(),</span><br><span class="line">    eliminatedList</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> name = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</span><br><span class="line"><span class="keyword">let</span> result = hotPotato(name, <span class="number">7</span>)</span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br><span class="line"><span class="comment">// &#123; winner: 'a', eliminatedList: [ 'c', 'b', 'e', 'd' ] &#125;</span></span><br></pre></td></tr></table></figure><h2 id="双端队列"><a href="#双端队列" class="headerlink" title="双端队列"></a>双端队列</h2><p><strong>双端队列</strong>（deque，或称 double-ended queue）是一种允许我们同时从前端和后端添加和移除<br>元素的特殊队列</p><blockquote><p>在计算机科学中，双端队列的一个常见应用是存储一系列的撤销操作。每当用户在软件中进<br>行了一个操作，该操作会被存在一个双端队列中（就像在一个栈里）。当用户点击撤销按钮时， 该操作会被从双端队列中弹出，表示它被从后面移除了。在进行了预先定义的一定数量的操作后， 最先进行的操作会被从双端队列的前端移除。由于双端队列同时遵守了先进先出和后进先出原 则，可以说它是把队列和栈相结合的一种数据结构</p></blockquote><h3 id="初始化双端队列"><a href="#初始化双端队列" class="headerlink" title="初始化双端队列"></a>初始化双端队列</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 双端队列</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Deque</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">this</span>.count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">this</span>.lowestCount = <span class="number">0</span></span><br><span class="line">    <span class="keyword">this</span>.items = &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 判断双端队列是否为空</span></span><br><span class="line">  isEmpty () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.count - <span class="keyword">this</span>.lowestCount === <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 从双端队列前端移除第一个元素</span></span><br><span class="line">  removeFront () &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">this</span>.items[<span class="keyword">this</span>.lowestCount]</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>.items[<span class="keyword">this</span>.lowestCount]</span><br><span class="line">    <span class="keyword">this</span>.lowestCount++</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 从双端队列后端移除第一个元素</span></span><br><span class="line">  removeBack () &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">undefined</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">this</span>.items[<span class="keyword">this</span>.count - <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>.items[<span class="keyword">this</span>.count - <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">this</span>.count--</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 返回双端队列前端的第一个元素</span></span><br><span class="line">  peekFront () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items[<span class="keyword">this</span>.lowestCount]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 返回双端队列前端的第一个元素</span></span><br><span class="line">  peekBack () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items[<span class="keyword">this</span>.count <span class="number">-1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  clear () &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = &#123;&#125;</span><br><span class="line">    <span class="keyword">this</span>.count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">this</span>.lowestCount = <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  size () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.count - <span class="keyword">this</span>.lowestCount</span><br><span class="line">  &#125;</span><br><span class="line">  print () &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">return</span> []</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> res = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="keyword">this</span>.lowestCount; i &lt; <span class="keyword">this</span>.count; i++) &#123;</span><br><span class="line">      res.push(<span class="keyword">this</span>.items[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 在双端队列队尾添加元素 </span></span><br><span class="line">  addBack(ele) &#123;</span><br><span class="line">    <span class="keyword">this</span>.items[<span class="keyword">this</span>.count] = ele</span><br><span class="line">    <span class="keyword">this</span>.count++</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 在双端队列前端添加新的元素</span></span><br><span class="line">  addFront(ele) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      <span class="keyword">this</span>.addBack(ele)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>.lowestCount --</span><br><span class="line">      <span class="keyword">this</span>.items[<span class="keyword">this</span>.lowestCount] = ele</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = Deque</span><br></pre></td></tr></table></figure><h3 id="用双端队列检查回文"><a href="#用双端队列检查回文" class="headerlink" title="用双端队列检查回文"></a>用双端队列检查回文</h3><blockquote><p>回文是正反都能读通的单词、词组、数或一系列字符的序列，例如madam或 racecar</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> Deque = <span class="built_in">require</span>(<span class="string">'./initDeque'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">palindromeChecker</span>(<span class="params">aString</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (aString === <span class="literal">undefined</span> || aString === <span class="literal">null</span> || (aString !== <span class="literal">null</span> &amp;&amp; aString.length === <span class="number">0</span>)) &#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> deque = <span class="keyword">new</span> Deque()</span><br><span class="line">  <span class="keyword">const</span> lowerString = aString.toLocaleLowerCase()</span><br><span class="line">  <span class="keyword">let</span> isEqual = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">let</span> firstChar, lastChar</span><br><span class="line">  <span class="comment">// 元素入队</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; lowerString.length; i++) &#123;</span><br><span class="line">    deque.addBack(lowerString.charAt(i))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">while</span> (deque.size() &gt; <span class="number">1</span> &amp;&amp; isEqual) &#123;</span><br><span class="line">    firstChar = deque.removeFront()</span><br><span class="line">    lastChar = deque.removeBack()</span><br><span class="line">    <span class="keyword">if</span> (firstChar !== lastChar) &#123;</span><br><span class="line">      isEqual = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> isEqual</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(palindromeChecker(<span class="string">'aaabaaa'</span>));</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;队列&quot;&gt;&lt;a href=&quot;#队列&quot; class=&quot;headerlink&quot; title=&quot;队列&quot;&gt;&lt;/a&gt;队列&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;先入先出&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;创建队列&quot;&gt;&lt;a href=&quot;#创建队列&quot; class=&quot;headerl
      
    
    </summary>
    
      <category term="数据结构与算法" scheme="https://zhaozhoa.github.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="队列" scheme="https://zhaozhoa.github.com/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>栈</title>
    <link href="https://zhaozhoa.github.com/2019/06/18/%E6%A0%88/"/>
    <id>https://zhaozhoa.github.com/2019/06/18/栈/</id>
    <published>2019-06-18T12:18:39.000Z</published>
    <updated>2019-06-27T15:50:51.409Z</updated>
    
    <content type="html"><![CDATA[<h1 id="栈-Stack"><a href="#栈-Stack" class="headerlink" title="栈(Stack)"></a>栈(Stack)</h1><p><strong>先入后出</strong></p><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><h3 id="ES5"><a href="#ES5" class="headerlink" title="ES5"></a>ES5</h3><ul><li>用构造函数表示栈</li><li>用数组作为存储对象</li><li>将栈的方法挂载到构造函数的原型上</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建栈</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Stack</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 用数组作为存储方法</span></span><br><span class="line">  <span class="keyword">this</span>.items = []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Stack.prototype.push = <span class="function"><span class="keyword">function</span> (<span class="params">element</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.items.push(element)</span><br><span class="line">&#125;</span><br><span class="line">Stack.prototype.pop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.items.pop()</span><br><span class="line">&#125;</span><br><span class="line">Stack.prototype.peek = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.items[<span class="keyword">this</span>.items.length - <span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line">Stack.prototype.isEmpty = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.items.length === <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个栈的实例对象</span></span><br><span class="line"><span class="keyword">let</span> stack = <span class="keyword">new</span> Stack()</span><br><span class="line"><span class="built_in">console</span>.log(stack.isEmpty());</span><br><span class="line">stack.push(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">console</span>.log(stack.items);</span><br></pre></td></tr></table></figure><h3 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h3><ul><li>用类实现</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span> () &#123;</span><br><span class="line">    <span class="keyword">this</span>.item = []</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  push (element) &#123;</span><br><span class="line">    <span class="keyword">this</span>.items.push(element)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="简单案例"><a href="#简单案例" class="headerlink" title="简单案例"></a>简单案例</h2><h3 id="十进制转换二进制"><a href="#十进制转换二进制" class="headerlink" title="十进制转换二进制"></a>十进制转换二进制</h3><p><strong>封装一个栈的类</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 封装的栈</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stack</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = []</span><br><span class="line">  &#125;</span><br><span class="line">  push(element) &#123;</span><br><span class="line">    <span class="keyword">this</span>.items.push(element)</span><br><span class="line">  &#125;</span><br><span class="line">  pop() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.pop()</span><br><span class="line">  &#125;</span><br><span class="line">  peek() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items[<span class="keyword">this</span>.items.length - <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  isEmpty() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.length === <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">  size() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.items.length</span><br><span class="line">  &#125;</span><br><span class="line">  clear() &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = []</span><br><span class="line">  &#125;</span><br><span class="line">  print() &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="string">''</span></span><br><span class="line">    <span class="keyword">while</span> (!<span class="keyword">this</span>.isEmpty()) &#123;</span><br><span class="line">      result += <span class="keyword">this</span>.pop().toString()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = Stack</span><br></pre></td></tr></table></figure><p><strong>算法实现</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入封装的栈</span></span><br><span class="line"><span class="keyword">const</span> Stack = <span class="built_in">require</span>(<span class="string">'./封装一个栈'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 十进制转换二进制方法</span></span><br><span class="line"><span class="comment"> * @param &#123;Number&#125; num 要准换的十进制数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Ten2Two</span> (<span class="params">num</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> stack = <span class="keyword">new</span> Stack()</span><br><span class="line">  <span class="keyword">let</span> rem</span><br><span class="line">  <span class="keyword">while</span> (num &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    rem = <span class="built_in">Math</span>.floor(num % <span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line">    stack.push(rem)</span><br><span class="line">    num = <span class="built_in">Math</span>.floor(num / <span class="number">2</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  stack.print()</span><br><span class="line">&#125;</span><br><span class="line">Ten2Two(<span class="number">233</span>)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;栈-Stack&quot;&gt;&lt;a href=&quot;#栈-Stack&quot; class=&quot;headerlink&quot; title=&quot;栈(Stack)&quot;&gt;&lt;/a&gt;栈(Stack)&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;先入后出&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;实现&quot;&gt;&lt;a href=&quot;#
      
    
    </summary>
    
      <category term="数据结构与算法" scheme="https://zhaozhoa.github.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="栈" scheme="https://zhaozhoa.github.com/tags/%E6%A0%88/"/>
    
  </entry>
  
  <entry>
    <title>数组封装</title>
    <link href="https://zhaozhoa.github.com/2019/06/17/%E6%95%B0%E7%BB%84%E5%B0%81%E8%A3%85/"/>
    <id>https://zhaozhoa.github.com/2019/06/17/数组封装/</id>
    <published>2019-06-17T13:02:40.000Z</published>
    <updated>2019-08-23T06:08:30.667Z</updated>
    
    <content type="html"><![CDATA[<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="数组元素操作方法"><a href="#数组元素操作方法" class="headerlink" title="数组元素操作方法"></a>数组元素操作方法</h2><h3 id="添加元素"><a href="#添加元素" class="headerlink" title="添加元素"></a>添加元素</h3><h4 id="尾插"><a href="#尾插" class="headerlink" title="尾插"></a>尾插</h4><ul><li><p><strong>length</strong></p><p>Array.length 可以获取数组的长度，同时这个返回的长度是数组<code>索引的最大值 + 1</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr[arr.length] = x</span><br></pre></td></tr></table></figure><p>表示给数组的最后添加一个元素 x</p></li><li><p><strong>push 方法</strong></p><p><strong>push()</strong>方法将一个或多个元素添加到数组的末尾，并返回该数组的<strong>新长度</strong>。</p><p><strong>简单实现</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.myPush = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; i++) &#123;</span><br><span class="line">    <span class="keyword">this</span>[<span class="keyword">this</span>.length] = <span class="built_in">arguments</span>[i]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.length</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="首插"><a href="#首插" class="headerlink" title="首插"></a>首插</h4><ul><li><strong>unshift()</strong> 方法将一个或多个元素添加到数组的<strong>开头</strong>，并返回该数组的<strong>新长度</strong>。</li></ul><p><strong>简单实现</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.myUnshift =<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="built_in">arguments</span>.length; j++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="keyword">this</span>.length; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">      <span class="keyword">this</span>[i] = <span class="keyword">this</span>[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>[<span class="number">0</span>] = <span class="built_in">arguments</span>[j];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><h4 id="尾删"><a href="#尾删" class="headerlink" title="尾删"></a>尾删</h4><ul><li><strong>pop()</strong> 删除<strong>末尾元素</strong>，并返回<strong>这个元素</strong></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr.pop()</span><br></pre></td></tr></table></figure><p><strong>简单实现</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.myPop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> last = <span class="keyword">this</span>[<span class="keyword">this</span>.length - <span class="number">1</span>]</span><br><span class="line">  <span class="keyword">this</span>.length--</span><br><span class="line">  <span class="keyword">return</span> last</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="首删"><a href="#首删" class="headerlink" title="首删"></a>首删</h4><ul><li><strong>shift()</strong> 方法从数组中删除<strong>第一个</strong>元素，并返回该元素的值</li></ul><p><strong>简单实现</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.myShift = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> head = <span class="keyword">this</span>[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">    <span class="keyword">this</span>[i] = <span class="keyword">this</span>[i + <span class="number">1</span>]</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">this</span>.length--</span><br><span class="line">  <span class="keyword">return</span> head</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在任意位置添加或删除"><a href="#在任意位置添加或删除" class="headerlink" title="在任意位置添加或删除"></a>在任意位置添加或删除</h3><ul><li><strong>splice()</strong> 方法通过删除或替换现有元素或者原地添加新的元素来修改数组,并以数组形式返回被修改的内容。此方法会改变原数组。</li><li><strong>参数：</strong><ul><li>第一个：起始计算索引</li><li>第二个：删除的元素个数</li><li>其余：添加的元素</li></ul></li></ul><p><strong>简单实现</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.mySplice = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> start = <span class="built_in">arguments</span>[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">let</span> deleteLen = <span class="built_in">arguments</span>[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">let</span> len = <span class="built_in">arguments</span>.length</span><br><span class="line">  <span class="keyword">let</span> instertEles = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (len &lt; <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">this</span>.length = start</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (len === <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = start; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>[i] = <span class="keyword">this</span>[i + deleteLen]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.length = <span class="keyword">this</span>.length - deleteLen</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 获取添加元素</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="built_in">arguments</span>.length - <span class="number">1</span>; j &gt;= <span class="number">2</span>; j--) &#123;</span><br><span class="line">      instertEles.unshift(<span class="built_in">arguments</span>[j])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 删除元素</span></span><br><span class="line">    <span class="keyword">if</span> (deleteLen &gt;= <span class="keyword">this</span>.length - start) &#123;</span><br><span class="line">      <span class="keyword">this</span>.length = start</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = start; i &lt; <span class="keyword">this</span>.length; i++) &#123;</span><br><span class="line">        <span class="keyword">this</span>[i] = <span class="keyword">this</span>[i + deleteLen]</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">this</span>.length = <span class="keyword">this</span>.length - deleteLen</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 添加元素</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i&lt; instertEles.length; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">let</span> j = <span class="keyword">this</span>.length; j &gt; start; j--) &#123;</span><br><span class="line">        <span class="keyword">this</span>[j] = <span class="keyword">this</span>[j - <span class="number">1</span>]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>[start] = instertEles[i]</span><br><span class="line">      start++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;数组&quot;&gt;&lt;a href=&quot;#数组&quot; class=&quot;headerlink&quot; title=&quot;数组&quot;&gt;&lt;/a&gt;数组&lt;/h1&gt;&lt;h2 id=&quot;数组元素操作方法&quot;&gt;&lt;a href=&quot;#数组元素操作方法&quot; class=&quot;headerlink&quot; title=&quot;数组元素操作方法&quot;
      
    
    </summary>
    
      <category term="数据结构与算法" scheme="https://zhaozhoa.github.com/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="数组" scheme="https://zhaozhoa.github.com/tags/%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>nuxt</title>
    <link href="https://zhaozhoa.github.com/2019/06/11/nuxt/"/>
    <id>https://zhaozhoa.github.com/2019/06/11/nuxt/</id>
    <published>2019-06-11T14:48:07.000Z</published>
    <updated>2019-08-23T05:56:01.325Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vue-服务端渲染-和-nuxt"><a href="#vue-服务端渲染-和-nuxt" class="headerlink" title="vue 服务端渲染 和 nuxt"></a>vue 服务端渲染 和 nuxt</h1><h2 id="服务端优缺点"><a href="#服务端优缺点" class="headerlink" title="服务端优缺点"></a>服务端优缺点</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><p>有利于SEO</p><h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>页面在服务器上渲染，增大服务器压力，不利于高并发</p><h2 id="简单的vue服务端渲染"><a href="#简单的vue服务端渲染" class="headerlink" title="简单的vue服务端渲染"></a>简单的vue服务端渲染</h2><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-server-renderer -S</span><br></pre></td></tr></table></figure><p>简单应用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Vue = <span class="built_in">require</span>(<span class="string">'vue'</span>)</span><br><span class="line"><span class="keyword">const</span> renderer = <span class="built_in">require</span>(<span class="string">'vue-server-renderer'</span>).createRenderer()</span><br><span class="line"><span class="keyword">const</span> server = <span class="built_in">require</span>(<span class="string">'express'</span>)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// vue 部分</span></span><br><span class="line"><span class="keyword">let</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  template:<span class="string">`&lt;h1&gt;Hello World !! &#123;&#123; name &#125;&#125;&lt;/h1&gt;`</span>,</span><br><span class="line">  data() &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name: <span class="string">'zhao'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// node 部分</span></span><br><span class="line">server.get(<span class="string">'*'</span>, (req, res) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 将渲染的 template 转换成字符串</span></span><br><span class="line">  renderer.renderToString(app, (err, html) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    res.send(html)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br></pre></td></tr></table></figure><h2 id="nuxt"><a href="#nuxt" class="headerlink" title="nuxt"></a>nuxt</h2><p>nuxt vue的服务端渲染框架</p><p><a href="https://zh.nuxtjs.org/guide/installation" target="_blank" rel="noopener">官方文档</a></p><h3 id="上车"><a href="#上车" class="headerlink" title="上车"></a>上车</h3><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-nuxt-app &lt;项目名&gt;</span><br></pre></td></tr></table></figure><h3 id="nuxt-的目录结构"><a href="#nuxt-的目录结构" class="headerlink" title="nuxt 的目录结构"></a>nuxt 的目录结构</h3><p>dome<br>    ├─.nuxt<br>    │  ├─components<br>    │  └─views<br>    ├─assets                  //  存放为编译的静态资源，less，sass ，java<br>    ├─components       // 组件目录<br>    ├─layouts                // 布局目录<br>    ├─middleware        // 中间件目录<br>    ├─pages                  // 页面目录<br>    ├─plugins               // 插件目录<br>    ├─server                 // 服务器文件目录<br>    ├─static                   // 静态目录，不会通过webpack打包<br>    └─store                        // 存放 vuex 的目录</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;vue-服务端渲染-和-nuxt&quot;&gt;&lt;a href=&quot;#vue-服务端渲染-和-nuxt&quot; class=&quot;headerlink&quot; title=&quot;vue 服务端渲染 和 nuxt&quot;&gt;&lt;/a&gt;vue 服务端渲染 和 nuxt&lt;/h1&gt;&lt;h2 id=&quot;服务端优缺点&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="前端框架" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="vue" scheme="https://zhaozhoa.github.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>webpack</title>
    <link href="https://zhaozhoa.github.com/2019/05/31/webpack/"/>
    <id>https://zhaozhoa.github.com/2019/05/31/webpack/</id>
    <published>2019-05-31T12:08:06.000Z</published>
    <updated>2019-08-23T06:10:52.087Z</updated>
    
    <content type="html"><![CDATA[<h1 id="webpack-4"><a href="#webpack-4" class="headerlink" title="webpack 4"></a>webpack 4</h1><h2 id="上车"><a href="#上车" class="headerlink" title="上车"></a>上车</h2><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack webpack-cli -D</span><br></pre></td></tr></table></figure><ul><li>webpack4 可以 0 配置，但功能不全</li><li>入口文件为 项目根目录下面的 src/index.js</li><li>打包输出文件为 项目根目录下面的 dist/main.js</li></ul><p><strong>打包:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack</span><br></pre></td></tr></table></figure><h2 id="手动配置"><a href="#手动配置" class="headerlink" title="手动配置"></a>手动配置</h2><h3 id="执行配置文件"><a href="#执行配置文件" class="headerlink" title="执行配置文件"></a>执行配置文件</h3><p><strong>执行默认配置</strong></p><ul><li>在当前项目根目录下新建一个 <code>webpack.config.js</code> 这是 webpack 默认执行的配置文件</li></ul><p><strong>修改默认配置</strong></p><ul><li>建立自己的 webpack 配置文件 xxx.js</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack --config xxx.js</span><br></pre></td></tr></table></figure><ul><li>或者给 <code>package.json</code> 添加脚本</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  <span class="string">"bulid"</span> <span class="string">"webpack --config xxx.js"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run bulid</span><br></pre></td></tr></table></figure><h3 id="webpack基础配置"><a href="#webpack基础配置" class="headerlink" title="webpack基础配置"></a>webpack基础配置</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'development'</span>, <span class="comment">// 模式 有两种： production development</span></span><br><span class="line">  entry: <span class="string">'./src/index.js'</span>, <span class="comment">// 打包的入口文件</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span>, <span class="comment">// 打包后的文件名</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>) <span class="comment">// 打包文件存放目录</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="webpack-dev-server-配置"><a href="#webpack-dev-server-配置" class="headerlink" title="webpack-dev-server 配置"></a>webpack-dev-server 配置</h3><p>开发服务器，在内存中打包，不会生成真的打包文件，方便修改</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add webpack-dev-server -D</span><br></pre></td></tr></table></figure><p><strong>基本配置</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123; <span class="comment">// 开发服务器配置</span></span><br><span class="line">  port: <span class="number">3000</span>, <span class="comment">// 设置端口</span></span><br><span class="line">  progress: <span class="literal">true</span>, <span class="comment">// 显示打包进度条</span></span><br><span class="line">  contentBase: <span class="string">'./dist'</span>, <span class="comment">// 指定打包后的开发文件在 dist 目录，这样就可以被 dist 目录其他文件引用</span></span><br><span class="line">  compress: <span class="literal">true</span>, <span class="comment">// gzip 压缩</span></span><br><span class="line">  proxy：&#123;</span><br><span class="line">    ‘/api<span class="comment">/*’: 'http://localhost:3000' // 将/api/  的请求用 http://localhost:3000 代理</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><p>所有的插件都放在 plugins： []</p><h4 id="html-webpack-plugin-插件"><a href="#html-webpack-plugin-插件" class="headerlink" title="html-webpack-plugin 插件"></a>html-webpack-plugin 插件</h4><p><strong>作用:</strong>是将 src 目录下面的 js 文件 自动引入到 src 目录下面的 html 文件里，并将 引入后的 html 文件 打包到 dist 目录 </p><p>安装 html-webpack-plugin</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn html-webpack-plugin -D</span><br></pre></td></tr></table></figure><p>引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>)</span><br></pre></td></tr></table></figure><p><strong>基本配置</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">plugins: [  <span class="comment">// 数组，存放着所有的 webpack 插件</span></span><br><span class="line">   <span class="keyword">new</span> HtmlWebpackPlugin (&#123;</span><br><span class="line">     template: <span class="string">'./src/index.html'</span>, <span class="comment">// 引入的 html 文件</span></span><br><span class="line">     filename: <span class="string">'index.html'</span>, <span class="comment">// 打包后的文件名</span></span><br><span class="line">     minify: &#123;  <span class="comment">// 对 html 文件的压缩</span></span><br><span class="line">       removeAttributeQuotes: <span class="literal">true</span>, <span class="comment">// 删除双引号</span></span><br><span class="line">       collapseWhitespace: <span class="literal">true</span>, <span class="comment">//删除多余的空格和 空行</span></span><br><span class="line">     &#125;,</span><br><span class="line">     hash: <span class="literal">true</span>, <span class="comment">// 打包的 js 文件添加 hash 防止文件覆盖</span></span><br><span class="line">   &#125;)</span><br><span class="line"> ]</span><br></pre></td></tr></table></figure><h4 id="mini-css-extract-plugin-插件"><a href="#mini-css-extract-plugin-插件" class="headerlink" title="mini-css-extract-plugin 插件"></a>mini-css-extract-plugin 插件</h4><p><strong>作用：</strong> 将 css 文件抽离成单独的文件</p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add mini-css-extract-plugin -D</span><br></pre></td></tr></table></figure><p>引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>)</span><br></pre></td></tr></table></figure><p>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">  filename: <span class="string">'main.css'</span> <span class="comment">//导出的 css 文件名称</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>同时需要用 <code>MiniCssExtractPlugin.loader</code> 替换 style-loader</p><p>如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">      MiniCssExtractPlugin.loader, <span class="comment">//将打包的 css 引入到 html文件中 </span></span><br><span class="line">      <span class="string">'css-loader'</span>,</span><br><span class="line">      <span class="string">'postcss-loader'</span>, <span class="comment">//解析css 自动添加浏览器前缀</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h3><p>用于解析打包不同的文件</p><h4 id="解析-css-文件"><a href="#解析-css-文件" class="headerlink" title="解析 css 文件"></a>解析 css 文件</h4><p>安装loader</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn css-loader style-loader postcss-loader autoprefixer -D</span><br></pre></td></tr></table></figure><ul><li>loader<ul><li>css-loader：解析在 css 文件中用 @import 导入的其他css</li><li>style-loader：将 css 添加到 head 标签中</li><li>postcss-loader 自动为 css 添加浏览器前缀</li></ul></li><li>loader 的执行是由顺序的 ：从右向左，从下到上解析</li></ul><p><strong>注意：</strong></p><p>使用 postcss-loader 需要添加配置文件</p><p>在 项目根目录 新建一个 postcss.config.js 的文件 放入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [<span class="built_in">require</span>(<span class="string">'autoprefixer'</span>)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>基本配置</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  rules: [ <span class="comment">// 规则</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123; <span class="comment">// 可以将 loader 写成对象形式，也可以直接引用</span></span><br><span class="line">            loader: <span class="string">'style-loader'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              insertAt: <span class="string">'top'</span> <span class="comment">//将 css 文件插入到 head 标签顶部，方便可以让自己的html中 css覆盖</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="string">'css-loader'</span>，</span><br><span class="line">          <span class="string">'postcss-loader'</span>, <span class="comment">//给 css 自动添加浏览器前缀</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="解析-less"><a href="#解析-less" class="headerlink" title="解析 less"></a>解析 less</h3><p>安装loader</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn css-loader style-loader less less-loader postcss-loader autoprefixer -D</span><br></pre></td></tr></table></figure><p><strong>配置</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.less$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">      &#123;</span><br><span class="line">        loader: <span class="string">'style-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          insertAt: <span class="string">'top'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">'css-loader'</span>,</span><br><span class="line">      <span class="string">'less-loader'</span>，</span><br><span class="line">      <span class="string">'postcss-loader'</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="高版本es-转化成es5"><a href="#高版本es-转化成es5" class="headerlink" title="高版本es 转化成es5"></a>高版本es 转化成es5</h3><p>安装babel</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-loader @babel/core @babel/preset-env babel-plugin-transform-runtime @babel/plugin-proposal-class-properties -D</span><br><span class="line">yarn add @babel/runtime @babel/polyfill</span><br></pre></td></tr></table></figure><p>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    use: [</span><br><span class="line">      &#123;</span><br><span class="line">        loader:<span class="string">'babel-loader'</span>,</span><br><span class="line">        options: &#123; <span class="comment">// 用babel-loader 将es6 -&gt; es5</span></span><br><span class="line">          presets: [ </span><br><span class="line">            <span class="string">'@babel/preset-env'</span></span><br><span class="line">          ],</span><br><span class="line">          plugins: [</span><br><span class="line">            [<span class="string">"@babel/plugin-proposal-decorators"</span>, &#123; <span class="string">"legacy"</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">            [<span class="string">"@babel/plugin-proposal-class-properties"</span>, &#123; <span class="string">"loose"</span>: <span class="literal">true</span> &#125;],</span><br><span class="line">            [<span class="string">"@babel/plugin-transform-runtime"</span>]</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,  <span class="comment">// 排除文件</span></span><br><span class="line">    include: path.resolve(__dirname, <span class="string">'src'</span>) <span class="comment">// 打包的文件</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置eslint"><a href="#配置eslint" class="headerlink" title="配置eslint"></a>配置eslint</h3><p>校验 js 代码规范</p><p>安装loader</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add eslint eslint-loader -D</span><br></pre></td></tr></table></figure><p>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">      loader: <span class="string">'eslint-loader'</span>,</span><br><span class="line">        options: &#123;</span><br><span class="line">          enforce: <span class="string">'pre'</span> <span class="comment">// 强制提前执行</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>同时需要在根目录安装一个 .eslintrc.json 的配置文件</p><p><a href="https://eslint.org/demo/#eyJ0ZXh0IjoidmFyIGZvbyA9IGJhcjsiLCJvcHRpb25zIjp7InBhcnNlck9wdGlvbnMiOnsiZWNtYVZlcnNpb24iOjUsInNvdXJjZVR5cGUiOiJzY3JpcHQiLCJlY21hRmVhdHVyZXMiOnt9fSwicnVsZXMiOnsiY29uc3RydWN0b3Itc3VwZXIiOjIsImZvci1kaXJlY3Rpb24iOjIsImdldHRlci1yZXR1cm4iOjIsIm5vLWNhc2UtZGVjbGFyYXRpb25zIjoyLCJuby1jbGFzcy1hc3NpZ24iOjIsIm5vLWNvbXBhcmUtbmVnLXplcm8iOjIsIm5vLWNvbmQtYXNzaWduIjoyLCJuby1jb25zb2xlIjoyLCJuby1jb25zdC1hc3NpZ24iOjIsIm5vLWNvbnN0YW50LWNvbmRpdGlvbiI6Miwibm8tY29udHJvbC1yZWdleCI6Miwibm8tZGVidWdnZXIiOjIsIm5vLWRlbGV0ZS12YXIiOjIsIm5vLWR1cGUtYXJncyI6Miwibm8tZHVwZS1jbGFzcy1tZW1iZXJzIjoyLCJuby1kdXBlLWtleXMiOjIsIm5vLWR1cGxpY2F0ZS1jYXNlIjoyLCJuby1lbXB0eSI6Miwibm8tZW1wdHktY2hhcmFjdGVyLWNsYXNzIjoyLCJuby1lbXB0eS1wYXR0ZXJuIjoyLCJuby1leC1hc3NpZ24iOjIsIm5vLWV4dHJhLWJvb2xlYW4tY2FzdCI6Miwibm8tZXh0cmEtc2VtaSI6Miwibm8tZmFsbHRocm91Z2giOjIsIm5vLWZ1bmMtYXNzaWduIjoyLCJuby1nbG9iYWwtYXNzaWduIjoyLCJuby1pbm5lci1kZWNsYXJhdGlvbnMiOjIsIm5vLWludmFsaWQtcmVnZXhwIjoyLCJuby1pcnJlZ3VsYXItd2hpdGVzcGFjZSI6Miwibm8tbWl4ZWQtc3BhY2VzLWFuZC10YWJzIjoyLCJuby1uZXctc3ltYm9sIjoyLCJuby1vYmotY2FsbHMiOjIsIm5vLW9jdGFsIjoyLCJuby1yZWRlY2xhcmUiOjIsIm5vLXJlZ2V4LXNwYWNlcyI6Miwibm8tc2VsZi1hc3NpZ24iOjIsIm5vLXNwYXJzZS1hcnJheXMiOjIsIm5vLXRoaXMtYmVmb3JlLXN1cGVyIjoyLCJuby11bmRlZiI6Miwibm8tdW5leHBlY3RlZC1tdWx0aWxpbmUiOjIsIm5vLXVucmVhY2hhYmxlIjoyLCJuby11bnNhZmUtZmluYWxseSI6Miwibm8tdW5zYWZlLW5lZ2F0aW9uIjoyLCJuby11bnVzZWQtbGFiZWxzIjoyLCJuby11bnVzZWQtdmFycyI6Miwibm8tdXNlbGVzcy1lc2NhcGUiOjIsInJlcXVpcmUteWllbGQiOjIsInVzZS1pc25hbiI6MiwidmFsaWQtdHlwZW9mIjoyfSwiZW52Ijp7fX19" target="_blank" rel="noopener">这里下载</a></p><h3 id="打包图片"><a href="#打包图片" class="headerlink" title="打包图片"></a>打包图片</h3><p>安装loader</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add file-loader -D</span><br></pre></td></tr></table></figure><p>作用：默认在内部生成一张图片，到dist 目录下，返回生成的图片名</p><p>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: <span class="regexp">/\.html/</span>,</span><br><span class="line">    use: <span class="string">'html-withimg-loader'</span> <span class="comment">// 将html中的图片打包到 dist 目录</span></span><br><span class="line">&#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    test: <span class="regexp">/\.(jpg|jpeg|png|gif)$/</span>,</span><br><span class="line">      use: &#123;</span><br><span class="line">        loader: <span class="string">'url-loader'</span>, <span class="comment">// 将小于 200K的图片变成base64格式</span></span><br><span class="line">          options: &#123;</span><br><span class="line">            limit: <span class="number">200</span> * <span class="number">1024</span>,</span><br><span class="line">              outputPath: <span class="string">'img/'</span> <span class="comment">// 大于200k 的图片放到 /dist/img 下面</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><h3 id="多入口配置"><a href="#多入口配置" class="headerlink" title="多入口配置"></a>多入口配置</h3><p>打包成多个文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">'development'</span>,</span><br><span class="line">  entry: &#123; <span class="comment">//打包两个 js 文件</span></span><br><span class="line">    index: <span class="string">'./src/index.js'</span>, </span><br><span class="line">    others: <span class="string">'./src/other.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'[name].js'</span>, <span class="comment">// [name] -&gt; index &amp; others </span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">      filename: <span class="string">'index.html'</span>,</span><br><span class="line">      chunks: [<span class="string">'index'</span>] <span class="comment">// 导出的 html 只引入 index.js</span></span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">'./src/index.html'</span>,</span><br><span class="line">      filename: <span class="string">'other.html'</span>,</span><br><span class="line">      chunks: [<span class="string">'othwes'</span>]</span><br><span class="line">    &#125;),</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实时监控打包文件"><a href="#实时监控打包文件" class="headerlink" title="实时监控打包文件"></a>实时监控打包文件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">watch: <span class="literal">true</span>,</span><br><span class="line"> watchOptions: &#123;</span><br><span class="line">   poll: <span class="number">1000</span>,</span><br><span class="line">   aggregateTimeout: <span class="number">500</span>, <span class="comment">// 防抖, 停止输入后 500ms 后重新打包</span></span><br><span class="line">   ignored: <span class="regexp">/node_modules/</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="resolve"><a href="#resolve" class="headerlink" title="resolve"></a>resolve</h3><p>配置解析第三方模块的规则和次序</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  modules: [path.resolve(<span class="string">'node_modules'</span>)]， <span class="comment">// 查找第三方模块只在当前的 node_modules 文件中找</span></span><br><span class="line">  extensions: [<span class="string">'.js'</span>, <span class="string">'.vue'</span>]  <span class="comment">// 引入这些类型的文件不用写扩展名</span></span><br><span class="line">  alias: &#123;</span><br><span class="line">    @: <span class="string">'./src/components'</span> <span class="comment">// 配置别名，用@ 代替后面的地址</span></span><br><span class="line">  &#125;，</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;webpack-4&quot;&gt;&lt;a href=&quot;#webpack-4&quot; class=&quot;headerlink&quot; title=&quot;webpack 4&quot;&gt;&lt;/a&gt;webpack 4&lt;/h1&gt;&lt;h2 id=&quot;上车&quot;&gt;&lt;a href=&quot;#上车&quot; class=&quot;headerlink&quot; 
      
    
    </summary>
    
      <category term="前端" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="webpack" scheme="https://zhaozhoa.github.com/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>服务部署</title>
    <link href="https://zhaozhoa.github.com/2019/05/23/%E6%9C%8D%E5%8A%A1%E9%83%A8%E7%BD%B2/"/>
    <id>https://zhaozhoa.github.com/2019/05/23/服务部署/</id>
    <published>2019-05-23T12:51:04.000Z</published>
    <updated>2019-08-23T06:01:45.610Z</updated>
    
    <content type="html"><![CDATA[<h1 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h1><h2 id="上车"><a href="#上车" class="headerlink" title="上车"></a>上车</h2><h3 id="联网"><a href="#联网" class="headerlink" title="联网"></a>联网</h3><p>用 vim 打开</p><p><code>vi /etc/sysconfig/network-scripts/ifcfg-xxx(xxx为网卡后缀，每个人的都不一样)</code></p><p>修改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ONBOOT=no 为 ONBOOT=yes</span><br></pre></td></tr></table></figure><p><strong>重启网络</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br><span class="line">//或者</span><br><span class="line">/etc/init.d/network restart</span><br></pre></td></tr></table></figure><h3 id="更新系统、软件"><a href="#更新系统、软件" class="headerlink" title="更新系统、软件"></a>更新系统、软件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 系统和软件全部更新</span><br><span class="line">yum update -y</span><br><span class="line">// 只更新软件</span><br><span class="line">yum upgrade</span><br></pre></td></tr></table></figure><h3 id="更换源"><a href="#更换源" class="headerlink" title="更换源"></a>更换源</h3><p><strong>备份原来的源</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span><br></pre></td></tr></table></figure><p><strong>更换为网易的源</strong></p><p>安装wget</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install wget</span><br></pre></td></tr></table></figure><p>换源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.163.com/.<span class="built_in">help</span>/CentOS7-Base-163.repo</span><br><span class="line">mv CentOS7-Base-163.repo /etc/yum.repos.d/</span><br></pre></td></tr></table></figure><p>重置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum makecash</span><br></pre></td></tr></table></figure><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><p><strong>安装vim</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install vim -y</span><br></pre></td></tr></table></figure><h4 id="vim使用"><a href="#vim使用" class="headerlink" title="vim使用"></a>vim使用</h4><p>vim file  打开或创建 file 文件</p><p><strong>vim的三种模式</strong></p><ul><li><p>命令模式</p><p>进入 vim 默认进入命令模式， 在命令模式输入当前命令</p></li><li><p>插入模式</p><p>键入 <code>i</code> 进入插入模式，在插入模式输入直接写的文件</p></li><li><p>底行模式</p><p><code>esc</code> 返回命令模式， <code>shift + ：</code>进入底行模式，在底行模式输入当作底行命令</p><p><strong>底行命令</strong></p><ul><li>:q(退出不保存)</li><li>:w（保存文件）</li><li>:wq(保存并退出)</li><li>q！（强制退出）</li></ul></li></ul><h2 id="安装服务"><a href="#安装服务" class="headerlink" title="安装服务"></a>安装服务</h2><h3 id="node"><a href="#node" class="headerlink" title="node"></a>node</h3><p>将 node 添加到 yum 源中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl --silent --location https://rpm.nodesource.com/setup_10.x | sudo bash -</span><br></pre></td></tr></table></figure><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nodejs -y</span><br></pre></td></tr></table></figure><p>用 vim 写一个简单的 nodejs 服务，发现主机访问不了 需要配置防护墙</p><h3 id="配置防火墙"><a href="#配置防火墙" class="headerlink" title="配置防火墙"></a>配置防火墙</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 清除防火墙配置</span><br><span class="line">iptables -F</span><br><span class="line">// 允许 8080 端口访问</span><br><span class="line">iptables -A INPUT -p tcp --dport 8080 -j ACCEPT</span><br></pre></td></tr></table></figure><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>添加 源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum.repos.d/nginx.repo</span><br></pre></td></tr></table></figure><p>添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[nginx-stable]</span><br><span class="line">name=nginx stable repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br><span class="line"></span><br><span class="line">[nginx-mainline]</span><br><span class="line">name=nginx mainline repo</span><br><span class="line">baseurl=http://nginx.org/packages/mainline/centos/<span class="variable">$releasever</span>/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=https://nginx.org/keys/nginx_signing.key</span><br></pre></td></tr></table></figure><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx -y</span><br></pre></td></tr></table></figure><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>进入配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/conf.d/default.conf</span><br></pre></td></tr></table></figure><p>原配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;   ----&gt;监听的端口</span><br><span class="line">    server_name  localhost; -----&gt; 服务器名称</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset koi8-r;</span></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;  -------&gt;服务文件目录</span><br><span class="line">        index  index.html index.htm;-------&gt; 默认的服务文件</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#error_page  404              /404.html;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># redirect server error pages to the static page /50x.html</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">    <span class="comment">#    proxy_pass   http://127.0.0.1;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ \.php$ &#123;</span></span><br><span class="line">    <span class="comment">#    root           html;</span></span><br><span class="line">    <span class="comment">#    fastcgi_pass   127.0.0.1:9000;</span></span><br><span class="line">    <span class="comment">#    fastcgi_index  index.php;</span></span><br><span class="line">    <span class="comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span></span><br><span class="line">    <span class="comment">#    include        fastcgi_params;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># deny access to .htaccess files, if Apache's document root</span></span><br><span class="line">    <span class="comment"># concurs with nginx's one</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment">#location ~ /\.ht &#123;</span></span><br><span class="line">    <span class="comment">#    deny  all;</span></span><br><span class="line">    <span class="comment">#&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置代理服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#charset koi8-r;</span></span><br><span class="line">    <span class="comment">#access_log  /var/log/nginx/host.access.log  main;</span></span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root   /usr/share/nginx/html;</span><br><span class="line">        index  index.html index.htm index.php index.asp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#将 /node 代理成 http://localhost:8080</span></span><br><span class="line">    location /node &#123;</span><br><span class="line">     <span class="comment">#代理后重新设置一个请求头，用来覆盖原来的请求头</span></span><br><span class="line">    proxy_set_header host <span class="variable">$host</span>;</span><br><span class="line">        proxy_pass http://localhost:8080/;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>配置完成后就可以将 ip /node 代理成 local host:8080</p><p>还需要修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setsebool -P httpd_can_network_connect 1</span><br></pre></td></tr></table></figure><p>重启服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/sbin/nginx -s reload</span><br></pre></td></tr></table></figure><h3 id="mariadb"><a href="#mariadb" class="headerlink" title="mariadb"></a>mariadb</h3><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install mariadb-server -y</span><br><span class="line">mysql_install_db</span><br></pre></td></tr></table></figure><p>配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/mysql/my-xxx.cng /etc/my.cnf</span><br></pre></td></tr></table></figure><p>启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mariadb start</span><br></pre></td></tr></table></figure><p>添加密码</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -u root password</span><br></pre></td></tr></table></figure><p>修改数据库配置，使其可以远程连接</p><p>进入数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on *.* to root@&apos;%&apos; identified by &apos;123456&apos;;</span><br></pre></td></tr></table></figure><p>这样就可以在本机用数据库管理工具访问数据库</p><h2 id="上传程序"><a href="#上传程序" class="headerlink" title="上传程序"></a>上传程序</h2><h3 id="pm2"><a href="#pm2" class="headerlink" title="pm2"></a>pm2</h3><p><strong>安装 pm2</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -g pm2</span><br></pre></td></tr></table></figure><p><strong>用 pm2 启动服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start xxx.js --name <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>启动 xxx.js 文件 并命名为 test</p><p><strong>查看启动服务列表</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 list</span><br></pre></td></tr></table></figure><p><strong>停止服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 stop 服务名 | id</span><br></pre></td></tr></table></figure><p><strong>从 pm2 中删除服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 delete 服务名 | id</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;CentOS&quot;&gt;&lt;a href=&quot;#CentOS&quot; class=&quot;headerlink&quot; title=&quot;CentOS&quot;&gt;&lt;/a&gt;CentOS&lt;/h1&gt;&lt;h2 id=&quot;上车&quot;&gt;&lt;a href=&quot;#上车&quot; class=&quot;headerlink&quot; title=&quot;上车&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="服务端" scheme="https://zhaozhoa.github.com/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    
    
      <category term="linux" scheme="https://zhaozhoa.github.com/tags/linux/"/>
    
      <category term="pm2" scheme="https://zhaozhoa.github.com/tags/pm2/"/>
    
  </entry>
  
  <entry>
    <title>vue通信&amp;vuex</title>
    <link href="https://zhaozhoa.github.com/2019/05/13/Vue%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1&amp;Vuex/"/>
    <id>https://zhaozhoa.github.com/2019/05/13/Vue数据通信&amp;Vuex/</id>
    <published>2019-05-13T13:24:48.000Z</published>
    <updated>2019-08-23T05:56:12.262Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vue-数据通信"><a href="#vue-数据通信" class="headerlink" title="vue 数据通信"></a>vue 数据通信</h1><h2 id="vue-组件间通信"><a href="#vue-组件间通信" class="headerlink" title="vue 组件间通信"></a>vue 组件间通信</h2><h3 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h3><p><strong>父组件</strong></p><p>父组件在子组件上使用 key=value 的方式向子组件发送信息</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;ListItem v-for=&quot;item in items&quot; :data=&quot;item&quot; str=&quot;aaa&quot;&gt;&lt;/ListItem&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import ListItem from &apos;./list_item&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;&apos;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      items: [</span><br><span class="line">        &#123;name: &apos;aaa&apos;, price: 355, salse: 552&#125;,</span><br><span class="line">        &#123;name: &apos;bbb&apos;, price: 66, salse: 554&#125;,</span><br><span class="line">        &#123;name: &apos;ccc&apos;, price: 22, salse: 66&#125;,</span><br><span class="line">        &#123;name: &apos;ddd&apos;, price: 555, salse: 88&#125;,</span><br><span class="line">        &#123;name: &apos;eee&apos;, price: 15, salse: 22&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;ListItem&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="props-方法-接收-父组件传递的信息"><a href="#props-方法-接收-父组件传递的信息" class="headerlink" title="props 方法 接收 父组件传递的信息"></a>props 方法 接收 父组件传递的信息</h4><ul><li><p>子组件中 使用 <code>proops:[&#39;父组件中传递的key&#39;]</code></p></li><li><p>子组件接收后，就可直接使用父组件传递的信息</p></li></ul><p><strong>子组件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">      &lt;h3&gt;名称：&#123;&#123;data.name&#125;&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;p&gt;价格&#123;&#123;data.price&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;月销：&#123;&#123;data.salse&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;ListItem&apos;,</span><br><span class="line">  props: [&apos;data&apos;],</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      text: &apos;&apos;,</span><br><span class="line">      data2: &#123;&#125;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;,</span><br><span class="line">  mounted () &#123;</span><br><span class="line">    console.log(this.$attrs);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="attrs-接收父组件传递的信息"><a href="#attrs-接收父组件传递的信息" class="headerlink" title="$attrs 接收父组件传递的信息"></a>$attrs 接收父组件传递的信息</h4><p>$attrs 是一个对象，接收的是 子组件中没有通过 props 接收的值，</p><p>如果 通过props 接收了，则用$attrs接收不到</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">      &lt;h3&gt;商品名称:&#123;&#123;data.name&#125;&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;p&gt;价格:&#123;&#123;data.price&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;月销：&#123;&#123;data.salse&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;ListItem&apos;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      data: &#123;&#125;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  mounted () &#123;</span><br><span class="line">    this.data = this.$attrs.data</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="子传父"><a href="#子传父" class="headerlink" title="子传父"></a>子传父</h3><p>父组件向子组件传递自己的方法</p><p><strong>父组件</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    已选中&#123;&#123;count&#125;&#125;件</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">    &lt;ListItem v-for=&quot;item in items&quot; :data=&quot;item&quot; str=&quot;aaa&quot; :add=&quot;addOne&quot; :minus=&quot;minusOne&quot;&gt;&lt;/ListItem&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import ListItem from &apos;./list_item&apos;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;&apos;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      count: 0,</span><br><span class="line">      items: [</span><br><span class="line">        &#123;name: &apos;aaa&apos;, price: 355, salse: 552&#125;,</span><br><span class="line">        &#123;name: &apos;bbb&apos;, price: 66, salse: 554&#125;,</span><br><span class="line">        &#123;name: &apos;ccc&apos;, price: 22, salse: 66&#125;,</span><br><span class="line">        &#123;name: &apos;ddd&apos;, price: 555, salse: 88&#125;,</span><br><span class="line">        &#123;name: &apos;eee&apos;, price: 15, salse: 22&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  components: &#123;ListItem&#125;,</span><br><span class="line"></span><br><span class="line">  methods: &#123;</span><br><span class="line">    addOne () &#123;</span><br><span class="line">      this.count++</span><br><span class="line">    &#125;,</span><br><span class="line">    minusOne () &#123;</span><br><span class="line">      this.count--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>子组件</strong></p><p>子组件公共 $attrs 接收父组件传递的方法，调用这个方法，实现通信</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;li&gt;</span><br><span class="line">      &lt;h3&gt;&lt;input type=&quot;checkbox&quot; v-model=&quot;checked&quot;&gt;商品名称:&#123;&#123;data.name&#125;&#125;&lt;/h3&gt;</span><br><span class="line">      &lt;p&gt;价格:&#123;&#123;data.price&#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;p&gt;月销：&#123;&#123;data.salse&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;ListItem&apos;,</span><br><span class="line">  data () &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      checked: false,</span><br><span class="line">      data: &#123;&#125;</span><br><span class="line">    &#125; </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mounted () &#123;</span><br><span class="line">    this.data = this.$attrs.data</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    checked () &#123;</span><br><span class="line">      if (this.checked) &#123;</span><br><span class="line">      // 子组件调用父组件的方法，实现通信</span><br><span class="line">        this.$attrs.add()</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        this.$attrs.minus()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="axios-和-fetch"><a href="#axios-和-fetch" class="headerlink" title="axios 和 fetch"></a>axios 和 fetch</h2><p>axios 和 fetch 都是 对 xmlhttprequest 的封装</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data () &#123;</span><br><span class="line">   <span class="keyword">return</span> &#123;</span><br><span class="line">     items: []</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><p><a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank" rel="noopener">文档</a></p><p>简单使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入axios</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="comment">// 将其添加到vue的原型对象上</span></span><br><span class="line">Vue.prototype.axios = axios</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> mounted () &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = (<span class="keyword">await</span> <span class="keyword">this</span>.axios.get(<span class="string">'http://localhost:3000/list'</span>)).data</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h3><p>fetch 是官方对 xhmhttprequest  的封装</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API/Using_Fetch" target="_blank" rel="noopener">文档</a></p><p>简单使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> mounted () &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.items = <span class="keyword">await</span> (<span class="keyword">await</span> fetch(<span class="string">'http://localhost:3000/list'</span>)).json()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>用 <code>(await fetch(&#39;http://localhost:3000/list&#39;)).json()</code>  获取请求数据，返回的是一个 Promise 对象， 所以还需要 await一下 </p><h2 id="vuex-统一状态管理"><a href="#vuex-统一状态管理" class="headerlink" title="vuex 统一状态管理"></a>vuex 统一状态管理</h2><h3 id="Vuex-简介"><a href="#Vuex-简介" class="headerlink" title="Vuex 简介"></a>Vuex 简介</h3><h4 id="什么是Vuex"><a href="#什么是Vuex" class="headerlink" title="什么是Vuex"></a>什么是Vuex</h4><p>Vuex 是专门为 Vue.js 应用程序开发的状态管理模式</p><h4 id="为什么要用Vuex"><a href="#为什么要用Vuex" class="headerlink" title="为什么要用Vuex"></a>为什么要用Vuex</h4><p>当我们构建一个中大型的单页面应用程序时，Vuex 可以更好的帮助我们在组件外部统一管理状态</p><h3 id="Vuex-的核心"><a href="#Vuex-的核心" class="headerlink" title="Vuex 的核心"></a>Vuex 的核心</h3><h4 id="state"><a href="#state" class="headerlink" title="state"></a>state</h4><ul><li>State 是唯一的数据源</li><li>单一的状态树</li></ul><p><code>组件中可以用 this.$store.state.[所要获取数据]</code></p><p>用组件的 computed 来监听 state 里面的值的变化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    count () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><p>当 vuex 中的count 改变，会触发computed 中的 count 从而对数据进行更新</p><h4 id="mutations"><a href="#mutations" class="headerlink" title="mutations"></a>mutations</h4><ul><li>更改 Vuex 中 store 中的状态唯一的方法就是提交 mutation</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    count: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">`mutations`</span>: &#123;</span><br><span class="line">    increment(state) &#123;</span><br><span class="line">      <span class="comment">// 只能用 mutations 改变  </span></span><br><span class="line">      state.conunt++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>组件中触发vuex</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$store.commit(<span class="string">'increment'</span>)</span><br></pre></td></tr></table></figure><p><code>直接掉用 mutations 里面的方法 改变 state 里面的值</code></p><h4 id="actions"><a href="#actions" class="headerlink" title="actions"></a>actions</h4><ul><li>actions 提交的是 mutation， 而不是直接变更状态</li><li>actions 可以包含任意的异步操作</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state:&#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    increment (state) &#123;</span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">`actions`</span>: &#123;</span><br><span class="line">    increment (context) &#123;</span><br><span class="line">      context.commit(<span class="string">'increment'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>组件中触发vuex</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.dispatch(<span class="string">'increment'</span>)</span><br></pre></td></tr></table></figure><p><code>先触发 actions 里面的方法，再触发 mutations 的方法，修改 state 里面的值</code></p><h4 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h4><ul><li>通过 getters 可以派生出一些新的状态</li></ul><p>如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    todos: [</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">1</span>;,<span class="attr">texi</span>:<span class="string">'...'</span>,<span class="attr">done</span>:<span class="literal">true</span>&#125;,</span><br><span class="line">      &#123;<span class="attr">id</span>: <span class="number">2</span>;,<span class="attr">texi</span>:<span class="string">'...'</span>,<span class="attr">done</span>:<span class="literal">false</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line">    doneTodos: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.done)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h4><ul><li>面对复杂的应用程序，当管理的状态比较多时，需要将Vuex 的store 对象分割成模块（modules），每一个模块都是一个store对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入两个子模块</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">'./user'</span></span><br><span class="line"><span class="keyword">import</span> article <span class="keyword">from</span> <span class="string">'./article'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用子模块</span></span><br><span class="line">modules: &#123;</span><br><span class="line">    user,</span><br><span class="line">    article</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><strong>user模块</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    name: <span class="string">'zhao'</span>,</span><br><span class="line">    age: <span class="number">22</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    setAge (state, arg) &#123;</span><br><span class="line">      state.age = arg</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    setAge (&#123;commit&#125;, arg) &#123;</span><br><span class="line">      commit(<span class="string">'setAge'</span>, arg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  getters: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li><p>在组件中获取模块中的 state 需要 <code>this.$store.state.[模块名].[state属性]</code></p></li><li><p>用dispatch可以直接触发 子模块的 actions 的方法</p><p>如：<code>this.$store.dispatch(&#39;setAge&#39;, 12)</code></p></li><li><p>如果子模块和父模块中的 actions 中用相同的方法，则这些方法全部触发</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;vue-数据通信&quot;&gt;&lt;a href=&quot;#vue-数据通信&quot; class=&quot;headerlink&quot; title=&quot;vue 数据通信&quot;&gt;&lt;/a&gt;vue 数据通信&lt;/h1&gt;&lt;h2 id=&quot;vue-组件间通信&quot;&gt;&lt;a href=&quot;#vue-组件间通信&quot; class=&quot;he
      
    
    </summary>
    
      <category term="前端框架" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="vue" scheme="https://zhaozhoa.github.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>VueRouter</title>
    <link href="https://zhaozhoa.github.com/2019/04/16/VueRouter/"/>
    <id>https://zhaozhoa.github.com/2019/04/16/VueRouter/</id>
    <published>2019-04-16T09:57:46.000Z</published>
    <updated>2019-08-23T05:56:43.613Z</updated>
    
    <content type="html"><![CDATA[<h1 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h1><p><code>前端路由的本质是锚点值改变，页面不跳转，但改变 innerHtml的内容</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/login"</span>&gt;</span>点我登陆<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#/register"</span>&gt;</span>点我注册<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> div = <span class="built_in">document</span>.querySelector(<span class="string">'div'</span>)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.addEventListener(<span class="string">'hashchange'</span>,()=&gt;&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">switch</span>(location.hash) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">case</span> <span class="string">'#/login'</span>:</span></span><br><span class="line"><span class="xml">        div.innerHTML = '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>登陆<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>'</span></span><br><span class="line"><span class="javascript">        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">case</span> <span class="string">'#/register'</span>:</span></span><br><span class="line"><span class="xml">        div.innerHTML = '<span class="tag">&lt;<span class="name">h1</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>'</span></span><br><span class="line"><span class="javascript">        <span class="keyword">break</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125; )</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>路由其实是由 hash 完成的（基于hashchange事件）</li><li>监听 url 上锚点（#xxx）的变化改变页面的内容（锚点和 hash 一回事）</li></ul><h2 id="vue-路由"><a href="#vue-路由" class="headerlink" title="vue 路由"></a>vue 路由</h2><p><strong>路由使用步骤：</strong></p><ol><li>引入vue-router路由（插件）对象 </li><li>安装插件</li><li>创建路由对象</li><li>配置路由对象</li><li>指定路由改变的位置</li><li>将配置好的 路由对象 关联到 vue 实例中</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"app"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="./</span>node_modules/vue/dist/vue.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;!-- 1. 引入vue-router路由（插件）对象 --&gt;</span></span><br><span class="line"><span class="string">&lt;script src="</span>./node_modules/vue-router/dist/vue-router.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">  // 2. 安装插件</span></span><br><span class="line"><span class="string">  Vue.use(VueRouter);</span></span><br><span class="line"><span class="string">  // 需要显示的组件</span></span><br><span class="line"><span class="string">  let login = &#123;</span></span><br><span class="line"><span class="string">    template:`&lt;div&gt;</span></span><br><span class="line"><span class="string">    登陆</span></span><br><span class="line"><span class="string">    &lt;/div&gt;`</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  let register = &#123;</span></span><br><span class="line"><span class="string">    template:`&lt;div&gt;</span></span><br><span class="line"><span class="string">    注册&lt;/div&gt;`</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  // 3.创建路由对象</span></span><br><span class="line"><span class="string">  let router = new VueRouter(&#123;</span></span><br><span class="line"><span class="string">      // 4. 配置路由对象</span></span><br><span class="line"><span class="string">      routes:[</span></span><br><span class="line"><span class="string">        &#123; path: '/login', component: login &#125;,</span></span><br><span class="line"><span class="string">        &#123; path: '/register', component: register &#125;</span></span><br><span class="line"><span class="string">      ]</span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // 5. 指定路由改变的位置</span></span><br><span class="line"><span class="string">  let app = &#123;</span></span><br><span class="line"><span class="string">    template:</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;router-link to="</span>/login<span class="string">"&gt;注册&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">      &lt;router-link to="</span>/register<span class="string">"&gt;登陆&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">      &lt;router-view&gt;&lt;/router-view&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  // 6. 将配置好的 路由对象 关联到 vue 实例中</span></span><br><span class="line"><span class="string">  new Vue(&#123;</span></span><br><span class="line"><span class="string">    el:'#app',</span></span><br><span class="line"><span class="string">    components: &#123;</span></span><br><span class="line"><span class="string">      app</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    router,</span></span><br><span class="line"><span class="string">    template:'&lt;app/&gt;',</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><ul><li>vue中的路由是切换组件，并不是页面切换。</li><li>router-link 其实就是一个 a 标签</li><li>router-view 是一个占位符，需要路由的地方就需要 router-view</li></ul><h3 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h3><ul><li>用 <code>$route.params</code> 获取 路由参数 /:123</li><li>用 <code>$route.query</code> 获取 问号参数 /a=123</li><li>用 <code>beforRouteUpdate(to, from, next)</code>监听路由变化</li><li>也可以用 <code>watch</code> 监听路由变化</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"div1"</span>&gt;</span><br><span class="line">    &lt;router-link to=<span class="string">"/article/1"</span>&gt;文章<span class="number">1</span>&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp">    &lt;router-link to="/</span>article/<span class="number">5</span><span class="string">"&gt;文章2&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">    &lt;router-link to="</span>/article/<span class="number">10</span><span class="string">"&gt;文章3&lt;/router-link&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;router-view&gt;&lt;/router-view&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">  let router = new VueRouter(&#123;</span></span><br><span class="line"><span class="string">    routes: [&#123;</span></span><br><span class="line"><span class="string">      path: '/article/:id',</span></span><br><span class="line"><span class="string">      component: &#123;</span></span><br><span class="line"><span class="string">        // $route 记录当前路由信息</span></span><br><span class="line"><span class="string">        template: '&lt;div&gt;文章的id：&#123;&#123; $route.params.id &#125;&#125;&lt;/div&gt;',</span></span><br><span class="line"><span class="string">        beforeRouteUpdate(to, from, next)&#123;</span></span><br><span class="line"><span class="string">          if (confirm('如果离开，修改不会保存')) &#123;</span></span><br><span class="line"><span class="string">            next();</span></span><br><span class="line"><span class="string">          &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;],</span></span><br><span class="line"><span class="string">  &#125;);</span></span><br><span class="line"><span class="string">  new Vue(&#123;</span></span><br><span class="line"><span class="string">    el: '#div1',</span></span><br><span class="line"><span class="string">    router,</span></span><br><span class="line"><span class="string">    watch: &#123;</span></span><br><span class="line"><span class="string">      // 监听路由变化</span></span><br><span class="line"><span class="string">      $route(newVal, oldVal) &#123;</span></span><br><span class="line"><span class="string">        console.log('从', oldVal);</span></span><br><span class="line"><span class="string">        console.log('变到', newVal);</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h3><ul><li><p>给路由对象一个名称，相当于一个存储路由路径的变量</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// name 属性的值相当于一个变量，存储了路由的来路径</span></span><br><span class="line">       &#123; <span class="attr">name</span>:<span class="string">'login'</span>, <span class="attr">path</span>: <span class="string">'/login'</span>, <span class="attr">component</span>: login &#125;,</span><br><span class="line">       &#123; <span class="attr">name</span>:<span class="string">'register'</span>, <span class="attr">path</span>: <span class="string">'/register'</span>, <span class="attr">component</span>: register &#125;</span><br></pre></td></tr></table></figure></li><li><p>在 router-link 的 to 属性中通过对象描述这个规则</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123;name: 'login'&#125;"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123;name: 'register'&#125;"</span>&gt;</span>登陆<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="路由嵌套"><a href="#路由嵌套" class="headerlink" title="路由嵌套"></a>路由嵌套</h3><p>路由包含子路由，视图（router-view）包含变化的子视图 </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./node_modules/vue/dist/vue.js</span></span></span><br><span class="line"><span class="tag"><span class="string">  "</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./node_modules/vue-router/dist/vue-router.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> login = &#123;</span></span><br><span class="line"><span class="xml">        template: `<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">        login路由，下面是子路由显示的内容</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> vip = &#123;</span></span><br><span class="line"><span class="undefined">        template: </span></span><br><span class="line"><span class="undefined">        `</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">          vip 登陆</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">        `</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">       <span class="keyword">let</span> register = &#123;</span></span><br><span class="line"><span class="xml">       template: `<span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`</span></span><br><span class="line"><span class="undefined">       &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> app = &#123;</span></span><br><span class="line"><span class="undefined">        template: </span></span><br><span class="line"><span class="undefined">        `</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123; name:'vip'&#125;"</span>&gt;</span>去vip<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">        `,</span></span><br><span class="line"><span class="undefined">        </span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> router = <span class="keyword">new</span> VueRouter(&#123;</span></span><br><span class="line"><span class="undefined">        routes:[</span></span><br><span class="line"><span class="javascript">         &#123; <span class="attr">path</span>: <span class="string">'/login'</span>, <span class="attr">name</span>: <span class="string">'login'</span>, <span class="attr">component</span>: login,</span></span><br><span class="line"><span class="undefined">           children: [</span></span><br><span class="line"><span class="javascript">             &#123; <span class="attr">path</span>: <span class="string">'vip'</span>, <span class="attr">name</span>: <span class="string">'vip'</span>, <span class="attr">component</span>: vip &#125;</span></span><br><span class="line"><span class="undefined">           ]</span></span><br><span class="line"><span class="undefined">         &#125;</span></span><br><span class="line"><span class="undefined">        ]</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">      Vue.use(VueRouter)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">      el:<span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">      router,</span></span><br><span class="line"><span class="undefined">      components: &#123;</span></span><br><span class="line"><span class="undefined">        app</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="javascript">      template: <span class="string">'&lt;app/&gt;'</span></span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>子路由只需要在父级路由中加上一个 children 的数组，里面配置自己的路由</li></ul><h3 id="meta"><a href="#meta" class="headerlink" title="meta"></a>meta</h3><p>meta 是对于路由规则是否需要验证权限的配置</p><ul><li><p>路由对象中，和 name 属性同级</p></li><li><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">meta:&#123;<span class="attr">isChicked</span>:<span class="literal">true</span>&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"app"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="./</span>node_modules/vue/dist/vue.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script src="</span>./node_modules/vue-router/dist/vue-router.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">  let isLogin = false</span></span><br><span class="line"><span class="string">  Vue.use(VueRouter);</span></span><br><span class="line"><span class="string">  let login = &#123;</span></span><br><span class="line"><span class="string">    template: `&lt;div&gt;</span></span><br><span class="line"><span class="string">    登陆界面，不登陆，不显示音乐界面</span></span><br><span class="line"><span class="string">    &lt;/div&gt;`,</span></span><br><span class="line"><span class="string">    // 组件创建之后</span></span><br><span class="line"><span class="string">    created () &#123;</span></span><br><span class="line"><span class="string">      isLogin = true</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  let music = &#123;</span></span><br><span class="line"><span class="string">    template: `&lt;div&gt;</span></span><br><span class="line"><span class="string">    音乐界面&lt;/div&gt;`</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  let router = new VueRouter()</span></span><br><span class="line"><span class="string">    // 追加路由对象</span></span><br><span class="line"><span class="string">    router.addRoutes([</span></span><br><span class="line"><span class="string">      // 默认首页路由</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        path: '/',</span></span><br><span class="line"><span class="string">        redirect: &#123;name: 'login'&#125;</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        name:'login',</span></span><br><span class="line"><span class="string">        path: '/login',</span></span><br><span class="line"><span class="string">        component: login</span></span><br><span class="line"><span class="string">      &#125;,</span></span><br><span class="line"><span class="string">      &#123;</span></span><br><span class="line"><span class="string">        name:'music',</span></span><br><span class="line"><span class="string">        path: '/music',</span></span><br><span class="line"><span class="string">        component: music,</span></span><br><span class="line"><span class="string">        // 路由守卫（权限控制）</span></span><br><span class="line"><span class="string">        meta: &#123; isChick:true &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">      </span></span><br><span class="line"><span class="string">    ])</span></span><br><span class="line"><span class="string">    router.beforeEach((to, from, next) =&gt; &#123;</span></span><br><span class="line"><span class="string">    //  to: 要去的路由对象</span></span><br><span class="line"><span class="string">    //  from： 从哪里去的 路由对象</span></span><br><span class="line"><span class="string">    //  next() 继续执行</span></span><br><span class="line"><span class="string">      if (!to.meta.isChick) &#123;</span></span><br><span class="line"><span class="string">        next()</span></span><br><span class="line"><span class="string">      &#125;else&#123;</span></span><br><span class="line"><span class="string">        if (isLogin) &#123;</span></span><br><span class="line"><span class="string">          next()</span></span><br><span class="line"><span class="string">        &#125; else&#123;</span></span><br><span class="line"><span class="string">          // 重定向</span></span><br><span class="line"><span class="string">          next(&#123;name: 'login'&#125;)</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // 5. 指定路由改变的位置</span></span><br><span class="line"><span class="string">  let app = &#123;</span></span><br><span class="line"><span class="string">    template: `</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;router-link :to="</span>&#123;<span class="attr">name</span>:<span class="string">'login'</span>&#125;<span class="string">"&gt;登陆&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">      &lt;router-link :to="</span>&#123;<span class="attr">name</span>:<span class="string">'music'</span>&#125;<span class="string">"&gt;音乐&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">      &lt;router-view&gt;&lt;/router-view&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  // 6. 将配置好的 路由对象 关联到 vue 实例中</span></span><br><span class="line"><span class="string">  new Vue(&#123;</span></span><br><span class="line"><span class="string">    el: '#app',</span></span><br><span class="line"><span class="string">    components: &#123;</span></span><br><span class="line"><span class="string">      app</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    router,</span></span><br><span class="line"><span class="string">    template: '&lt;app/&gt;',</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="编程导航"><a href="#编程导航" class="headerlink" title="编程导航"></a>编程导航</h3><ul><li>跳转到指定锚点，并显示页面 </li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$router.push&#123;<span class="attr">name</span>:<span class="string">'xxx'</span>,<span class="attr">query</span>:&#123;<span class="attr">id</span>:<span class="number">1</span>&#125;,<span class="attr">params</span>:&#123;<span class="attr">name</span>:<span class="string">'abc'</span>&#125;&#125;</span><br></pre></td></tr></table></figure><ul><li>根据历史记录前进或后退</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$router.go(<span class="number">1</span> | <span class="number">-1</span>)</span><br></pre></td></tr></table></figure><p>​    1 前进，-1 后退</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;路由&quot;&gt;&lt;a href=&quot;#路由&quot; class=&quot;headerlink&quot; title=&quot;路由&quot;&gt;&lt;/a&gt;路由&lt;/h1&gt;&lt;p&gt;&lt;code&gt;前端路由的本质是锚点值改变，页面不跳转，但改变 innerHtml的内容&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;h
      
    
    </summary>
    
      <category term="前端框架" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="vue" scheme="https://zhaozhoa.github.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>初窥vue</title>
    <link href="https://zhaozhoa.github.com/2019/04/14/%E5%88%9D%E7%AA%A5vue/"/>
    <id>https://zhaozhoa.github.com/2019/04/14/初窥vue/</id>
    <published>2019-04-14T03:50:07.000Z</published>
    <updated>2019-08-23T06:11:25.691Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h1><h2 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h2><h3 id="一向"><a href="#一向" class="headerlink" title="一向"></a>一向</h3><p>js 内存属性的改变，影响页面的变化 </p><h3 id="二向"><a href="#二向" class="headerlink" title="二向"></a>二向</h3><p>页面的改变影响 js 内存的改变 </p><h2 id="起步"><a href="#起步" class="headerlink" title="起步"></a>起步</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"node_modules/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 启动 Vue</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// vue 监管的区域</span></span></span><br><span class="line"><span class="javascript">    el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="javascript">    <span class="comment">// dom 结构</span></span></span><br><span class="line"><span class="xml">    template: '<span class="tag">&lt;<span class="name">div</span>&gt;</span>大家好 &#123;&#123; text &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>', </span></span><br><span class="line"><span class="javascript">    <span class="comment">// 存放变量</span></span></span><br><span class="line"><span class="undefined">    data()&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        text: <span class="string">'hello vue'</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="vue-的常见指令"><a href="#vue-的常见指令" class="headerlink" title="vue 的常见指令"></a>vue 的常见指令</h2><ul><li><p>v-text ：</p><p>是元素的innerText 只能在双标签中使用</p></li><li><p>v-html ：</p><p>是元素的 innerHTML 不能有 </p></li><li><p>v-if ：</p><p>元素是否移除（删除元素）</p></li><li><p>v-show  ：</p><p>元素是否显示或隐藏</p></li><li><p>v-model：</p><p>双向数据绑定（内存js和页面的变化相互影响）</p></li><li><p>v-bind:</p><p>单向数据绑定（内存js 影响页面）</p><p>多用于属性绑定</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">v-bind:title = <span class="string">"txt"</span></span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line">:title = <span class="string">"txt"</span></span><br></pre></td></tr></table></figure><ul><li><p>v-on：</p><p>用于事件绑定</p><p>可以简写 @:</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">        el: <span class="string">'#div1'</span>,</span><br><span class="line">        data: &#123;</span><br><span class="line">          cont: <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        methods:&#123;</span><br><span class="line">          fnClick() &#123;</span><br><span class="line">            <span class="keyword">this</span>.cont ++</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"div1"</span>&gt;</span><br><span class="line">    &#123;&#123; cont &#125;&#125; &lt;br&gt;</span><br><span class="line">    &lt;span v-on:click = <span class="string">"fnClick"</span>&gt;点击试试&lt;<span class="regexp">/span&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure><ul><li><p>v-for:</p><p>用于循环</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> &lt;script&gt;</span><br><span class="line">   <span class="built_in">window</span>.onload = <span class="function"><span class="params">()</span>=&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">       el: <span class="string">'#div1'</span>,</span><br><span class="line">       data: &#123;</span><br><span class="line">         users: [</span><br><span class="line">           &#123; <span class="attr">id</span>:<span class="number">11</span> ,<span class="attr">name</span>: <span class="string">'张三'</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;,</span><br><span class="line">           &#123; <span class="attr">id</span>:<span class="number">13</span> ,<span class="attr">name</span>: <span class="string">'张三'</span>, <span class="attr">age</span>: <span class="number">19</span> &#125;,</span><br><span class="line">           &#123; <span class="attr">id</span>:<span class="number">18</span> ,<span class="attr">name</span>: <span class="string">'张三'</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;,</span><br><span class="line">           &#123; <span class="attr">id</span>:<span class="number">120</span>, <span class="attr">name</span>: <span class="string">'张三'</span>, <span class="attr">age</span>: <span class="number">21</span> &#125;,</span><br><span class="line">         ]</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"div1"</span>&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">    <span class="comment">//用 key 绑定 数据中一个不会变的值，这样可以将 每一条数据和相应的视图所对应，在数据发生变化的时候，可以直接修改这个视图</span></span><br><span class="line">      &lt;li v-<span class="keyword">for</span>=<span class="string">"item,index in users"</span> :key=<span class="string">"users.id"</span>&gt;</span><br><span class="line">        &#123;&#123; index &#125;&#125;姓名: &#123;&#123;item.name&#125;&#125;, 年龄： &#123;&#123; item.age &#125;&#125;</span><br><span class="line">      &lt;<span class="regexp">/li&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/u</span>l&gt;</span><br><span class="line">  &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br></pre></td></tr></table></figure><h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><h3 id="组件的使用"><a href="#组件的使用" class="headerlink" title="组件的使用"></a>组件的使用</h3><ul><li><p>第一步：创建组件</p></li><li><p>第二步：声明组件（components)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">components:&#123;<span class="string">'组件名'</span>，组件对象&#125;</span><br></pre></td></tr></table></figure></li><li><p>第三步：使用组件（template）</p><ul><li>组件需要放在一个<div></div>标签下</li><li>可以通过&lt;组件名&gt;&lt;/组件名&gt;使用</li><li>也可以通过&lt;组件名/&gt;使用</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"app"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="./</span>node_modules/vue/dist/vue.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">  // 创建子组件</span></span><br><span class="line"><span class="string">  let MyHeader = &#123;</span></span><br><span class="line"><span class="string">    template: </span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string">      &lt;div&gt; 我是header组件 &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  let MyFooter = &#123;</span></span><br><span class="line"><span class="string">    template: </span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string">      &lt;div&gt; 我是footer组件 &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  // 入口组件(父组件)</span></span><br><span class="line"><span class="string">  let App = &#123;</span></span><br><span class="line"><span class="string">    // 声明使用子组件</span></span><br><span class="line"><span class="string">    components: &#123;</span></span><br><span class="line"><span class="string">      'my-header': MyHeader,</span></span><br><span class="line"><span class="string">      'my-footer': MyFooter</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    // 使用子组件</span></span><br><span class="line"><span class="string">    template:</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;my-header/&gt;</span></span><br><span class="line"><span class="string">        &lt;my-footer/&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  new Vue(&#123;</span></span><br><span class="line"><span class="string">    el: '#app',</span></span><br><span class="line"><span class="string">    // 声明使用父组件</span></span><br><span class="line"><span class="string">    components: &#123;</span></span><br><span class="line"><span class="string">      app: App</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    // 使用父组件</span></span><br><span class="line"><span class="string">    template: '&lt;app/&gt;'</span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="父传子"><a href="#父传子" class="headerlink" title="父传子"></a>父传子</h3><ul><li>父组件使用子组件时通过属性传递</li><li>子组件要声明 props[‘属性名’] 来接收</li><li>子组件收到父组件后在 template 中直接使用</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id=<span class="string">"app"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="./</span>node_modules/vue/dist/vue.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // 创建子组件</span></span><br><span class="line"><span class="string">  let Son = &#123;</span></span><br><span class="line"><span class="string">    template: `</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      接收到父组件的数据是 &#123;&#123; title &#125;&#125;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;1&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      &lt;h1&gt;2&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      &lt;ul&gt;</span></span><br><span class="line"><span class="string">        &lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">      &lt;/ul&gt;</span></span><br><span class="line"><span class="string">      &lt;button&gt;改变显示&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt; `,</span></span><br><span class="line"><span class="string">    // 声明接收参数</span></span><br><span class="line"><span class="string">    props:['title']</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  // 声明入口组件</span></span><br><span class="line"><span class="string">  // 父向子传递， 就是 v-bind 给元素的属性赋值</span></span><br><span class="line"><span class="string">  let App = &#123;</span></span><br><span class="line"><span class="string">    // 声明子组件</span></span><br><span class="line"><span class="string">    components: &#123;</span></span><br><span class="line"><span class="string">      son:Son</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    template: `</span></span><br><span class="line"><span class="string">    &lt;h1&gt;</span></span><br><span class="line"><span class="string">      &lt;!-- 父传子--&gt;</span></span><br><span class="line"><span class="string">      &lt;son :title="</span>xxx<span class="string">"&gt;&lt;/son&gt;</span></span><br><span class="line"><span class="string">    我是入口组件</span></span><br><span class="line"><span class="string">    &lt;/h1&gt;`,</span></span><br><span class="line"><span class="string">    data()&#123;</span></span><br><span class="line"><span class="string">      return &#123;</span></span><br><span class="line"><span class="string">        xxx: '我是 xxx 数据'</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  new Vue(&#123;</span></span><br><span class="line"><span class="string">    el: '#app',</span></span><br><span class="line"><span class="string">    // 声明要使用的组件</span></span><br><span class="line"><span class="string">    components: &#123;</span></span><br><span class="line"><span class="string">      app: App</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    template: '&lt;app/&gt;',//入口组件</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><h3 id="注册全局组件"><a href="#注册全局组件" class="headerlink" title="注册全局组件"></a>注册全局组件</h3><p><strong>应用场景：</strong>将公共组件注册成为全局组件，在使用全局组件时候不用声明，减少代码冗余</p><p><strong>写法：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">'组件名'</span>，组件对象)</span><br></pre></td></tr></table></figure><p>例如：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 注册公共的全局组件</span></span><br><span class="line"> Vue.component(<span class="string">'my-btn'</span>,&#123;</span><br><span class="line">   template:</span><br><span class="line">   <span class="string">`</span></span><br><span class="line"><span class="string">     &lt;button&gt; 全局组件 button &lt;/button&gt;</span></span><br><span class="line"><span class="string">   `</span></span><br><span class="line"> &#125;)</span><br><span class="line"> <span class="comment">// 创建子组件</span></span><br><span class="line"> <span class="keyword">let</span> MyHeader = &#123;</span><br><span class="line">   template: </span><br><span class="line">   <span class="string">`</span></span><br><span class="line"><span class="string">     &lt;div&gt; </span></span><br><span class="line"><span class="string">       我是header组件 </span></span><br><span class="line"><span class="string">       &lt;my-btn/&gt;</span></span><br><span class="line"><span class="string">     &lt;/div&gt;</span></span><br><span class="line"><span class="string">   `</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>在子组件中直接使用 my-btn 组件</p><h3 id="slot"><a href="#slot" class="headerlink" title="slot"></a>slot</h3><p><strong>作用：</strong>父元素向子元素传递 dom 节点</p><p><strong>用法：</strong>通过 vue 提供的 <slot></slot></p><p><strong>例如</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./node_modules/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="xml">  // <span class="tag">&lt;<span class="name">slot</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span> 是一个占位符，具体内容可以在使用时自定义</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> myLi = &#123;</span></span><br><span class="line"><span class="undefined">    template: `</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"one"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"two"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span>`</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 将 myLi 注册成为全局组件</span></span></span><br><span class="line"><span class="javascript">  Vue.component(<span class="string">'my-li'</span>, myLi)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> app = &#123;</span></span><br><span class="line"><span class="undefined">    template:</span></span><br><span class="line"><span class="undefined">    `</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="undefined">        第一个slot</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">my-li</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">slot</span>=<span class="string">"one"</span>&gt;</span>1<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">my-li</span>&gt;</span></span></span><br><span class="line"><span class="undefined">        第二个slot</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">my-li</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">h1</span> <span class="attr">slot</span>=<span class="string">"two"</span>&gt;</span>2<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">my-li</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>  </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">    `</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      app</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    template: <span class="string">'&lt;app/&gt;'</span></span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><slot></slot>标签可以有多个</li><li>slot 有一个name 属性，用来作为标识</li><li>用其他元素填充 <slot></slot>时候，需要给这个元素加一个 slot 属性，属性的值要和name 的属性值相同，这样此元素可以填充对应的<slot></slot></li></ul><h3 id="组件的生命周期"><a href="#组件的生命周期" class="headerlink" title="组件的生命周期"></a>组件的生命周期</h3><ul><li><p>beforeCreate 和 created</p><ul><li>beforeCreate：表示：在组件创建之前</li><li>created：组件创建之后<ul><li>created 可以操作数据，实现 vue -&gt; 页面的影响</li><li>通常用来 发起 ajax 请求</li></ul></li><li>使用该组件就会触发以上的事件函数（钩子函数）</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./node_modules/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> test = &#123;</span></span><br><span class="line"><span class="undefined">    template: </span></span><br><span class="line"><span class="undefined">    `</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">      我是 test 组件</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">    `,</span></span><br><span class="line"><span class="undefined">    data () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        text:<span class="string">'zhao'</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined">    beforeCreate () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.text);  <span class="comment">//undefined</span></span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    created () &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.text);  <span class="comment">//zhao</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">let</span> app = &#123;</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      test</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="undefined">    template: </span></span><br><span class="line"><span class="undefined">    `</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">test</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="undefined">    `</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">    el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">    components: &#123;</span></span><br><span class="line"><span class="undefined">      app</span></span><br><span class="line"><span class="undefined">    &#125;,</span></span><br><span class="line"><span class="javascript">    template: <span class="string">'&lt;app/&gt;'</span></span></span><br><span class="line"><span class="undefined">  &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>beforeMount 和 Mounted</p><ul><li>beforeMount：vue 还没有装载的组件的 dom</li><li>Mounted：vue 装载后的组件后的 dom</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  beforeMount () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">document</span>.body.innerHTML);</span><br><span class="line">    <span class="comment">//没有装载的组件的 dom </span></span><br><span class="line">    <span class="comment">// &lt;div id="app"&gt;&lt;/div&gt;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// vue 装载数据到 dom 之后</span></span><br><span class="line">  mounted () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">document</span>.body.innerHTML);</span><br><span class="line">    <span class="comment">//装载后的组件后的 dom </span></span><br><span class="line">    <span class="comment">// &lt;div&gt;</span></span><br><span class="line">    <span class="comment">//   &lt;div&gt;</span></span><br><span class="line">    <span class="comment">//     我是 test 组件</span></span><br><span class="line">    <span class="comment">//   &lt;/div&gt;</span></span><br><span class="line">    <span class="comment">// &lt;/div&gt;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>beforeUpdate 和 updated</p><ul><li>beforeUpdate：基于数据页面数据改变之前的 dom</li><li>updated：页面数据改变后 dom</li></ul></li><li><p>beforeDestroy 和 destroyed</p><ul><li><p>beforeDestroy：组件对象销毁之前</p></li><li><p>destroyed：组件对象销毁之后</p></li><li><p>以上的两个事件，必须和 父组件的 v-if false 配合使用4</p></li><li><p>销毁，最终都是做一些其他功能的释放，比如销毁之前将数据保存到localStorage</p></li><li><p>频繁发销毁和创建组件不利于页面的渲染，vue 中 提供了<keep-alive></keep-alive>将销毁的组件包裹，这样可以控制组件的激活和停用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">template: </span><br><span class="line">    <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div&gt;</span></span><br><span class="line"><span class="string">      &lt;keep-alive&gt;</span></span><br><span class="line"><span class="string">        &lt;test v-if="isExist"&gt;&lt;/test&gt;</span></span><br><span class="line"><span class="string">      &lt;/keep-alive&gt;</span></span><br><span class="line"><span class="string">      &lt;button @click="isExist=!isExist&gt;切换&lt;/button&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p>activated 和 deactivated</p><ul><li>activated：用于判断组件是否被激活</li><li>deactivated：用于判断组件是否停用</li></ul></li></ul><h2 id="过滤器（filter）"><a href="#过滤器（filter）" class="headerlink" title="过滤器（filter）"></a>过滤器（filter）</h2><ul><li>filter 全局过滤器</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.filter(<span class="string">'过滤器名'</span>,<span class="string">'过滤方式'</span>)</span><br></pre></td></tr></table></figure><ul><li>filters 组件自己的过滤器</li></ul><p>反转字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=<span class="string">"app"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;script src="./</span>node_modules/vue/dist/vue.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">  let app = &#123;</span></span><br><span class="line"><span class="string">    template:</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;input type="</span>text<span class="string">" v-model="</span>myText<span class="string">" /&gt;</span></span><br><span class="line"><span class="string">&lt;!-- 使用过滤器， 接收一个 myText 过滤后的值 --&gt;</span></span><br><span class="line"><span class="string">        &#123;&#123; myText | reverse('你好') &#125;&#125;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `,</span></span><br><span class="line"><span class="string">    data() &#123;</span></span><br><span class="line"><span class="string">      return &#123; myText: ''&#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    methods: &#123;</span></span><br><span class="line"><span class="string">      fn() &#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    //设置过滤器</span></span><br><span class="line"><span class="string">    filters: &#123;</span></span><br><span class="line"><span class="string">      //第一个参数为 myText 的值， 第二个为使用 reverse 传入的</span></span><br><span class="line"><span class="string">      reverse(oldVal, params) &#123;</span></span><br><span class="line"><span class="string">        return params + ':' + oldVal.split('').reverse().join('')</span></span><br><span class="line"><span class="string">      &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">  new Vue(&#123;</span></span><br><span class="line"><span class="string">    el:'#app',</span></span><br><span class="line"><span class="string">    components:&#123;</span></span><br><span class="line"><span class="string">      app</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    template: '&lt;app/&gt;'</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">  &#125;)</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><ul><li>跟 component 和 components 类似</li></ul><h2 id="监听（watch）"><a href="#监听（watch）" class="headerlink" title="监听（watch）"></a>监听（watch）</h2><h3 id="基本监听"><a href="#基本监听" class="headerlink" title="基本监听"></a>基本监听</h3><p>只能监听基本数据类型，</p><ul><li>因为简单数据类型的变量指向的是内存中的数据，</li><li>而而复杂数据类型指向的是其在内存中的地址。</li><li>复杂类型改变其地址不变，所以监听不到</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">""</span> <span class="attr">v-model</span>=<span class="string">"a"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.onload = <span class="function"><span class="params">()</span> =&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        el: <span class="string">'#div1'</span>,</span></span><br><span class="line"><span class="undefined">        data: &#123;</span></span><br><span class="line"><span class="javascript">          a: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="javascript">        <span class="comment">// watch 用于监听变化，</span></span></span><br><span class="line"><span class="undefined">        watch: &#123;</span></span><br><span class="line"><span class="javascript">          <span class="comment">// 第一个为 改变后的值，第二个为改变前的值</span></span></span><br><span class="line"><span class="undefined">          a(newVal, oldVal)&#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="string">`a从<span class="subst">$&#123;oldVal&#125;</span>变成<span class="subst">$&#123;newVal&#125;</span>`</span>);</span></span><br><span class="line"><span class="undefined">            </span></span><br><span class="line"><span class="undefined">          &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="复杂监听"><a href="#复杂监听" class="headerlink" title="复杂监听"></a>复杂监听</h3><p>可以监听到 复杂数据类型的改变</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">let</span> app = &#123;</span><br><span class="line">    template: </span><br><span class="line">    <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;div&gt;</span></span><br><span class="line"><span class="string">        &lt;button @click="stus[0].name='zhang'"&gt;改变数组naem属性值&lt;/button&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>,</span><br><span class="line">    data() &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        stus: [&#123;<span class="attr">name</span>:<span class="string">'zhao'</span>&#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 深度监听</span></span><br><span class="line">    watch: &#123;</span><br><span class="line">      stus:&#123;</span><br><span class="line">        deep: <span class="literal">true</span>,</span><br><span class="line">        handler(newVal, oldVal) &#123;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">'改变了'</span>);</span><br><span class="line">          </span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">      app</span><br><span class="line">    &#125;,</span><br><span class="line">    template: <span class="string">'&lt;app/&gt;'</span></span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;vue&quot;&gt;&lt;a href=&quot;#vue&quot; class=&quot;headerlink&quot; title=&quot;vue&quot;&gt;&lt;/a&gt;vue&lt;/h1&gt;&lt;h2 id=&quot;双向数据绑定&quot;&gt;&lt;a href=&quot;#双向数据绑定&quot; class=&quot;headerlink&quot; title=&quot;双向数据绑定&quot;&gt;&lt;
      
    
    </summary>
    
      <category term="前端框架" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="vue" scheme="https://zhaozhoa.github.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>es6</title>
    <link href="https://zhaozhoa.github.com/2019/04/04/es6/"/>
    <id>https://zhaozhoa.github.com/2019/04/04/es6/</id>
    <published>2019-04-03T16:41:43.000Z</published>
    <updated>2019-06-17T08:42:08.707Z</updated>
    
    <content type="html"><![CDATA[<h1 id="es6"><a href="#es6" class="headerlink" title="es6"></a>es6</h1><p><strong>参考资料：<a href="http://es6.ruanyifeng.com/#docs/destructuring" target="_blank" rel="noopener">阮一峰的es6</a></strong></p><h2 id="变量-amp-赋值"><a href="#变量-amp-赋值" class="headerlink" title="变量&amp;赋值"></a>变量&amp;赋值</h2><h3 id="var-的缺点"><a href="#var-的缺点" class="headerlink" title="var 的缺点"></a>var 的缺点</h3><ul><li>可以重复定义</li><li>不能限制修改</li><li>没有块级作用域</li></ul><h3 id="let和const"><a href="#let和const" class="headerlink" title="let和const"></a>let和const</h3><p>对比：</p><table><thead><tr><th>let</th><th>定义变量</th><th>有块级作用于</th><th>不能重复定义</th><th>声明不会提升</th></tr></thead><tbody><tr><td>const</td><td>定义常量</td><td>有块级作用于</td><td>不能重复定义</td><td>声明不会提升</td></tr><tr><td>var</td><td>定义变量</td><td>没有块级作用域</td><td>可以重复定义会覆盖</td><td>声明会提升</td></tr></tbody></table><h4 id="经典用法"><a href="#经典用法" class="headerlink" title="经典用法"></a>经典用法</h4><p><strong>解决for循环中的闭包</strong></p><ul><li>es6用法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;input type=<span class="string">"button"</span> value=<span class="string">"1"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"button"</span> value=<span class="string">"2"</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">"button"</span> value=<span class="string">"3"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp"> &lt;script&gt;</span></span><br><span class="line"><span class="regexp">    window.onload=function ()&#123;</span></span><br><span class="line"><span class="regexp">      let aBtn=document.getElementsByTagName('input');</span></span><br><span class="line"><span class="regexp">        </span></span><br><span class="line"><span class="regexp">      for(let i=0;i&lt;aBtn.length;i++)&#123;</span></span><br><span class="line"><span class="regexp">        aBtn[i].onclick=function ()&#123;</span></span><br><span class="line"><span class="regexp">          alert(i);</span></span><br><span class="line"><span class="regexp">        &#125;;</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp"> &lt;/</span>script&gt;</span><br></pre></td></tr></table></figure><ul><li>es5闭包实现</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">   &lt;input type=<span class="string">"button"</span> value=<span class="string">"1"</span>&gt;</span><br><span class="line">   &lt;input type=<span class="string">"button"</span> value=<span class="string">"2"</span>&gt;</span><br><span class="line">   &lt;input type=<span class="string">"button"</span> value=<span class="string">"3"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp"> &lt;script&gt;</span></span><br><span class="line"><span class="regexp">    window.onload=function ()&#123;</span></span><br><span class="line"><span class="regexp">      var aBtn=document.getElementsByTagName('input');</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">      for(var i=0;i&lt;aBtn.length;i++)&#123;</span></span><br><span class="line"><span class="regexp">        (function (i) &#123;</span></span><br><span class="line"><span class="regexp">          aBtn[i].onclick=function ()&#123;</span></span><br><span class="line"><span class="regexp">          alert(i);</span></span><br><span class="line"><span class="regexp">          &#125;;</span></span><br><span class="line"><span class="regexp">        &#125;)(i)</span></span><br><span class="line"><span class="regexp">      &#125;</span></span><br><span class="line"><span class="regexp">    &#125;;</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure><h4 id="结构赋值"><a href="#结构赋值" class="headerlink" title="结构赋值"></a>结构赋值</h4><ul><li>数组：将等号右边的 按格式<code>依次赋值</code>给 等号左边</li><li>字面量对象： 等号右边的对象的属性和左边的<code>变量名相同的匹配</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span>&#123;a,b,c&#125; = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>, <span class="attr">c</span>:<span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><ul><li>es5 函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">参数<span class="number">1</span>，参数<span class="number">2</span></span>) </span>&#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>es6 函数</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(参数<span class="number">1</span>，参数<span class="number">2</span>)=&gt;&#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意：</strong></p><ol><li>如果<code>有且仅有</code>一个参数  （）可以省略</li><li>如果函数体只是 return 返回的一句话 {} 可以省略</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> show = <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a*<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show(<span class="number">3</span>) <span class="comment">//9</span></span><br></pre></td></tr></table></figure><p>简写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> show = <span class="function"><span class="params">a</span> =&gt;</span> a*<span class="number">3</span></span><br><span class="line"></span><br><span class="line">show(<span class="number">3</span>)<span class="comment">//9</span></span><br></pre></td></tr></table></figure><h3 id="默认参数"><a href="#默认参数" class="headerlink" title="默认参数"></a>默认参数</h3><p>在 es5 中 函数的参数没有默认值 但可以通过函数体实现</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span> (<span class="params">a, b, c</span>) </span>&#123;</span><br><span class="line">    b = b || <span class="number">2</span></span><br><span class="line">    c = c || <span class="number">3</span></span><br><span class="line">    <span class="built_in">console</span>.log(a+b+c)</span><br><span class="line">&#125;</span><br><span class="line">show(<span class="number">1</span>) <span class="comment">//6</span></span><br><span class="line">show(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>) <span class="comment">//5</span></span><br></pre></td></tr></table></figure><p>es6 中</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span> (<span class="params">a, b = <span class="number">2</span>, c = <span class="number">3</span></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a+b+c)</span><br><span class="line">&#125;</span><br><span class="line">show(<span class="number">1</span>) <span class="comment">//6</span></span><br><span class="line">show(<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>) <span class="comment">//5</span></span><br></pre></td></tr></table></figure><h3 id="…运算符"><a href="#…运算符" class="headerlink" title="…运算符"></a>…运算符</h3><p><strong>…名字  的用法</strong></p><p><strong>作用一: rest参数</strong></p><p>ES6 引入 rest 参数（形式为<code>...变量名</code>），用于获取函数的多余参数，这样就不需要使用<code>arguments</code>对象了。rest 参数搭配的变量是一个数组，该变量将多余的参数放入数组中。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">a,b,c,...f</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>(a,b,c,f)</span><br><span class="line">&#125;</span><br><span class="line">show(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//1 2 3 [4, 5, 6, 7, 8]</span></span><br></pre></td></tr></table></figure><p><strong>作用 二：扩展运算符</strong></p><p>它好比 rest 参数的逆运算，将一个数组转为用逗号分隔的参数序列。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">9</span>,<span class="number">10</span>]</span><br><span class="line">arr.push(...arr2)</span><br><span class="line"><span class="built_in">console</span>.log(arr)</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">10</span>]</span><br></pre></td></tr></table></figure><h2 id="数组-amp-json"><a href="#数组-amp-json" class="headerlink" title="数组&amp;json"></a>数组&amp;json</h2><h3 id="map（映射）"><a href="#map（映射）" class="headerlink" title="map（映射）"></a>map（映射）</h3><p>表示一对一的关系，如：给定成绩数组，返回对应是否及格数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// [30,50,67,80,90,45]=&gt;[false,false,true,true,true,false]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">30</span>, <span class="number">50</span>, <span class="number">67</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">45</span>]</span><br><span class="line">    <span class="keyword">let</span> arr2  = arr.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (item &gt;= <span class="number">60</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(arr2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line"><span class="keyword">let</span> arr2  = arr.map(<span class="function"><span class="params">item</span> =&gt;</span> item&gt;=<span class="number">60</span> )</span><br><span class="line"><span class="built_in">console</span>.log(arr2);</span><br></pre></td></tr></table></figure><p>map 的返回值是一个新数组</p><h3 id="filter（过滤）"><a href="#filter（过滤）" class="headerlink" title="filter（过滤）"></a>filter（过滤）</h3><p>过滤掉不及格的成绩</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">30</span>, <span class="number">50</span>, <span class="number">67</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">45</span>]</span><br><span class="line">    <span class="keyword">let</span> arr2 = arr.filter(<span class="function"><span class="params">item</span> =&gt;</span> item &gt;= <span class="number">60</span>)</span><br><span class="line">    <span class="comment">//item &gt;=60 将其返回，否则过滤掉</span></span><br><span class="line">    <span class="built_in">console</span>.log(arr2);</span><br></pre></td></tr></table></figure><p>filter 返回也使一个新数组</p><h3 id="forEach（遍历）"><a href="#forEach（遍历）" class="headerlink" title="forEach（遍历）"></a>forEach（遍历）</h3><p>求总成绩</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">30</span>, <span class="number">50</span>, <span class="number">67</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">45</span>]</span><br><span class="line">    <span class="keyword">let</span> sum = <span class="number">0</span>;</span><br><span class="line">    arr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      sum += item</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(sum);</span><br></pre></td></tr></table></figure><h3 id="reduce-（减少）"><a href="#reduce-（减少）" class="headerlink" title="reduce （减少）"></a>reduce （减少）</h3><p>进去一堆，出来一个，多用于汇总</p><p>求和</p><p>参数 tem 为临时值，用于保存每次相加的结果</p><p>tmp 第一次 为 30</p><pre><code>第二次 为 80</code></pre><p>​        …      147</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">30</span>, <span class="number">50</span>, <span class="number">67</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">45</span>]</span><br><span class="line">    <span class="keyword">let</span> sum = arr.reduce(<span class="function">(<span class="params">tmp, item, index</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> tmp +item</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(sum);</span><br></pre></td></tr></table></figure><h3 id="set（集合）"><a href="#set（集合）" class="headerlink" title="set（集合）"></a>set（集合）</h3><p>去除数组重复的元素</p><p>先将 数组转换成集合，再将集合转换成数组</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">30</span>, <span class="number">50</span>, <span class="number">67</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">45</span>,<span class="number">67</span>, <span class="number">80</span>, <span class="number">90</span>, <span class="number">45</span>]</span><br><span class="line">  <span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br><span class="line">  <span class="built_in">console</span>.log(arr2);</span><br></pre></td></tr></table></figure><h3 id="json"><a href="#json" class="headerlink" title="json"></a>json</h3><ul><li>如果键值名字相同，可以只写一个</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">12</span></span><br><span class="line"><span class="keyword">let</span> json = &#123;a, b&#125; <span class="comment">//相当于 let json = &#123;a: a, b: b&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(json);</span><br></pre></td></tr></table></figure><ul><li>省略 function</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">10</span></span><br><span class="line"> <span class="keyword">let</span> b = <span class="number">12</span></span><br><span class="line"> <span class="keyword">let</span> json = &#123;</span><br><span class="line">   a, </span><br><span class="line">   b,</span><br><span class="line">   show()&#123;</span><br><span class="line">     <span class="keyword">return</span> a + b</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="字符串模板"><a href="#字符串模板" class="headerlink" title="字符串模板"></a>字符串模板</h3><p>用 ``符号将字符串包裹，用 ${变量}</p><p>优点：</p><ul><li>植入变量</li><li>可以行</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> json = &#123;</span><br><span class="line">    age: <span class="number">25</span>,</span><br><span class="line">    name: <span class="string">'zhao'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'我叫'</span> + json.name + <span class="string">'今年'</span> + json.age);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//用字符串模板</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`我叫<span class="subst">$&#123;json.name&#125;</span>,今年<span class="subst">$&#123;json.age&#125;</span>`</span>);</span><br></pre></td></tr></table></figure><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><h3 id="类"><a href="#类" class="headerlink" title="类"></a>类</h3><ul><li>class 类名{}</li><li>constructor（） {属性}</li><li>方法（）{}</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">   <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">     <span class="keyword">this</span>.name = name;</span><br><span class="line">     <span class="keyword">this</span>.age = age</span><br><span class="line">   &#125;</span><br><span class="line">   showname() &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">`我叫 <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>);</span><br><span class="line">   &#125;</span><br><span class="line">   showage() &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">`我 <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>`</span>);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">let</span> p = <span class="keyword">new</span> Person(<span class="string">'小米'</span>, <span class="number">18</span>)</span><br><span class="line"> p.showname() <span class="comment">//我叫 小米</span></span><br><span class="line"> p.showage() <span class="comment">//我 18</span></span><br></pre></td></tr></table></figure><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><ul><li>class 子类 extends 父类{}</li><li>super（继承父类的属性）</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name, age) &#123;</span><br><span class="line">      <span class="keyword">this</span>.name = name;</span><br><span class="line">      <span class="keyword">this</span>.age = age</span><br><span class="line">    &#125;</span><br><span class="line">    showname() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`我叫 <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    showage() &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`我 <span class="subst">$&#123;<span class="keyword">this</span>.age&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Worker</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name, age, job) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name, age);</span><br><span class="line">    <span class="keyword">this</span>.job = job;</span><br><span class="line">  &#125;</span><br><span class="line">  showjob() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`我的工作是 <span class="subst">$&#123;<span class="keyword">this</span>.job&#125;</span>`</span>);</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> worker = <span class="keyword">new</span> Worker(<span class="string">'小米'</span>, <span class="number">18</span>, <span class="string">'打杂的'</span>)</span><br><span class="line"></span><br><span class="line">worker.showage() <span class="comment">//我 18</span></span><br><span class="line">worker.showname() <span class="comment">//我叫 小米</span></span><br><span class="line">worker.showjob() <span class="comment">// 我的工作是 打杂的</span></span><br></pre></td></tr></table></figure><h2 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h2><ol><li>创建一个promise对象</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = promise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br><span class="line">p.then (<span class="function"><span class="params">()</span> =&gt;</span>&#123;&#125;,() =&gt; &#123;&#125;)</span><br></pre></td></tr></table></figure><p>promise 对象中有两参数，一个表示请求成功后的回调函数，一个是请求失败的回调函数</p><p>then 方法接收两个函数，第一个是 resolve 的回调函数，第二个是 reject 的回调函数</p><p><strong>使用：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/a.txt'</span>, <span class="string">'utf8'</span>,  (err, data)=&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/b.txt'</span>, <span class="string">'utf8'</span>,  (err, data)=&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/c.txt'</span>, <span class="string">'utf8'</span>,  (err, data)=&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p1</span><br><span class="line">  .then( <span class="function">(<span class="params">data</span>) =&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="comment">// 当 p1 读取成功的时候</span></span><br><span class="line">    <span class="comment">// 当前函数中 return 的结果就可以在后面的 then 中 function 接收到</span></span><br><span class="line">    <span class="comment">// 真正有用的是：我们可以 return 一个 Promise 对象</span></span><br><span class="line">    <span class="comment">// 当 return 一个 Promise 对象的时候，后续的 then 方法中的第一个参数会作为 p2 的 resolve</span></span><br><span class="line">    <span class="keyword">return</span> p2</span><br><span class="line">  &#125;,  (err) =&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'读取文件失败了'</span>, err)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then( <span class="function">(<span class="params">data</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> p3</span><br><span class="line">  &#125;)</span><br><span class="line">  .then( <span class="function">(<span class="params">data</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'end'</span>)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p><strong>promise.all 使用</strong></p><p>promise.all 方法可以简化 then 方法的使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/a.txt'</span>, <span class="string">'utf8'</span>,  (err, data)=&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/b.txt'</span>, <span class="string">'utf8'</span>,  (err, data)=&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p3 = <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject</span>) =&gt;</span>&#123;</span><br><span class="line">  fs.readFile(<span class="string">'./data/c.txt'</span>, <span class="string">'utf8'</span>,  (err, data)=&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      reject(err)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p1,p2,p3]).then(<span class="function"><span class="params">arr</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//解构赋值</span></span><br><span class="line">  <span class="keyword">let</span> [a, b, c] =arr;</span><br><span class="line">  alert(<span class="string">'成功'</span>)</span><br><span class="line">&#125;,err=&gt; &#123;</span><br><span class="line">  alert(<span class="string">'失败'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>all 方法中 以数组形式 传入promise 对象，后面 then 中用数组接收返回结果 </p><h2 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h2><ul><li>generator 可以使函数 运行时暂停</li><li>yield 可以设置断点</li><li>generator 函数是有返回值的</li><li>执行 generator 函数 需要用到 返回值 中的 next() 方法</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个 generator 函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">show</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用 yield 可以设置 断点 ，</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">show</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'aaa'</span>)</span><br><span class="line">  <span class="keyword">yield</span></span><br><span class="line">  alert(<span class="string">'bbb'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//接收 generator 函数 的返回值</span></span><br><span class="line"><span class="keyword">let</span> gen = show()</span><br><span class="line"></span><br><span class="line"><span class="comment">//调用</span></span><br><span class="line">gen.next() <span class="comment">//此时函数执行到 yield 处停止 // aaa</span></span><br><span class="line">gen.next() <span class="comment">//执行yield 下半部分 // bbb</span></span><br></pre></td></tr></table></figure><h3 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h3><ul><li>传参</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">show</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'aaa'</span>)</span><br><span class="line">  <span class="comment">// 接受参数</span></span><br><span class="line">  <span class="keyword">let</span> a = <span class="keyword">yield</span></span><br><span class="line">  alert(<span class="string">'bbb'</span> + a) <span class="comment">// bbb12</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gen = show()</span><br><span class="line"></span><br><span class="line">gen.next() </span><br><span class="line">gen.next(<span class="number">12</span>) <span class="comment">//传参</span></span><br></pre></td></tr></table></figure><ul><li>返回</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> *<span class="title">show</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  alert(<span class="string">'aaa'</span>)</span><br><span class="line">  <span class="comment">// 返回值</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="number">55</span></span><br><span class="line">  alert(<span class="string">'bbb'</span>) </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> gen = show()</span><br><span class="line"><span class="keyword">let</span> res1 = gen.next() </span><br><span class="line"><span class="built_in">console</span>.log(res1) <span class="comment">// &#123;value: 55, done: false&#125;</span></span><br><span class="line"><span class="keyword">let</span> res2 = gen.next() </span><br><span class="line"><span class="built_in">console</span>.log(res2) <span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure><p>done ，表示函数是否执行完成</p><h2 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> data1 = <span class="keyword">await</span> $.ajax(url: <span class="string">'1.text'</span>,<span class="attr">dataType</span>: <span class="string">'json'</span>)</span><br><span class="line">    <span class="keyword">let</span> data2 = <span class="keyword">await</span> $.ajax(url: <span class="string">'2.text'</span>,<span class="attr">dataType</span>: <span class="string">'json'</span>)</span><br><span class="line">    <span class="keyword">let</span> data3 = <span class="keyword">await</span> $.ajax(url: <span class="string">'3.text'</span>,<span class="attr">dataType</span>: <span class="string">'json'</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">      alert(<span class="string">'出错'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">show()</span><br></pre></td></tr></table></figure><p>async 中的 await 异步操作 会变成按顺序执行 ，同时返回成功的结果，可以用try-catch进行错误捕获，得到错误结果</p><h2 id="编译——-gt-es5"><a href="#编译——-gt-es5" class="headerlink" title="编译——&gt;es5"></a>编译——&gt;es5</h2><p>babel编译</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;es6&quot;&gt;&lt;a href=&quot;#es6&quot; class=&quot;headerlink&quot; title=&quot;es6&quot;&gt;&lt;/a&gt;es6&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;参考资料：&lt;a href=&quot;http://es6.ruanyifeng.com/#docs/destructurin
      
    
    </summary>
    
      <category term="前端" scheme="https://zhaozhoa.github.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="es6" scheme="https://zhaozhoa.github.com/tags/es6/"/>
    
  </entry>
  
  <entry>
    <title>koa</title>
    <link href="https://zhaozhoa.github.com/2019/03/31/koa/"/>
    <id>https://zhaozhoa.github.com/2019/03/31/koa/</id>
    <published>2019-03-31T10:16:42.000Z</published>
    <updated>2019-03-31T10:17:51.105Z</updated>
    
    <content type="html"><![CDATA[<h1 id="koa"><a href="#koa" class="headerlink" title="koa"></a>koa</h1><p><strong>koa 中所有的异步操作都需要用 async /await</strong></p><p>安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i koa koa-static koa-better-body koa-convert koa-router -D</span><br></pre></td></tr></table></figure><ul><li>koa-static 用于开放静态资源</li><li>koa-better-body 用于解析 post 提交数据</li><li>koa-convert 用于兼容中间件</li><li>koa-router 用于路由</li></ul><h2 id="koa-入门"><a href="#koa-入门" class="headerlink" title="koa 入门"></a>koa 入门</h2><ul><li>引入模块</li><li>使用</li><li>监听端口</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = <span class="keyword">new</span> koa()</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br></pre></td></tr></table></figure><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>koa 对router 强依赖，不像 express 一样可以自带简单路由</p><p><strong>express 中的简单路由</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> server = express</span><br><span class="line">server.get(<span class="string">'/'</span>, (req, res)=&gt;&#123;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>但是这个不能在 koa 中使用，要在 koa 中使用路由，必须</p><ul><li>引入路由模块，</li><li>创建路由</li><li>配置中间件</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = <span class="keyword">new</span> koa()</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> router1 = router()</span><br><span class="line">server.use(router1.routes())</span><br><span class="line"></span><br><span class="line">router1.get(<span class="string">'/'</span>, <span class="keyword">async</span>(ctx, next) =&gt; &#123;</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="async-中的-ctx-对象-的重要属性"><a href="#async-中的-ctx-对象-的重要属性" class="headerlink" title="async 中的 ctx 对象 的重要属性"></a>async 中的 ctx 对象 的重要属性</h2><ul><li><p>ctx. req</p><p>原生的 req 对象</p></li><li><p>ctx.request</p><p>koa 封装的 req 对象</p></li><li><p>ctx.res</p><p>原生的 res 对象</p></li><li><p>ctx.response</p><p>koa 封装的 res 对象</p></li></ul><h3 id="ctx-response"><a href="#ctx-response" class="headerlink" title="ctx.response"></a>ctx.response</h3><ul><li>设置响应头</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置一个 a 的响应头， 值为 12</span></span><br><span class="line">ctx.response.set(<span class="string">'a'</span>, <span class="number">12</span>)</span><br></pre></td></tr></table></figure><ul><li>设置返回内容</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//向浏览器返回json</span></span><br><span class="line">ctx.response.body = &#123;<span class="attr">a</span>: <span class="number">12</span>, <span class="attr">b</span>: <span class="number">25</span>&#125;</span><br></pre></td></tr></table></figure><ul><li>设置状态码</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.response.status = <span class="number">403</span></span><br></pre></td></tr></table></figure><h3 id="ctx-request"><a href="#ctx-request" class="headerlink" title="ctx.request"></a>ctx.request</h3><ul><li>获取请求头</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.request.headers</span><br></pre></td></tr></table></figure><h2 id="开放静态文件，-返回文件"><a href="#开放静态文件，-返回文件" class="headerlink" title="开放静态文件， 返回文件"></a>开放静态文件， 返回文件</h2><p>开放 www 目录下的资源</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">static</span> = <span class="built_in">require</span>(<span class="string">'koa-static'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = <span class="keyword">new</span> koa()</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 路径转化成绝对路径</span></span><br><span class="line">server.use(<span class="keyword">static</span>(path.resolve(<span class="string">'./www'</span>)))</span><br></pre></td></tr></table></figure><p> 如果 www 目录下面 有一个 1.html 我文件，则可以通过 </p><p><a href="http://localhost:8888/1.html" target="_blank" rel="noopener">http://localhost:8888/1.html</a>请求</p><h3 id="koa-static-存在问题"><a href="#koa-static-存在问题" class="headerlink" title="koa-static 存在问题"></a>koa-static 存在问题</h3><ul><li>发送给浏览器的文件没有经过压缩</li><li>发送的文件不会缓存</li></ul><p><strong>解决方法</strong></p><p>使用中间件 <code>koa-static-cache</code> 代替 koa-static</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> staticCache = <span class="built_in">require</span>(<span class="string">'koa-static-cache'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = <span class="keyword">new</span> koa()</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 路径转化成绝对路径</span></span><br><span class="line">server.use(staticCache(path.resolve(<span class="string">'./www'</span>)))</span><br></pre></td></tr></table></figure><h2 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h2><h3 id="获取-get-数据"><a href="#获取-get-数据" class="headerlink" title="获取 get 数据"></a>获取 get 数据</h3><p><strong>获取问号参数</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.request.query</span><br></pre></td></tr></table></figure><p><strong>获取路由参数</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.params</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = <span class="keyword">new</span> koa()</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r1 = router()</span><br><span class="line">server.use(r1.routes())</span><br><span class="line"></span><br><span class="line"><span class="comment">// 路由参数为 user，和 age</span></span><br><span class="line">r1.get(<span class="string">'/:user/:age'</span>, <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  ctx.response.body = <span class="string">'sadfasd'</span></span><br><span class="line">  <span class="built_in">console</span>.log(ctx.params); <span class="comment">//&#123; user: '小明', age: '54' &#125;</span></span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>请求url：<a href="http://localhost:8888/小明/54" target="_blank" rel="noopener">http://localhost:8888/小明/54</a> ，</p><h3 id="获取-post-数据"><a href="#获取-post-数据" class="headerlink" title="获取 post 数据"></a>获取 post 数据</h3><ol><li>引入第三方模块 koa-better-body，用来解析 post 提交的数据</li><li>引入 koa-convert ，用来 兼容 koa-better-body 在 koa2版本的使用</li></ol><ul><li><p>ctx.request.fields</p><p>可以获取 post 方式提交的 表单，文件信息</p></li><li><p>ctx.request.files</p><p>只能获取 post 方式提交的 文件信息</p></li></ul><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> betterBody = <span class="built_in">require</span>(<span class="string">'koa-better-body'</span>)</span><br><span class="line"><span class="keyword">const</span> staticCache = <span class="built_in">require</span>(<span class="string">'koa-static-cache'</span>)</span><br><span class="line"><span class="keyword">const</span> convert = <span class="built_in">require</span>(<span class="string">'koa-convert'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = <span class="keyword">new</span> koa()</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开放静态资源</span></span><br><span class="line">server.use(staticCache(path.resolve(<span class="string">'./www'</span>)))</span><br><span class="line"></span><br><span class="line">server.use(convert(betterBody(&#123;</span><br><span class="line">  <span class="comment">//保存提交的文件地址</span></span><br><span class="line">  uploadDir: path.resolve(<span class="string">'./upload'</span>),</span><br><span class="line">  <span class="comment">//是否保留上传文件的扩展名（一般不用保留）</span></span><br><span class="line">  keepExtensions: <span class="literal">true</span></span><br><span class="line">&#125;)))</span><br><span class="line"></span><br><span class="line"><span class="comment">//不用路由，可以获取所有的提交</span></span><br><span class="line">server.use(<span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ctx.request.fields);</span><br><span class="line">  <span class="built_in">console</span>.log(ctx.request.files);</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="cookie-amp-session"><a href="#cookie-amp-session" class="headerlink" title="cookie&amp;session"></a>cookie&amp;session</h2><h3 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h3><ul><li>获取cookie</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.cookies.get(cookie名字)</span><br></pre></td></tr></table></figure><ul><li>设置cookie</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.cookes.set(cookie名字，值，option)</span><br></pre></td></tr></table></figure><h3 id="session"><a href="#session" class="headerlink" title="session"></a>session</h3><p>使用 第三方模块 koa- session</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">'koa-session'</span>)</span><br></pre></td></tr></table></figure><p>配置中间件</p><p>{}中填入session 的信息</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.use(session(&#123;&#125;, server))</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ctx.session</span><br></pre></td></tr></table></figure><h2 id="ejs-后端渲染"><a href="#ejs-后端渲染" class="headerlink" title="ejs 后端渲染"></a>ejs 后端渲染</h2><p>安装 ejs</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ejs = <span class="built_in">require</span>(<span class="string">'koa-ejs'</span>)</span><br></pre></td></tr></table></figure><p><code>将模板文件创建在 template 目录下 名称为 template.html</code></p><p>使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> ejs = <span class="built_in">require</span>(<span class="string">'koa-ejs'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = <span class="keyword">new</span> koa()</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line">ejs(server, &#123;</span><br><span class="line">  <span class="comment">//模板文件目录</span></span><br><span class="line">  root: path.resolve(<span class="string">'template'</span>),</span><br><span class="line">  layout: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">//模板文件 扩展名</span></span><br><span class="line">  viewExt: <span class="string">'html'</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.use(<span class="keyword">async</span> ctx=&gt;&#123;</span><br><span class="line">  <span class="comment">//渲染文件 template，不用带扩展名，&#123;渲染数据&#125;</span></span><br><span class="line">  <span class="keyword">await</span> ctx.render(<span class="string">'template'</span>, &#123;</span><br><span class="line">    name: <span class="string">'zhao'</span>,</span><br><span class="line">    age: <span class="number">20</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><p>引入中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> db = <span class="built_in">require</span>(<span class="string">'mysql-pro'</span>)</span><br></pre></td></tr></table></figure><p><strong>优点:</strong></p><ul><li>事务管理（Transaction）</li><li>防止 SQL 注入</li></ul><p>使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>)</span><br><span class="line"><span class="keyword">const</span> Mysql = <span class="built_in">require</span>(<span class="string">'mysql-pro'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> db = <span class="keyword">new</span> Mysql(&#123;</span><br><span class="line"> mysql: &#123;</span><br><span class="line">    host: <span class="string">'localhost'</span>,</span><br><span class="line">    port: <span class="string">'3306'</span>,</span><br><span class="line">    user: <span class="string">'root'</span>,</span><br><span class="line">    password: <span class="string">'123456'</span>,</span><br><span class="line">    database: <span class="string">'test'</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = <span class="keyword">new</span> koa()</span><br><span class="line">server.listen(<span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> r1= router()</span><br><span class="line">server.use(r1.routes())</span><br><span class="line"></span><br><span class="line">r1.get(<span class="string">'/user'</span>, <span class="keyword">async</span> ctx=&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> id = ctx.query.id;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 开启事务</span></span><br><span class="line">  <span class="keyword">await</span> db.startTransaction()</span><br><span class="line"><span class="comment">//防止sql 注入</span></span><br><span class="line">  <span class="keyword">let</span> data = <span class="keyword">await</span> db.executeTransaction(<span class="string">'SELECT * FROM user WHERE ID=?;'</span>,[id])</span><br><span class="line">  ctx.response.body = data</span><br><span class="line">  <span class="comment">//关闭事务</span></span><br><span class="line">  <span class="keyword">await</span> db.stopTransaction()</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><code>注意:</code></p><ul><li>开启事务，对应着要关闭事务</li><li>为了防止 sql 注入，mysql-pro 要求将 需要的参数用 <code>?</code> 代替，然后将参数用数组的形式放到语句后面。</li></ul><h3 id="事务（transaction）"><a href="#事务（transaction）" class="headerlink" title="事务（transaction）"></a>事务（transaction）</h3><p>性质：</p><ul><li><p>A  原子性</p><p>事务内的事情，要么都发生，要么都不发生</p></li><li><p>C  持久性</p><p>只要事务提交，他的作用就是永久的</p></li><li><p>I 隔离性</p><p>各事务之间独立，不干扰</p></li><li><p>D 一致性</p><p>事务前后的状态一致</p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;koa&quot;&gt;&lt;a href=&quot;#koa&quot; class=&quot;headerlink&quot; title=&quot;koa&quot;&gt;&lt;/a&gt;koa&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;koa 中所有的异步操作都需要用 async /await&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;安装&lt;/p&gt;
&lt;figu
      
    
    </summary>
    
      <category term="node" scheme="https://zhaozhoa.github.com/categories/node/"/>
    
    
      <category term="koa" scheme="https://zhaozhoa.github.com/tags/koa/"/>
    
  </entry>
  
</feed>
